LavaPack.loadBundle([[6620,{"./gas-action-constants":6619,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,lodash:5091},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e=u,t){switch(t.type){case o.SET_CUSTOM_GAS_PRICE:return c(c({},e),{},{customData:c(c({},e.customData),{},{price:t.value})});case o.SET_CUSTOM_GAS_LIMIT:return c(c({},e),{},{customData:c(c({},e.customData),{},{limit:t.value})});case o.RESET_CUSTOM_DATA:return c(c({},e),{},{customData:(0,s.cloneDeep)(u.customData)});default:return e}},n.resetCustomData=function(){return{type:o.RESET_CUSTOM_DATA}},n.setCustomGasLimit=function(e){return{type:o.SET_CUSTOM_GAS_LIMIT,value:e}},n.setCustomGasPrice=function(e){return{type:o.SET_CUSTOM_GAS_PRICE,value:e}};var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("lodash"),o=e("./gas-action-constants");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u={customData:{price:null,limit:null}}}}},{package:"$root$"}],[6624,{"../../../shared/constants/alerts":6104,"../../../shared/constants/gas":6106,"../../../shared/constants/hardware-wallets":6107,"../../../shared/constants/network":6110,"../../../shared/modules/string-utils":6124,"../../helpers/utils/conversions.util":6651,"../../selectors":7030,"../../store/actionConstants":7035,"../../store/actions":7036,"../gas/gas.duck":6620,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,"ethereumjs-util":2437},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e={},t){const n=S({isInitialized:!1,isUnlocked:!1,isAccountMenuOpen:!1,identities:{},unapprovedTxs:{},frequentRpcList:[],addressBook:[],contractExchangeRates:{},pendingTokens:{},customNonceValue:"",useBlockie:!1,featureFlags:{},welcomeScreenSeen:!1,currentLocale:"",currentBlockGasLimit:"",preferences:{autoLockTimeLimit:undefined,showFiatInTestnets:!1,showTestNetworks:!1,useNativeCurrencyAsPrimaryCurrency:!0},firstTimeFlowType:null,completedOnboarding:!1,knownMethodData:{},participateInMetaMetrics:null,nextNonce:null,conversionRate:null,nativeCurrency:"ETH"},e);switch(t.type){case o.UPDATE_METAMASK_STATE:return S(S({},n),t.value);case o.LOCK_METAMASK:return S(S({},n),{},{isUnlocked:!1});case o.SET_RPC_TARGET:return S(S({},n),{},{provider:{type:u.NETWORK_TYPE_RPC,rpcUrl:t.value}});case o.SET_PROVIDER_TYPE:return S(S({},n),{},{provider:{type:t.value}});case o.SHOW_ACCOUNT_DETAIL:return S(S({},n),{},{isUnlocked:!0,isInitialized:!0,selectedAddress:t.value});case o.SET_ACCOUNT_LABEL:{const{account:e}=t.value,r=t.value.label,a={};a[e]=S(S({},n.identities[e]),{},{name:r});const s=S(S({},n.identities),a);return Object.assign(n,{identities:s})}case o.UPDATE_CUSTOM_NONCE:return S(S({},n),{},{customNonceValue:t.value});case o.TOGGLE_ACCOUNT_MENU:return S(S({},n),{},{isAccountMenuOpen:!n.isAccountMenuOpen});case o.UPDATE_TRANSACTION_PARAMS:{const{id:e,value:r}=t;let{currentNetworkTxList:a}=n;return a=a.map((t=>{if(t.id===e){const e=S({},t);return e.txParams=r,e}return t})),S(S({},n),{},{currentNetworkTxList:a})}case o.SET_PARTICIPATE_IN_METAMETRICS:return S(S({},n),{},{participateInMetaMetrics:t.value});case o.SET_USE_BLOCKIE:return S(S({},n),{},{useBlockie:t.value});case o.UPDATE_FEATURE_FLAGS:return S(S({},n),{},{featureFlags:t.value});case o.CLOSE_WELCOME_SCREEN:return S(S({},n),{},{welcomeScreenSeen:!0});case o.SET_CURRENT_LOCALE:return S(S({},n),{},{currentLocale:t.value.locale});case o.SET_PENDING_TOKENS:return S(S({},n),{},{pendingTokens:S({},t.payload)});case o.CLEAR_PENDING_TOKENS:return S(S({},n),{},{pendingTokens:{}});case o.UPDATE_PREFERENCES:return S(S({},n),{},{preferences:S(S({},n.preferences),t.payload)});case o.COMPLETE_ONBOARDING:return S(S({},n),{},{completedOnboarding:!0});case o.SET_FIRST_TIME_FLOW_TYPE:return S(S({},n),{},{firstTimeFlowType:t.value});case o.SET_NEXT_NONCE:return S(S({},n),{},{nextNonce:t.value});default:return n}},n.doesUserHaveALedgerAccount=function(e){return e.metamask.keyrings.some((e=>e.type===m.KEYRING_TYPES.LEDGER))},n.findKeyringForAddress=I,n.getAlertEnabledness=void 0,n.getBlockGasLimit=function(e){return e.metamask.currentBlockGasLimit},n.getCollectibles=n.getCollectibleContracts=void 0,n.getCollectiblesDetectionNoticeDismissed=function(e){return e.metamask.collectiblesDetectionNoticeDismissed},n.getCollectiblesDropdownState=function(e){return e.metamask.collectiblesDropdownState},n.getCompletedOnboarding=function(e){return e.metamask.completedOnboarding},n.getConversionRate=function(e){return e.metamask.conversionRate},n.getCurrentLocale=void 0,n.getEnableEIP1559V2NoticeDismissed=function(e){return e.metamask.enableEIP1559V2NoticeDismissed},n.getEstimatedGasFeeTimeBounds=function(e){return e.metamask.estimatedGasFeeTimeBounds},n.getGasEstimateType=O,n.getGasFeeEstimates=N,n.getIsGasEstimatesLoading=function(e){const t=(0,l.checkNetworkAndAccountSupports1559)(e),n=O(e),r=n===c.GAS_ESTIMATE_TYPES.FEE_MARKET||n===c.GAS_ESTIMATE_TYPES.ETH_GASPRICE;return n===c.GAS_ESTIMATE_TYPES.NONE||t&&!r||!t&&n===c.GAS_ESTIMATE_TYPES.FEE_MARKET},n.getIsInitialized=function(e){return e.metamask.isInitialized},n.getIsNetworkBusy=function(e){const t=N(e);return(null==t?void 0:t.networkCongestion)>=c.NETWORK_CONGESTION_THRESHOLDS.BUSY},n.getIsUnlocked=function(e){return e.metamask.isUnlocked},n.getLedgerTransportType=function(e){return e.metamask.ledgerTransportType},n.getNativeCurrency=function(e){return e.metamask.nativeCurrency},n.getPendingTokens=void 0,n.getSeedPhraseBackedUp=function(e){return e.metamask.seedPhraseBackedUp},n.getSendHexDataFeatureFlagState=function(e){return e.metamask.featureFlags.sendHexData},n.getSendToAccounts=function(e){const t=(0,l.accountsWithSendEtherInfoSelector)(e),n=(0,l.getAddressBook)(e);return[...t,...n]},n.getTokens=void 0,n.getUnapprovedTxs=function(e){return e.metamask.unapprovedTxs},n.getWeb3ShimUsageAlertEnabledness=n.getUnconnectedAccountAlertShown=n.getUnconnectedAccountAlertEnabledness=void 0,n.isAddressLedger=function(e,t){const n=I(e,t);return(null==n?void 0:n.type)===m.KEYRING_TYPES.LEDGER},n.isEIP1559Network=function(e){var t;return!0===(null===(t=e.metamask.networkDetails)||void 0===t?void 0:t.EIPS[1559])},n.isNotEIP1559Network=function(e){var t;return!1===(null===(t=e.metamask.networkDetails)||void 0===t?void 0:t.EIPS[1559])},n.updateGasFees=function({gasPrice:e,gasLimit:t,maxPriorityFeePerGas:n,maxFeePerGas:r,transaction:a,expectHexWei:o=!1}){return async i=>{const c=S(S({},a.txParams),{},{gas:t});e?(i((0,E.setCustomGasPrice)(A(c.gasPrice,o))),c.gasPrice=A(e,o)):r&&n&&(c.maxFeePerGas=A(r,o),c.maxPriorityFeePerGas=(0,s.addHexPrefix)((0,T.decGWEIToHexWEI)(n)));const u=S(S({},a),{},{txParams:c}),l=(0,s.isHexString)((0,s.addHexPrefix)(t))?(0,s.addHexPrefix)(t):(0,s.addHexPrefix)(t.toString(16));i((0,E.setCustomGasLimit)(l)),await i((0,d.updateTransactionGasFees)(u.id,u))}};var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("ethereumjs-util"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("../../store/actionConstants")),i=e("../../../shared/constants/alerts"),c=e("../../../shared/constants/gas"),u=e("../../../shared/constants/network"),l=e("../../selectors"),d=e("../../store/actions"),E=e("../gas/gas.duck"),T=e("../../helpers/utils/conversions.util"),m=e("../../../shared/constants/hardware-wallets"),f=e("../../../shared/modules/string-utils");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const A=(e,t)=>(0,s.addHexPrefix)(t?e:(0,T.decGWEIToHexWEI)(e));n.getCurrentLocale=e=>e.metamask.currentLocale;const g=e=>e.metamask.alertEnabledness;n.getAlertEnabledness=g;n.getUnconnectedAccountAlertEnabledness=e=>g(e)[i.ALERT_TYPES.unconnectedAccount];n.getWeb3ShimUsageAlertEnabledness=e=>g(e)[i.ALERT_TYPES.web3ShimUsage];n.getUnconnectedAccountAlertShown=e=>e.metamask.unconnectedAccountAlertShownOrigins;n.getPendingTokens=e=>e.metamask.pendingTokens;n.getTokens=e=>e.metamask.tokens;n.getCollectibles=e=>{var t,n;const{metamask:{allCollectibles:r,provider:{chainId:a},selectedAddress:s}}=e;return null!==(t=null==r||null===(n=r[s])||void 0===n?void 0:n[a])&&void 0!==t?t:[]};function O(e){return e.metamask.gasEstimateType}function N(e){return e.metamask.gasFeeEstimates}function I(e,t){return e.metamask.keyrings.find((e=>e.accounts.some((e=>(0,f.isEqualCaseInsensitive)(e,(0,s.addHexPrefix)(t))||(0,f.isEqualCaseInsensitive)(e,(0,s.stripHexPrefix)(t))))))}n.getCollectibleContracts=e=>{var t,n;const{metamask:{allCollectibleContracts:r,provider:{chainId:a},selectedAddress:s}}=e;return null!==(t=null==r||null===(n=r[s])||void 0===n?void 0:n[a])&&void 0!==t?t:[]}}}},{package:"$root$"}],[6625,{"./send":6626},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./send");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}))}}},{package:"$root$"}],[6626,{"../../../shared/constants/gas":6106,"../../../shared/constants/network":6110,"../../../shared/constants/transaction":6114,"../../../shared/modules/contract-utils":6116,"../../../shared/modules/conversion.utils":6117,"../../../shared/modules/hexstring-utils":6120,"../../../shared/modules/string-utils":6124,"../../helpers/constants/common":6629,"../../helpers/constants/error-keys":6632,"../../helpers/utils/confirm-tx.util":6650,"../../helpers/utils/optimism/fetchEstimatedL1Fee":6661,"../../helpers/utils/token-util":6666,"../../helpers/utils/transactions.util":6667,"../../helpers/utils/util":6669,"../../pages/send/send.constants":6905,"../../pages/send/send.utils":6907,"../../selectors":7030,"../../store/actionConstants":7035,"../../store/actions":7036,"../ens":6618,"../gas/gas.duck":6620,"../metamask/metamask":6624,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,"@babel/runtime/helpers/objectWithoutProperties":208,"@reduxjs/toolkit":1386,_process:5342,"bignumber.js":1875,"ethereumjs-util":2437,"human-standard-token-abi":4300,lodash:5091},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.computeEstimatedGasLimit=n.addHistoryEntry=n.SEND_STATUSES=n.SEND_STAGES=n.RECIPIENT_SEARCH_MODES=n.GAS_INPUT_MODES=n.AMOUNT_MODES=void 0,n.editTransaction=function(e,t,n,r){return async(a,s)=>{const o=s();await a(ne(`sendFlow - user clicked edit on transaction with id ${t}`));const i=(0,O.getUnapprovedTxs)(o)[t],{txParams:c}=i;if(e===C.ASSET_TYPES.NATIVE){var l,E;const{data:e,from:n,gas:r,gasPrice:s,to:i,value:u}=c,d=null!==(l=null===(E=(0,f.getAddressBookEntry)(o,i))||void 0===E?void 0:E.name)&&void 0!==l?l:"";await a(q.editTransaction({data:e,id:t,gasLimit:r,gasPrice:s,from:n,amount:u,address:i,nickname:d}))}else{if(!n||!r)throw new Error("send/editTransaction dispatched with assetType 'TOKEN' but missing assetData or assetDetails parameter");if(e===C.ASSET_TYPES.TOKEN){var T,m;const{data:e,from:s,to:i,gas:l,gasPrice:E}=c,p=(0,A.getTokenValueParam)(n),_=(0,A.getTokenAddressParam)(n),S=null!==(T=null===(m=(0,f.getAddressBookEntry)(o,_))||void 0===m?void 0:m.name)&&void 0!==T?T:"",g=(0,u.addHexPrefix)((0,d.conversionUtil)(p,{fromNumericBase:"dec",toNumericBase:"hex"}));await a(re({type:C.ASSET_TYPES.TOKEN,details:L(L({},r),{},{address:i})})),await a(q.editTransaction({data:e,id:t,gasLimit:l,gasPrice:E,from:s,amount:g,address:_,nickname:S}))}else if(e===C.ASSET_TYPES.COLLECTIBLE){var p,_;const{data:e,from:s,to:i,gas:u,gasPrice:l}=c,d=(0,A.getTokenAddressParam)(n),E=null!==(p=null===(_=(0,f.getAddressBookEntry)(o,d))||void 0===_?void 0:_.name)&&void 0!==p?p:"";await a(re({type:C.ASSET_TYPES.COLLECTIBLE,details:L(L({},r),{},{address:i})})),await a(q.editTransaction({data:e,id:t,gasLimit:u,gasPrice:l,from:s,amount:"0x1",address:d,nickname:E}))}}}},n.gasFeeIsInError=function(e){return Boolean(e.send.gas.error)},n.getAssetError=function(e){return e.send.asset.error},n.getDraftTransactionID=function(e){return e.send.draftTransaction.id},n.getERC20Balance=W,n.getGasInputMode=function(e){const n=(0,f.getIsMainnet)(e),r=(0,O.getGasEstimateType)(e),a=(0,f.getAdvancedInlineGasShown)(e);if(e.send.gas.isCustomGasSet)return F.CUSTOM;if(!n&&!t.env.IN_TEST||a)return F.INLINE;if((n||t.env.IN_TEST)&&r===E.GAS_ESTIMATE_TYPES.ETH_GASPRICE)return F.INLINE;return F.BASIC},n.getGasLimit=function(e){return e.send.gas.gasLimit},n.getGasPrice=function(e){return e.send.gas.gasPrice},n.getGasTotal=function(e){return e.send.gas.gasTotal},n.getIsAssetSendable=function(e){if(e.send.asset.type===C.ASSET_TYPES.NATIVE)return!0;return!1===e.send.asset.details.isERC721},n.getIsBalanceInsufficient=function(e){return e.send.gas.error===T.INSUFFICIENT_FUNDS_ERROR},n.getIsUsingMyAccountForRecipientSearch=function(e){return e.send.recipient.mode===H.MY_ACCOUNTS},n.getMinimumGasLimitForSend=function(e){return e.send.gas.minimumGasLimit},n.getRecipient=function(e){return e.send.recipient},n.getRecipientUserInput=function(e){return e.send.recipient.userInput},n.getSendAmount=function(e){return e.send.amount.value},n.getSendAsset=ie,n.getSendAssetAddress=function(e){var t,n;return null===(t=ie(e))||void 0===t||null===(n=t.details)||void 0===n?void 0:n.address},n.getSendErrors=function(e){return{gasFee:e.send.gas.error,amount:e.send.amount.error}},n.getSendHexData=function(e){return e.send.draftTransaction.userInputHexData},n.getSendMaxModeState=function(e){return e.send.amount.mode===x.MAX},n.getSendStage=function(e){return e.send.stage},n.getSendTo=function(e){return e.send.recipient.address},n.initializeSendState=n.initialState=void 0,n.isSendFormInvalid=function(e){return e.send.status===G.INVALID},n.isSendStateInitialized=function(e){return e.send.stage!==U.INACTIVE},n.resetRecipientInput=function(){return async e=>{await e(ne("sendFlow - user cleared recipient input")),await e(se("")),await e(oe({address:"",nickname:""})),await e((0,N.resetEnsResolution)()),await e(ee())}},n.resetSendState=function(){return async(e,t)=>{const n=t();e(q.resetSendState()),n.send.gas.gasEstimatePollToken&&(await(0,p.disconnectGasFeeEstimatePoller)(n.send.gas.gasEstimatePollToken),(0,p.removePollingTokenFromAppState)(n.send.gas.gasEstimatePollToken))}},n.sendAmountIsInError=function(e){return Boolean(e.send.amount.error)},n.signTransaction=function(){return async(e,t)=>{const n=t(),{asset:r,stage:a,draftTransaction:{id:s,txParams:o},eip1559support:i}=n.send;if(a===U.EDIT){const t=(0,O.getUnapprovedTxs)(n)[s],r={data:o.data,from:o.from,to:o.to,value:o.value,gas:t.userEditedGasLimit?t.txParams.gas:o.gas};t.originalGasEstimate=r.gas;const a=L(L({},t),{},{txParams:Object.assign(t.txParams,i?r:o)});await e(ne("sendFlow - user clicked next and transaction should be updated in controller")),await e((0,p.updateTransactionSendFlowHistory)(s,n.send.history)),e((0,p.updateEditableParams)(s,a.txParams)),e((0,p.updateTransactionGasFees)(s,a.txParams))}else{let t=C.TRANSACTION_TYPES.SIMPLE_SEND;r.type!==C.ASSET_TYPES.NATIVE&&(t=r.type===C.ASSET_TYPES.COLLECTIBLE?C.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM:C.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER),await e(ne("sendFlow - user clicked next and transaction should be added to controller")),e((0,p.addUnapprovedTransactionAndRouteToConfirmationPage)(o,t,n.send.history))}}},n.toggleSendMaxMode=function(){return async(e,t)=>{t().send.amount.mode===x.MAX?(await e(q.updateAmountMode(x.INPUT)),await e(q.updateSendAmount("0x0")),await e(ne("sendFlow - user toggled max mode off"))):(await e(q.updateAmountMode(x.MAX)),await e(q.updateAmountToMax()),await e(ne("sendFlow - user toggled max mode on"))),await e(j())}},n.updateGasLimit=void 0,n.updateGasPrice=function(e){return t=>{t(ne(`sendFlow - user set legacy gasPrice to ${e}`)),t(q.updateGasFees({gasPrice:e,transactionType:C.TRANSACTION_ENVELOPE_TYPES.LEGACY}))}},n.updateRecipient=oe,n.updateRecipientUserInput=se,n.updateSendAmount=function(e){return async(t,n)=>{const r=n(),{metamask:a}=r;let s=e;if(r.send.asset.type===C.ASSET_TYPES.TOKEN){var o,i,c;const t=Math.pow(10,Number((null===(o=r.send.asset.details)||void 0===o?void 0:o.decimals)||0)),n=(0,d.conversionUtil)((0,u.addHexPrefix)(e),{fromNumericBase:"hex",toNumericBase:"dec",toCurrency:null===(i=r.send.asset.details)||void 0===i?void 0:i.symbol,conversionRate:t,invertConversionRate:!0});s=`${Number(n)?n:""} ${null===(c=r.send.asset.details)||void 0===c?void 0:c.symbol}`}else{var l;s=`${(0,w.getValueFromWeiHex)({value:e,toCurrency:P.ETH,numberOfDecimals:8})} ${(null==a||null===(l=a.provider)||void 0===l?void 0:l.ticker)||P.ETH}`}await t(ne(`sendFlow - user set amount to ${s}`)),await t(q.updateSendAmount(e)),r.send.amount.mode===x.MAX&&await t(q.updateAmountMode(x.INPUT)),await t(j())}},n.updateSendAsset=re,n.updateSendHexData=function(e){return async(t,n)=>{await t(ne(`sendFlow - user added custom hexData ${e}`)),await t(q.updateUserInputHexData(e));n().send.asset.type===C.ASSET_TYPES.NATIVE&&await t(j())}},n.useContactListForRecipientSearch=function(){return e=>{e(ne("sendFlow - user selected back to all on recipient screen")),e(te(H.CONTACT_LIST))}},n.useDefaultGas=n.useCustomGas=void 0,n.useMyAccountsForRecipientSearch=function(){return e=>{e(ne("sendFlow - user selected transfer to my accounts on recipient screen")),e(te(H.MY_ACCOUNTS))}};var a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("@babel/runtime/helpers/objectWithoutProperties")),o=e("@reduxjs/toolkit"),i=r(e("human-standard-token-abi")),c=r(e("bignumber.js")),u=e("ethereumjs-util"),l=e("lodash"),d=e("../../../shared/modules/conversion.utils"),E=e("../../../shared/constants/gas"),T=e("../../pages/send/send.constants"),m=e("../../pages/send/send.utils"),f=e("../../selectors"),p=e("../../store/actions"),_=e("../gas/gas.duck"),S=e("../../store/actionConstants"),A=e("../../helpers/utils/token-util"),g=e("../../helpers/utils/util"),O=e("../metamask/metamask"),N=e("../ens"),I=e("../../../shared/modules/hexstring-utils"),R=e("../../helpers/utils/transactions.util"),y=r(e("../../helpers/utils/optimism/fetchEstimatedL1Fee")),h=e("../../../shared/constants/network"),P=e("../../helpers/constants/common"),C=e("../../../shared/constants/transaction"),v=e("../../../shared/modules/contract-utils"),b=(e("../../helpers/constants/error-keys"),e("../../../shared/modules/string-utils")),w=e("../../helpers/utils/confirm-tx.util");const D=["selectedAddress","value","gasPrice","sendToken","to","data","isNonStandardEthChain","chainId","gasLimit"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const M="send",U={INACTIVE:"INACTIVE",ADD_RECIPIENT:"ADD_RECIPIENT",DRAFT:"DRAFT",EDIT:"EDIT"};n.SEND_STAGES=U;const G={VALID:"VALID",INVALID:"INVALID"};n.SEND_STATUSES=G;const F={BASIC:"BASIC",INLINE:"INLINE",CUSTOM:"CUSTOM"};n.GAS_INPUT_MODES=F;const x={INPUT:"INPUT",MAX:"MAX"};n.AMOUNT_MODES=x;const H={MY_ACCOUNTS:"MY_ACCOUNTS",CONTACT_LIST:"CONTACT_LIST"};async function B(e){let{selectedAddress:t,value:n,gasPrice:r,sendToken:a,to:o,data:i,isNonStandardEthChain:c,chainId:l,gasLimit:f}=e,_=(0,s.default)(e,D),S=!1,A=T.MIN_GAS_LIMIT_HEX;_.blockGasLimit?A=_.blockGasLimit:a&&(A=E.GAS_LIMITS.BASE_TOKEN_ESTIMATE);const g={from:t,value:n,gasPrice:r};if(a){if(!o)return E.GAS_LIMITS.BASE_TOKEN_ESTIMATE;g.value="0x0",g.data=(0,m.getAssetTransferData)({sendToken:a,fromAddress:t,toAddress:o,amount:n}),g.to=a.address}else{if(!i){const{isContractAddress:e}=o?await(0,v.readAddressAsContract)(global.eth,o):{};if(!e&&!c)return E.GAS_LIMITS.SIMPLE;!e&&c&&(S=!0)}g.data=i,o&&(g.to=o),n&&"0"!==n||(g.value="0xff")}S||(g.gas=(0,u.addHexPrefix)((0,d.multiplyCurrencies)(A,.95,{multiplicandBase:16,multiplierBase:10,roundDown:"0",toNumericBase:"hex"})));let O=1.5;S?O=1:h.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[l]&&(O=h.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[l]);try{const e=await(0,p.estimateGas)(g),t=(0,m.addGasBuffer)(e,A,O);return(0,u.addHexPrefix)(t)}catch(e){if(e.message.includes("Transaction execution error.")||e.message.includes("gas required exceeds allowance or always failing transaction")||h.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[l]&&e.message.includes("gas required exceeds allowance")){var N;const e=(0,m.addGasBuffer)(null!==(N=null==g?void 0:g.gas)&&void 0!==N?N:f,A,O);return(0,u.addHexPrefix)(e)}throw e}}async function W(e,t){var n;const r=global.eth.contract(i.default).at(e.address),a=null!==(n=await r.balanceOf(t))&&void 0!==n?n:null;if(!a)return"0x0";const s=(0,A.calcTokenAmount)(a.balance.toString(),e.decimals).toString(16);return(0,u.addHexPrefix)(s)}n.RECIPIENT_SEARCH_MODES=H;const j=(0,o.createAsyncThunk)("send/computeEstimatedGasLimit",(async(e,t)=>{var n;const r=t.getState(),{send:a,metamask:s}=r,o=(0,O.getUnapprovedTxs)(r),i=(0,f.getIsMultiLayerFeeNetwork)(r),c=o[a.draftTransaction.id],u=(0,f.getIsNonStandardEthChain)(r),l=(0,f.getCurrentChainId)(r);let d;var E;i&&(d=await(0,y.default)(global.eth,{txParams:{gasPrice:a.gas.gasPrice,gas:a.gas.gasLimit,to:null===(E=a.recipient.address)||void 0===E?void 0:E.toLowerCase(),value:"MAX"===a.amount.mode?a.account.balance:a.amount.value,from:a.account.address,data:a.draftTransaction.userInputHexData,type:"0x0"}}));if(a.stage!==U.EDIT||null===(n=c.dappSuggestedGasFees)||void 0===n||!n.gas||!c.userEditedGasLimit){var T;const e=await B({gasPrice:a.gas.gasPrice,blockGasLimit:s.currentBlockGasLimit,selectedAddress:s.selectedAddress,sendToken:a.asset.details,to:null===(T=a.recipient.address)||void 0===T?void 0:T.toLowerCase(),value:a.amount.value,data:a.draftTransaction.userInputHexData,isNonStandardEthChain:u,chainId:l,gasLimit:a.gas.gasLimit});return await t.dispatch((0,_.setCustomGasLimit)(e)),{gasLimit:e,layer1GasTotal:d}}return null}));function Y(e){const t=(0,d.conversionUtil)(e,{numberOfDecimals:9,toDenomination:P.GWEI,fromNumericBase:"dec",toNumericBase:"dec",fromCurrency:P.ETH,fromDenomination:P.GWEI}),n=Number(t);return(0,f.getGasPriceInHexWei)(n)}n.computeEstimatedGasLimit=j;const K=(0,o.createAsyncThunk)("send/initializeSendState",(async(e,t)=>{const n=t.getState(),r=(0,f.getIsNonStandardEthChain)(n),a=(0,f.getCurrentChainId)(n),s=(0,f.checkNetworkAndAccountSupports1559)(n),{send:{asset:o,stage:i,recipient:c,amount:l,draftTransaction:d},metamask:T}=n,S=i===U.EDIT?d.txParams.from:T.selectedAddress,A=(0,f.getTargetAccount)(n,S);let g="0x1",N=null;N=await(0,p.getGasFeeEstimatesAndStartPolling)(),(0,p.addPollingTokenToAppState)(N);const{metamask:{gasFeeEstimates:I,gasEstimateType:R}}=t.getState();g=R===E.GAS_ESTIMATE_TYPES.LEGACY?(0,f.getGasPriceInHexWei)(I.medium):R===E.GAS_ESTIMATE_TYPES.ETH_GASPRICE?Y(I.gasPrice):R===E.GAS_ESTIMATE_TYPES.FEE_MARKET?(0,f.getGasPriceInHexWei)(I.medium.suggestedMaxFeePerGas):I.gasPrice?Y(I.gasPrice):"0x0";let y=o.type===C.ASSET_TYPES.TOKEN||o.type===C.ASSET_TYPES.COLLECTIBLE?E.GAS_LIMITS.BASE_TOKEN_ESTIMATE:E.GAS_LIMITS.SIMPLE;if(R!==E.GAS_ESTIMATE_TYPES.NONE&&i!==U.EDIT&&c.address){y=await B({gasPrice:g,blockGasLimit:T.currentBlockGasLimit,selectedAddress:S,sendToken:o.details,to:c.address.toLowerCase(),value:l.value,data:d.userInputHexData,isNonStandardEthChain:r,chainId:a})||y}await t.dispatch((0,_.setCustomGasLimit)(y));let{balance:h}=A;if(o.type===C.ASSET_TYPES.TOKEN){if(null===o.details)throw new Error("Send slice initialized as token send without token details");h=await W(o.details,S)}if(o.type===C.ASSET_TYPES.COLLECTIBLE){if(null===o.details)throw new Error("Send slice initialized as collectibles send without token details");h="0x1"}return{address:S,nativeBalance:A.balance,assetBalance:h,chainId:(0,f.getCurrentChainId)(n),tokens:(0,O.getTokens)(n),gasFeeEstimates:I,gasEstimateType:R,gasLimit:y,gasTotal:(0,u.addHexPrefix)((0,m.calcGasTotal)(y,g)),gasEstimatePollToken:N,eip1559support:s,useTokenDetection:(0,f.getUseTokenDetection)(n),tokenAddressList:Object.keys((0,f.getTokenList)(n))}}));n.initializeSendState=K;const V={stage:U.INACTIVE,status:G.VALID,transactionType:C.TRANSACTION_ENVELOPE_TYPES.LEGACY,eip1559support:!1,account:{address:null,balance:"0x0"},gas:{isGasEstimateLoading:!0,gasEstimatePollToken:null,isCustomGasSet:!1,gasLimit:"0x0",gasPrice:"0x0",maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",gasPriceEstimate:"0x0",gasTotal:"0x0",minimumGasLimit:E.GAS_LIMITS.SIMPLE,error:null},amount:{mode:x.INPUT,value:"0x0",error:null},asset:{type:C.ASSET_TYPES.NATIVE,balance:"0x0",details:null,error:null},draftTransaction:{id:null,userInputHexData:null,txParams:{to:"",from:"",data:undefined,value:"0x0",gas:"0x0",gasPrice:"0x0",type:C.TRANSACTION_ENVELOPE_TYPES.LEGACY}},recipient:{mode:H.CONTACT_LIST,userInput:"",address:"",nickname:"",error:null,warning:null},multiLayerFees:{layer1GasTotal:"0x0"},history:[]};n.initialState=V;const $=(0,o.createSlice)({name:M,initialState:V,reducers:{addHistoryEntry:(e,t)=>{e.history.push({entry:t.payload,timestamp:Date.now()})},updateSendAmount:(e,t)=>{e.amount.value=(0,u.addHexPrefix)(t.payload),$.caseReducers.validateAmountField(e),e.asset.type===C.ASSET_TYPES.NATIVE&&$.caseReducers.validateGasField(e),$.caseReducers.validateSendState(e)},updateAmountToMax:e=>{let t="0x0";if(e.asset.type===C.ASSET_TYPES.TOKEN){var n,r;const a=null!==(n=null===(r=e.asset.details)||void 0===r?void 0:r.decimals)&&void 0!==n?n:0,s=Math.pow(10,Number(a));t=(0,d.multiplyCurrencies)(e.asset.balance,s,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10})}else{var a;const n=(0,R.sumHexes)(e.gas.gasTotal||"0x0",(null===(a=e.multiLayerFees)||void 0===a?void 0:a.layer1GasTotal)||"0x0");t=(0,d.subtractCurrencies)((0,u.addHexPrefix)(e.asset.balance),(0,u.addHexPrefix)(n),{toNumericBase:"hex",aBase:16,bBase:16})}$.caseReducers.updateSendAmount(e,{payload:t})},updateUserInputHexData:(e,t)=>{e.draftTransaction.userInputHexData=t.payload,e.asset.type===C.ASSET_TYPES.NATIVE&&$.caseReducers.updateDraftTransaction(e)},editTransaction:(e,t)=>{e.stage=U.EDIT,e.gas.gasLimit=t.payload.gasLimit,e.gas.gasPrice=t.payload.gasPrice,e.amount.value=t.payload.amount,e.gas.error=null,e.amount.error=null,e.asset.error=null,e.recipient.address=t.payload.address,e.recipient.nickname=t.payload.nickname,e.draftTransaction.id=t.payload.id,e.draftTransaction.txParams.from=t.payload.from,e.draftTransaction.userInputHexData=t.payload.data,$.caseReducers.updateDraftTransaction(e)},calculateGasTotal:e=>{e.transactionType===C.TRANSACTION_ENVELOPE_TYPES.FEE_MARKET?e.gas.gasTotal=(0,u.addHexPrefix)((0,m.calcGasTotal)(e.gas.gasLimit,e.gas.maxFeePerGas)):e.gas.gasTotal=(0,u.addHexPrefix)((0,m.calcGasTotal)(e.gas.gasLimit,e.gas.gasPrice)),e.amount.mode===x.MAX&&e.asset.type===C.ASSET_TYPES.NATIVE&&$.caseReducers.updateAmountToMax(e),$.caseReducers.validateAmountField(e),$.caseReducers.validateGasField(e),$.caseReducers.validateSendState(e)},updateGasLimit:(e,t)=>{e.gas.gasLimit=(0,u.addHexPrefix)(t.payload),$.caseReducers.calculateGasTotal(e)},updateGasFees:(e,t)=>{t.payload.transactionType===C.TRANSACTION_ENVELOPE_TYPES.FEE_MARKET?(e.gas.maxFeePerGas=(0,u.addHexPrefix)(t.payload.maxFeePerGas),e.gas.maxPriorityFeePerGas=(0,u.addHexPrefix)(t.payload.maxPriorityFeePerGas),e.transactionType=C.TRANSACTION_ENVELOPE_TYPES.FEE_MARKET):(!0===t.payload.isAutomaticUpdate&&"0x0"!==e.gas.gasPriceEstimate&&e.gas.gasPrice!==e.gas.gasPriceEstimate||(e.gas.gasPrice=(0,u.addHexPrefix)(t.payload.gasPrice)),e.transactionType=C.TRANSACTION_ENVELOPE_TYPES.LEGACY),$.caseReducers.calculateGasTotal(e)},updateGasFeeEstimates:(e,t)=>{const{gasFeeEstimates:n,gasEstimateType:r}=t.payload;let a="0x0";switch(r){case E.GAS_ESTIMATE_TYPES.FEE_MARKET:$.caseReducers.updateGasFees(e,{payload:{transactionType:C.TRANSACTION_ENVELOPE_TYPES.FEE_MARKET,maxFeePerGas:(0,f.getGasPriceInHexWei)(n.medium.suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,f.getGasPriceInHexWei)(n.medium.suggestedMaxPriorityFeePerGas)}});break;case E.GAS_ESTIMATE_TYPES.LEGACY:a=Y(n.medium),$.caseReducers.updateGasFees(e,{payload:{gasPrice:a,type:C.TRANSACTION_ENVELOPE_TYPES.LEGACY,isAutomaticUpdate:!0}});break;case E.GAS_ESTIMATE_TYPES.ETH_GASPRICE:a=Y(n.gasPrice),$.caseReducers.updateGasFees(e,{payload:{gasPrice:Y(n.gasPrice),type:C.TRANSACTION_ENVELOPE_TYPES.LEGACY,isAutomaticUpdate:!0}});case E.GAS_ESTIMATE_TYPES.NONE:}e.gas.gasPriceEstimate=(0,u.addHexPrefix)(a)},updateLayer1Fees:(e,t)=>{e.multiLayerFees.layer1GasTotal=t.payload,e.amount.mode===x.MAX&&e.asset.type===C.ASSET_TYPES.NATIVE&&$.caseReducers.updateAmountToMax(e)},updateAmountMode:(e,t)=>{Object.values(x).includes(t.payload)&&(e.amount.mode=t.payload)},updateAsset:(e,t)=>{e.asset.type=t.payload.type,e.asset.balance=t.payload.balance,e.asset.error=t.payload.error,e.asset.type===C.ASSET_TYPES.TOKEN||e.asset.type===C.ASSET_TYPES.COLLECTIBLE?e.asset.details=t.payload.details:(e.asset.details=null,e.recipient.error===T.CONTRACT_ADDRESS_ERROR&&(e.recipient.error=null),e.recipient.warning===T.KNOWN_RECIPIENT_ADDRESS_WARNING&&(e.recipient.warning=null)),e.amount.mode===x.MAX?$.caseReducers.updateAmountToMax(e):$.caseReducers.updateSendAmount(e,{payload:"0x0"}),$.caseReducers.validateSendState(e)},updateRecipient:(e,t)=>{var n,r;e.recipient.error=null,e.recipient.userInput="",e.recipient.address=null!==(n=t.payload.address)&&void 0!==n?n:"",e.recipient.nickname=null!==(r=t.payload.nickname)&&void 0!==r?r:"",""===e.recipient.address?e.stage=U.ADD_RECIPIENT:(e.stage=null===e.draftTransaction.id?U.DRAFT:U.EDIT,e.recipient.mode=H.CONTACT_LIST),$.caseReducers.validateSendState(e)},updateDraftTransaction:e=>{var t;if(e.status===G.VALID){switch(e.stage!==U.EDIT&&(e.draftTransaction.txParams.from=e.account.address),e.draftTransaction.txParams.gas=e.gas.gasLimit,e.asset.type){case C.ASSET_TYPES.TOKEN:e.draftTransaction.txParams.to=e.asset.details.address,e.draftTransaction.txParams.value="0x0",e.draftTransaction.txParams.data=(0,m.generateERC20TransferData)({toAddress:e.recipient.address,amount:e.amount.value,sendToken:e.asset.details});break;case C.ASSET_TYPES.COLLECTIBLE:e.draftTransaction.txParams.to=e.asset.details.address,e.draftTransaction.txParams.value="0x0",e.draftTransaction.txParams.data=(0,m.generateERC721TransferData)({toAddress:e.recipient.address,fromAddress:e.account.address,tokenId:e.asset.details.tokenId});break;case C.ASSET_TYPES.NATIVE:default:e.draftTransaction.txParams.to=e.recipient.address,e.draftTransaction.txParams.value=e.amount.value,e.draftTransaction.txParams.data=null!==(t=e.draftTransaction.userInputHexData)&&void 0!==t?t:undefined}e.eip1559support?(e.draftTransaction.txParams.type=C.TRANSACTION_ENVELOPE_TYPES.FEE_MARKET,e.draftTransaction.txParams.maxFeePerGas=e.gas.maxFeePerGas,e.draftTransaction.txParams.maxPriorityFeePerGas=e.gas.maxPriorityFeePerGas,e.draftTransaction.txParams.maxFeePerGas&&"0x0"!==e.draftTransaction.txParams.maxFeePerGas||(e.draftTransaction.txParams.maxFeePerGas=e.gas.gasPrice),e.draftTransaction.txParams.maxPriorityFeePerGas&&"0x0"!==e.draftTransaction.txParams.maxPriorityFeePerGas||(e.draftTransaction.txParams.maxPriorityFeePerGas=e.draftTransaction.txParams.maxFeePerGas),delete e.draftTransaction.txParams.gasPrice):(delete e.draftTransaction.txParams.maxFeePerGas,delete e.draftTransaction.txParams.maxPriorityFeePerGas,e.draftTransaction.txParams.gasPrice=e.gas.gasPrice,e.draftTransaction.txParams.type=C.TRANSACTION_ENVELOPE_TYPES.LEGACY)}},useDefaultGas:e=>{e.gas.isCustomGasSet=!1},useCustomGas:e=>{e.gas.isCustomGasSet=!0},updateRecipientUserInput:(e,t)=>{e.recipient.userInput=t.payload},validateRecipientUserInput:(e,t)=>{const{asset:n,recipient:r}=e;if(r.mode===H.MY_ACCOUNTS||""===r.userInput||null===r.userInput)r.error=null,r.warning=null;else{const e=n.type===C.ASSET_TYPES.TOKEN||n.type===C.ASSET_TYPES.COLLECTIBLE,{chainId:a,tokens:s,tokenAddressList:o}=t.payload;(0,I.isBurnAddress)(r.userInput)||!(0,I.isValidHexAddress)(r.userInput,{mixedCaseUseChecksum:!0})&&!(0,g.isValidDomainName)(r.userInput)?r.error=(0,g.isDefaultMetaMaskChain)(a)?T.INVALID_RECIPIENT_ADDRESS_ERROR:T.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR:e&&(0,g.isOriginContractAddress)(r.userInput,n.details.address)?r.error=T.CONTRACT_ADDRESS_ERROR:r.error=null,e&&(0,I.isValidHexAddress)(r.userInput)&&(o.find((e=>(0,b.isEqualCaseInsensitive)(e,r.userInput)))||(0,g.checkExistingAddresses)(r.userInput,s))?r.warning=T.KNOWN_RECIPIENT_ADDRESS_WARNING:r.warning=null}},updateRecipientSearchMode:(e,t)=>{e.recipient.userInput="",e.recipient.mode=t.payload},resetSendState:()=>V,validateAmountField:e=>{var t,n;switch(!0){case e.asset.type===C.ASSET_TYPES.NATIVE&&!(0,m.isBalanceSufficient)({amount:e.amount.value,balance:e.asset.balance,gasTotal:null!==(t=e.gas.gasTotal)&&void 0!==t?t:"0x0"}):e.amount.error=T.INSUFFICIENT_FUNDS_ERROR;break;case e.asset.type===C.ASSET_TYPES.TOKEN&&!(0,m.isTokenBalanceSufficient)({tokenBalance:null!==(n=e.asset.balance)&&void 0!==n?n:"0x0",amount:e.amount.value,decimals:e.asset.details.decimals}):e.amount.error=T.INSUFFICIENT_TOKENS_ERROR;break;case(0,d.conversionGreaterThan)({value:0,fromNumericBase:"dec"},{value:e.amount.value,fromNumericBase:"hex"}):e.amount.error=T.NEGATIVE_ETH_ERROR;break;default:e.amount.error=null}},validateGasField:e=>{var t;const n=!(0,m.isBalanceSufficient)({amount:e.asset.type===C.ASSET_TYPES.NATIVE?e.amount.value:"0x0",balance:e.account.balance,gasTotal:null!==(t=e.gas.gasTotal)&&void 0!==t?t:"0x0"});e.gas.error=n?T.INSUFFICIENT_FUNDS_ERROR:null},validateSendState:e=>{switch(!0){case Boolean(e.amount.error):case Boolean(e.gas.error):case Boolean(e.asset.error):case e.asset.type===C.ASSET_TYPES.TOKEN&&null===e.asset.details:case e.stage===U.ADD_RECIPIENT:case e.stage===U.INACTIVE:case e.gas.isGasEstimateLoading:case new c.default(e.gas.gasLimit,16).lessThan(new c.default(e.gas.minimumGasLimit)):e.status=G.INVALID;break;default:e.status=G.VALID,$.caseReducers.updateDraftTransaction(e)}}},extraReducers:e=>{e.addCase(S.QR_CODE_DETECTED,((e,t)=>{const n=t.value;if(n&&"address"===n.type){const t=n.values.address.toLowerCase();(0,I.isValidHexAddress)(t,{allowNonPrefixed:!1})?e.recipient.address!==t&&$.caseReducers.updateRecipient(e,{payload:{address:t}}):e.recipient.error=T.INVALID_RECIPIENT_ADDRESS_ERROR}})).addCase(S.SELECTED_ACCOUNT_CHANGED,((e,t)=>{e.stage!==U.EDIT&&(e.account.balance=t.payload.account.balance,e.account.address=t.payload.account.address,e.asset.type===C.ASSET_TYPES.NATIVE&&(e.asset.balance=t.payload.account.balance),$.caseReducers.validateAmountField(e),$.caseReducers.validateGasField(e),$.caseReducers.validateSendState(e))})).addCase(S.ACCOUNT_CHANGED,((e,t)=>{e.stage===U.EDIT&&t.payload.account.address===e.account.address&&(e.account.balance=t.payload.account.balance,e.asset.type===C.ASSET_TYPES.NATIVE&&(e.asset.balance=t.payload.account.balance),$.caseReducers.validateAmountField(e),$.caseReducers.validateGasField(e),$.caseReducers.validateSendState(e))})).addCase(S.ADDRESS_BOOK_UPDATED,((e,t)=>{var n;const{addressBook:r}=t.payload;null!==(n=r[e.recipient.address])&&void 0!==n&&n.name&&(e.recipient.nickname=r[e.recipient.address].name)})).addCase(K.pending,(e=>{e.gas.isGasEstimateLoading=!0})).addCase(K.fulfilled,((e,t)=>{e.eip1559support=t.payload.eip1559support,e.account.address=t.payload.address,e.account.balance=t.payload.nativeBalance,e.asset.balance=t.payload.assetBalance,e.gas.gasLimit=t.payload.gasLimit,$.caseReducers.updateGasFeeEstimates(e,{payload:{gasFeeEstimates:t.payload.gasFeeEstimates,gasEstimateType:t.payload.gasEstimateType}}),e.gas.gasTotal=t.payload.gasTotal,e.gas.gasEstimatePollToken=t.payload.gasEstimatePollToken,t.payload.gasEstimatePollToken&&(e.gas.isGasEstimateLoading=!1),e.stage!==U.INACTIVE&&$.caseReducers.validateRecipientUserInput(e,{payload:{chainId:t.payload.chainId,tokens:t.payload.tokens,useTokenDetection:t.payload.useTokenDetection,tokenAddressList:t.payload.tokenAddressList}}),e.stage=e.stage===U.INACTIVE?U.ADD_RECIPIENT:e.stage,$.caseReducers.validateAmountField(e),$.caseReducers.validateGasField(e),$.caseReducers.validateSendState(e)})).addCase(j.pending,(e=>{e.gas.isGasEstimateLoading=!0})).addCase(j.fulfilled,((e,t)=>{var n,r;e.gas.isGasEstimateLoading=!1,null!==(n=t.payload)&&void 0!==n&&n.gasLimit&&$.caseReducers.updateGasLimit(e,{payload:t.payload.gasLimit}),null!==(r=t.payload)&&void 0!==r&&r.layer1GasTotal&&$.caseReducers.updateLayer1Fees(e,{payload:t.payload.layer1GasTotal})})).addCase(j.rejected,(e=>{e.gas.isGasEstimateLoading=!1})).addCase(S.GAS_FEE_ESTIMATES_UPDATED,((e,t)=>{$.caseReducers.updateGasFeeEstimates(e,{payload:t.payload})}))}}),{actions:q,reducer:X}=$;var z=X;n.default=z;const{useDefaultGas:Q,useCustomGas:Z,updateGasLimit:J,validateRecipientUserInput:ee,updateRecipientSearchMode:te,addHistoryEntry:ne}=q;function re({type:e,details:t}){return async(n,r)=>{var a,s,o;n(ne(`sendFlow - user set asset type to ${e}`)),n(ne(`sendFlow - user set asset symbol to ${null!==(a=null==t?void 0:t.symbol)&&void 0!==a?a:"undefined"}`)),n(ne(`sendFlow - user set asset address to ${null!==(s=null==t?void 0:t.address)&&void 0!==s?s:"undefined"}`));const i=r();let{balance:c,error:u}=i.send.asset;const l=null!==(o=i.send.account.address)&&void 0!==o?o:(0,f.getSelectedAddress)(i);if(e===C.ASSET_TYPES.TOKEN){if(t){if(t.standard===undefined){await n((0,p.showLoadingIndication)());const{standard:e}=await(0,p.getTokenStandardAndDetails)(t.address,l);0,t.standard=e}t.standard===P.ERC20&&(u=null,c=await W(t,l)),await n((0,p.hideLoadingIndication)())}}else if(e===C.ASSET_TYPES.COLLECTIBLE){let e=!0;try{e=await(0,p.isCollectibleOwner)((0,f.getSelectedAddress)(i),t.address,t.tokenId)}catch(e){e.message.includes("Unable to verify ownership.")||n((0,p.displayWarning)(e.message))}if(t.standard===undefined){const{standard:e}=await(0,p.getTokenStandardAndDetails)(t.address,l);t.standard=e}if(t.standard===P.ERC1155)throw new Error("Sends of ERC1155 tokens are not currently supported");if(!e)throw new Error("Send slice initialized as collectible send with a collectible not currently owned by the select account");u=null,c="0x1"}else u=null,c=i.send.account.balance;await n(q.updateAsset({type:e,details:t,balance:c,error:u})),await n(j())}}n.addHistoryEntry=ne,n.updateGasLimit=J,n.useCustomGas=Z,n.useDefaultGas=Q;const ae=(0,l.debounce)(((e,t)=>{e(ne(`sendFlow - user typed ${t.userInput} into recipient input field`)),e(ee(t))}),300);function se(e){return async(t,n)=>{await t(q.updateRecipientUserInput(e));const r=n(),a=(0,f.getCurrentChainId)(r),s=(0,O.getTokens)(r),o=(0,f.getUseTokenDetection)(r),i=Object.keys((0,f.getTokenList)(r));ae(t,{userInput:e,chainId:a,tokens:s,useTokenDetection:o,tokenAddressList:i})}}function oe({address:e,nickname:t}){return async(n,r)=>{var a;const s=r(),o=null!==(a=(0,f.getAddressBookEntryOrAccountName)(s,e))&&void 0!==a?a:"";await n(q.updateRecipient({address:e,nickname:t||o})),await n(j())}}function ie(e){return e.send.asset}}).call(this)}).call(this,e("_process"))}}},{package:"$root$"}],[6629,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WEI=n.TOKEN_STANDARDS=n.SUPPORT_REQUEST_LINK=n.SUPPORT_LINK=n.SECONDARY=n.PRIMARY=n.GWEI=n.GAS_ESTIMATE_TYPES=n.ETH=n.ERC721=n.ERC20=n.ERC1155=void 0;n.ETH="ETH";n.GWEI="GWEI";n.WEI="WEI";n.PRIMARY="PRIMARY";n.SECONDARY="SECONDARY";const r="ERC20";n.ERC20=r;const a="ERC721";n.ERC721=a;const s="ERC1155";n.ERC1155=s;const o={ERC20:r,ERC721:a,ERC1155:s,NONE:"NONE"};n.TOKEN_STANDARDS=o;n.GAS_ESTIMATE_TYPES={SLOW:"SLOW",AVERAGE:"AVERAGE",FAST:"FAST",FASTEST:"FASTEST"};n.SUPPORT_LINK="https://support.metamask.io";n.SUPPORT_REQUEST_LINK="https://metamask.zendesk.com/hc/en-us/requests/new"}}},{package:"$root$"}],[6631,{"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.TYPOGRAPHY=n.TEXT_ALIGN=n.SIZES=n.SEVERITIES=n.RESIZE=n.OVERFLOW_WRAP=n.JUSTIFY_CONTENT=n.FRACTIONS=n.FONT_WEIGHT=n.FONT_STYLE=n.FLEX_WRAP=n.FLEX_DIRECTION=n.DISPLAY=n.COLORS=n.BORDER_STYLE=n.BLOCK_SIZES=n.ALIGN_ITEMS=void 0;var a=r(e("@babel/runtime/helpers/defineProperty"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.COLORS={BACKGROUND_DEFAULT:"background-default",BACKGROUND_ALTERNATIVE:"background-alternative",TEXT_DEFAULT:"text-default",TEXT_ALTERNATIVE:"text-alternative",TEXT_MUTED:"text-muted",ICON_DEFAULT:"icon-default",ICON_MUTED:"icon-muted",BORDER_DEFAULT:"border-default",BORDER_MUTED:"border-muted",OVERLAY_DEFAULT:"overlay-default",OVERLAY_INVERSE:"overlay-inverse",PRIMARY_DEFAULT:"primary-default",PRIMARY_ALTERNATIVE:"primary-alternative",PRIMARY_MUTED:"primary-muted",PRIMARY_INVERSE:"primary-inverse",PRIMARY_DISABLED:"primary-disabled",SECONDARY_DEFAULT:"secondary-default",SECONDARY_ALTERNATIVE:"secondary-alternative",SECONDARY_MUTED:"secondary-muted",SECONDARY_INVERSE:"secondary-inverse",SECONDARY_DISABLED:"secondary-disabled",ERROR_DEFAULT:"error-default",ERROR_ALTERNATIVE:"error-alternative",ERROR_MUTED:"error-muted",ERROR_INVERSE:"error-inverse",ERROR_DISABLED:"error-disabled",WARNING_DEFAULT:"warning-default",WARNING_ALTERNATIVE:"warning-alternative",WARNING_MUTED:"warning-muted",WARNING_INVERSE:"warning-inverse",WARNING_DISABLED:"warning-disabled",SUCCESS_DEFAULT:"success-default",SUCCESS_ALTERNATIVE:"success-alternative",SUCCESS_MUTED:"success-muted",SUCCESS_INVERSE:"success-inverse",SUCCESS_DISABLED:"success-disabled",INFO_DEFAULT:"info-default",INFO_ALTERNATIVE:"info-alternative",INFO_MUTED:"info-muted",INFO_INVERSE:"info-inverse",INFO_DISABLED:"info-disabled",MAINNET:"mainnet",ROPSTEN:"ropsten",KOVAN:"kovan",RINKEBY:"rinkeby",GOERLI:"goerli",TRANSPARENT:"transparent",LOCALHOST:"localhost"};n.TYPOGRAPHY={H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",H7:"h7",H8:"h8",H9:"h9",Paragraph:"p"};const i="none",c={XS:"xs",SM:"sm",MD:"md",LG:"lg",XL:"xl",NONE:i};n.SIZES=c;const u={DASHED:"dashed",SOLID:"solid",DOTTED:"dotted",DOUBLE:"double",NONE:i};n.BORDER_STYLE=u;const l="flex-end",d="flex-start",E="center",T={FLEX_START:d,FLEX_END:l,CENTER:E,BASELINE:"baseline",STRETCH:"stretch"};n.ALIGN_ITEMS=T;const m={FLEX_START:d,FLEX_END:l,CENTER:E,SPACE_AROUND:"space-around",SPACE_BETWEEN:"space-between",SPACE_EVENLY:"space-evenly"};n.JUSTIFY_CONTENT=m;n.FLEX_DIRECTION={ROW:"row",ROW_REVERSE:"row-reverse",COLUMN:"column",COLUMN_REVERSE:"column-reverse"};n.FLEX_WRAP={WRAP:"wrap",WRAP_REVERSE:"wrap-reverse",NO_WRAP:"nowrap"};n.DISPLAY={BLOCK:"block",FLEX:"flex",GRID:"grid",INLINE_BLOCK:"inline-block",INLINE_FLEX:"inline-flex",INLINE_GRID:"inline-grid",LIST_ITEM:"list-item"};const f={HALF:"1/2",ONE_THIRD:"1/3",TWO_THIRDS:"2/3",ONE_FOURTH:"1/4",TWO_FOURTHS:"2/4",THREE_FOURTHS:"3/4",ONE_FIFTH:"1/5",TWO_FIFTHS:"2/5",THREE_FIFTHS:"3/5",FOUR_FIFTHS:"4/5",ONE_SIXTH:"1/6",TWO_SIXTHS:"2/6",THREE_SIXTHS:"3/6",FOUR_SIXTHS:"4/6",FIVE_SIXTHS:"5/6",ONE_TWELFTH:"1/12",TWO_TWELFTHS:"2/12",THREE_TWELFTHS:"3/12",FOUR_TWELFTHS:"4/12",FIVE_TWELFTHS:"5/12",SIX_TWELFTHS:"6/12",SEVEN_TWELFTHS:"7/12",EIGHT_TWELFTHS:"8/12",NINE_TWELFTHS:"9/12",TEN_TWELFTHS:"10/12",ELEVEN_TWELFTHS:"11/12"};n.FRACTIONS=f;const p=o(o({},f),{},{SCREEN:"screen",MAX:"max",MIN:"min",FULL:"full"});n.BLOCK_SIZES=p;n.TEXT_ALIGN={LEFT:"left",CENTER:"center",RIGHT:"right",JUSTIFY:"justify",END:"end"};n.FONT_WEIGHT={BOLD:"bold",NORMAL:"normal"};n.OVERFLOW_WRAP={BREAK_WORD:"break-word",NORMAL:"normal"};n.FONT_STYLE={ITALIC:"italic",NORMAL:"normal"};n.SEVERITIES={DANGER:"danger",WARNING:"warning",INFO:"info",SUCCESS:"success"};n.RESIZE={NONE:"none",BOTH:"both",HORIZONTAL:"horizontal",VERTICAL:"vertical",INITIAL:"initial",INHERIT:"inherit"}}}},{package:"$root$"}],[6632,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UNSENDABLE_ASSET_ERROR_KEY=n.TRANSACTION_NO_CONTRACT_ERROR_KEY=n.TRANSACTION_ERROR_KEY=n.INVALID_ASSET_TYPE=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY=n.INSUFFICIENT_FUNDS_ERROR_KEY=n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY=n.GAS_PRICE_EXCESSIVE_ERROR_KEY=n.GAS_LIMIT_TOO_LOW_ERROR_KEY=n.ETH_GAS_PRICE_FETCH_WARNING_KEY=void 0;n.INSUFFICIENT_FUNDS_ERROR_KEY="insufficientFunds";n.GAS_LIMIT_TOO_LOW_ERROR_KEY="gasLimitTooLow";n.TRANSACTION_ERROR_KEY="transactionError";n.TRANSACTION_NO_CONTRACT_ERROR_KEY="transactionErrorNoContract";n.ETH_GAS_PRICE_FETCH_WARNING_KEY="ethGasPriceFetchWarning";n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY="gasPriceFetchFailed";n.GAS_PRICE_EXCESSIVE_ERROR_KEY="gasPriceExcessive";n.UNSENDABLE_ASSET_ERROR_KEY="unsendableAsset";n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY="insufficientFundsForGas";n.INVALID_ASSET_TYPE="invalidAssetType"}}},{package:"$root$"}],[6635,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.VIEW_QUOTE_ROUTE=n.UNLOCK_ROUTE=n.TOKEN_DETAILS=n.SWAPS_ROUTE=n.SWAPS_MAINTENANCE_ROUTE=n.SWAPS_ERROR_ROUTE=n.SNAPS_VIEW_ROUTE=n.SNAPS_LIST_ROUTE=n.SMART_TRANSACTION_STATUS_ROUTE=n.SIGNATURE_REQUEST_PATH=n.SETTINGS_ROUTE=n.SEND_ROUTE=n.SECURITY_ROUTE=n.REVEAL_SEED_ROUTE=n.RESTORE_VAULT_ROUTE=n.PATH_NAME_MAP=n.ONBOARDING_WELCOME_ROUTE=n.ONBOARDING_UNLOCK_ROUTE=n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE=n.ONBOARDING_ROUTE=n.ONBOARDING_REVIEW_SRP_ROUTE=n.ONBOARDING_PRIVACY_SETTINGS_ROUTE=n.ONBOARDING_PIN_EXTENSION_ROUTE=n.ONBOARDING_METAMETRICS=n.ONBOARDING_IMPORT_WITH_SRP_ROUTE=n.ONBOARDING_IMPORT_MOBILE_ROUTE=n.ONBOARDING_HELP_US_IMPROVE_ROUTE=n.ONBOARDING_CREATE_PASSWORD_ROUTE=n.ONBOARDING_CONFIRM_SRP_ROUTE=n.ONBOARDING_COMPLETION_ROUTE=n.NEW_ACCOUNT_ROUTE=n.NETWORKS_ROUTE=n.NETWORKS_FORM_ROUTE=n.MOBILE_SYNC_ROUTE=n.LOCK_ROUTE=n.LOADING_QUOTES_ROUTE=n.INITIALIZE_WELCOME_ROUTE=n.INITIALIZE_UNLOCK_ROUTE=n.INITIALIZE_SELECT_ACTION_ROUTE=n.INITIALIZE_SEED_PHRASE_ROUTE=n.INITIALIZE_SEED_PHRASE_INTRO_ROUTE=n.INITIALIZE_ROUTE=n.INITIALIZE_METAMETRICS_OPT_IN_ROUTE=n.INITIALIZE_IMPORT_WITH_SEED_PHRASE_ROUTE=n.INITIALIZE_END_OF_FLOW_ROUTE=n.INITIALIZE_CREATE_PASSWORD_ROUTE=n.INITIALIZE_CONFIRM_SEED_PHRASE_ROUTE=n.INITIALIZE_BACKUP_SEED_PHRASE_ROUTE=n.IMPORT_TOKEN_ROUTE=n.IMPORT_ACCOUNT_ROUTE=n.GENERAL_ROUTE=n.EXPERIMENTAL_ROUTE=n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH=n.DEFAULT_ROUTE=n.DECRYPT_MESSAGE_REQUEST_PATH=n.CONTACT_VIEW_ROUTE=n.CONTACT_LIST_ROUTE=n.CONTACT_EDIT_ROUTE=n.CONTACT_ADD_ROUTE=n.CONNECT_ROUTE=n.CONNECT_HARDWARE_ROUTE=n.CONNECT_CONFIRM_PERMISSIONS_ROUTE=n.CONNECTED_ROUTE=n.CONNECTED_ACCOUNTS_ROUTE=n.CONFIRM_TRANSFER_FROM_PATH=n.CONFIRM_TRANSACTION_ROUTE=n.CONFIRM_TOKEN_METHOD_PATH=n.CONFIRM_SEND_TOKEN_PATH=n.CONFIRM_SEND_ETHER_PATH=n.CONFIRM_SAFE_TRANSFER_FROM_PATH=n.CONFIRM_IMPORT_TOKEN_ROUTE=n.CONFIRM_DEPLOY_CONTRACT_PATH=n.CONFIRM_APPROVE_PATH=n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE=n.CONFIRMATION_V_NEXT_ROUTE=n.BUILD_QUOTE_ROUTE=n.AWAITING_SWAP_ROUTE=n.AWAITING_SIGNATURES_ROUTE=n.ASSET_ROUTE=n.ALERTS_ROUTE=n.ADVANCED_ROUTE=n.ADD_NETWORK_ROUTE=n.ADD_COLLECTIBLE_ROUTE=n.ABOUT_US_ROUTE=void 0;n.DEFAULT_ROUTE="/";const r="/unlock";n.UNLOCK_ROUTE=r;const a="/lock";n.LOCK_ROUTE=a;const s="/asset";n.ASSET_ROUTE=s;const o="/settings";n.SETTINGS_ROUTE=o;const i="/settings/general";n.GENERAL_ROUTE=i;const c="/settings/advanced";n.ADVANCED_ROUTE=c;const u="/settings/experimental";n.EXPERIMENTAL_ROUTE=u;const l="/settings/security";n.SECURITY_ROUTE=l;const d="/settings/about-us";n.ABOUT_US_ROUTE=d;const E="/settings/alerts";n.ALERTS_ROUTE=E;const T="/settings/networks";n.NETWORKS_ROUTE=T;const m="/settings/networks/form";n.NETWORKS_FORM_ROUTE=m;const f="/settings/networks/add-network";n.ADD_NETWORK_ROUTE=f;n.SNAPS_LIST_ROUTE="/settings/snaps-list";n.SNAPS_VIEW_ROUTE="/settings/snaps-view";const p="/settings/contact-list";n.CONTACT_LIST_ROUTE=p;const _="/settings/contact-list/edit-contact";n.CONTACT_EDIT_ROUTE=_;const S="/settings/contact-list/add-contact";n.CONTACT_ADD_ROUTE=S;const A="/settings/contact-list/view-contact";n.CONTACT_VIEW_ROUTE=A;const g="/seed";n.REVEAL_SEED_ROUTE=g;const O="/mobile-sync";n.MOBILE_SYNC_ROUTE=O;const N="/restore-vault";n.RESTORE_VAULT_ROUTE=N;const I="/import-token";n.IMPORT_TOKEN_ROUTE=I;const R="/confirm-import-token";n.CONFIRM_IMPORT_TOKEN_ROUTE=R;const y="/confirm-add-suggested-token";n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE=y;const h="/new-account";n.NEW_ACCOUNT_ROUTE=h;const P="/new-account/import";n.IMPORT_ACCOUNT_ROUTE=P;const C="/new-account/connect";n.CONNECT_HARDWARE_ROUTE=C;const v="/send";n.SEND_ROUTE=v;const b="/token-details";n.TOKEN_DETAILS=b;const w="/connect";n.CONNECT_ROUTE=w;const D="/confirm-permissions";n.CONNECT_CONFIRM_PERMISSIONS_ROUTE=D;const k="/connected";n.CONNECTED_ROUTE=k;const L="/connected/accounts";n.CONNECTED_ACCOUNTS_ROUTE=L;n.SWAPS_ROUTE="/swaps";const M="/swaps/build-quote";n.BUILD_QUOTE_ROUTE=M;const U="/swaps/view-quote";n.VIEW_QUOTE_ROUTE=U;const G="/swaps/loading-quotes";n.LOADING_QUOTES_ROUTE=G;n.AWAITING_SIGNATURES_ROUTE="/swaps/awaiting-signatures";n.SMART_TRANSACTION_STATUS_ROUTE="/swaps/smart-transaction-status";const F="/swaps/awaiting-swap";n.AWAITING_SWAP_ROUTE=F;const x="/swaps/swaps-error";n.SWAPS_ERROR_ROUTE=x;n.SWAPS_MAINTENANCE_ROUTE="/swaps/maintenance";n.ADD_COLLECTIBLE_ROUTE="/add-collectible";const H="/initialize";n.INITIALIZE_ROUTE=H;const B="/initialize/welcome";n.INITIALIZE_WELCOME_ROUTE=B;const W="/initialize/unlock";n.INITIALIZE_UNLOCK_ROUTE=W;const j="/initialize/create-password";n.INITIALIZE_CREATE_PASSWORD_ROUTE=j;const Y="/initialize/create-password/import-with-seed-phrase";n.INITIALIZE_IMPORT_WITH_SEED_PHRASE_ROUTE=Y;const K="/initialize/select-action";n.INITIALIZE_SELECT_ACTION_ROUTE=K;const V="/initialize/seed-phrase";n.INITIALIZE_SEED_PHRASE_ROUTE=V;const $="/initialize/backup-seed-phrase";n.INITIALIZE_BACKUP_SEED_PHRASE_ROUTE=$;const q="/initialize/seed-phrase-intro";n.INITIALIZE_SEED_PHRASE_INTRO_ROUTE=q;const X="/initialize/end-of-flow";n.INITIALIZE_END_OF_FLOW_ROUTE=X;const z="/initialize/seed-phrase/confirm";n.INITIALIZE_CONFIRM_SEED_PHRASE_ROUTE=z;const Q="/initialize/metametrics-opt-in";n.INITIALIZE_METAMETRICS_OPT_IN_ROUTE=Q;n.ONBOARDING_ROUTE="/onboarding";n.ONBOARDING_REVIEW_SRP_ROUTE="/onboarding/review-recovery-phrase";n.ONBOARDING_CONFIRM_SRP_ROUTE="/onboarding/confirm-recovery-phrase";n.ONBOARDING_CREATE_PASSWORD_ROUTE="/onboarding/create-password";n.ONBOARDING_COMPLETION_ROUTE="/onboarding/completion";n.ONBOARDING_UNLOCK_ROUTE="/onboarding/unlock";n.ONBOARDING_HELP_US_IMPROVE_ROUTE="/onboarding/help-us-improve";n.ONBOARDING_IMPORT_WITH_SRP_ROUTE="/onboarding/import-with-recovery-phrase";n.ONBOARDING_IMPORT_MOBILE_ROUTE="/onboarding/import-mobile";n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE="/onboarding/secure-your-wallet";n.ONBOARDING_PRIVACY_SETTINGS_ROUTE="/onboarding/privacy-settings";n.ONBOARDING_PIN_EXTENSION_ROUTE="/onboarding/pin-extension";n.ONBOARDING_WELCOME_ROUTE="/onboarding/welcome";n.ONBOARDING_METAMETRICS="/onboarding/metametrics";const Z="/confirm-transaction";n.CONFIRM_TRANSACTION_ROUTE=Z;const J="/send-ether";n.CONFIRM_SEND_ETHER_PATH=J;const ee="/send-token";n.CONFIRM_SEND_TOKEN_PATH=ee;const te="/deploy-contract";n.CONFIRM_DEPLOY_CONTRACT_PATH=te;const ne="/approve";n.CONFIRM_APPROVE_PATH=ne;const re="/transfer-from";n.CONFIRM_TRANSFER_FROM_PATH=re;const ae="/safe-transfer-from";n.CONFIRM_SAFE_TRANSFER_FROM_PATH=ae;const se="/token-method";n.CONFIRM_TOKEN_METHOD_PATH=se;const oe="/signature-request";n.SIGNATURE_REQUEST_PATH=oe;const ie="/decrypt-message-request";n.DECRYPT_MESSAGE_REQUEST_PATH=ie;const ce="/encryption-public-key-request";n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH=ce;const ue="/confirmation";n.CONFIRMATION_V_NEXT_ROUTE=ue;const le={"/":"Home",[r]:"Unlock Page",[a]:"Lock Page","/asset/:asset/:id":"Asset Page",[o]:"Settings Page",[i]:"General Settings Page",[c]:"Advanced Settings Page",[u]:"Experimental Settings Page",[l]:"Security Settings Page",[d]:"About Us Page",[E]:"Alerts Settings Page",[T]:"Network Settings Page",[m]:"Network Settings Page Form",[f]:"Add Network From Settings Page Form",[p]:"Contact List Settings Page",[`${_}/:address`]:"Edit Contact Settings Page",[S]:"Add Contact Settings Page",[`${A}/:address`]:"View Contact Settings Page",[g]:"Reveal Secret Recovery Phrase Page",[O]:"Sync With Mobile Page",[N]:"Restore Vault Page",[I]:"Import Token Page",[R]:"Confirm Import Token Page",[y]:"Confirm Add Suggested Token Page",[h]:"New Account Page",[P]:"Import Account Page",[C]:"Connect Hardware Wallet Page",[v]:"Send Page","/token-details/:address":"Token Details Page","/connect/:id":"Connect To Site Confirmation Page","/connect/:id/confirm-permissions":"Grant Connected Site Permissions Confirmation Page",[k]:"Sites Connected To This Account Page",[L]:"Accounts Connected To This Site Page","/confirm-transaction/:id":"Confirmation Root Page",[Z]:"Confirmation Root Page",[ue]:"New Confirmation Page","/confirm-transaction/:id/token-method":"Confirm Token Method Transaction Page","/confirm-transaction/:id/send-ether":"Confirm Send Ether Transaction Page","/confirm-transaction/:id/send-token":"Confirm Send Token Transaction Page","/confirm-transaction/:id/deploy-contract":"Confirm Deploy Contract Transaction Page","/confirm-transaction/:id/approve":"Confirm Approve Transaction Page","/confirm-transaction/:id/transfer-from":"Confirm Transfer From Transaction Page","/confirm-transaction/:id/safe-transfer-from":"Confirm Safe Transfer From Transaction Page","/confirm-transaction/:id/signature-request":"Signature Request Page","/confirm-transaction/:id/decrypt-message-request":"Decrypt Message Request Page","/confirm-transaction/:id/encryption-public-key-request":"Encryption Public Key Request Page",[H]:"Initialization Page",[B]:"Install Welcome Page",[W]:"Initialization Unlock page",[j]:"Initialization Create Password Page",[Y]:"Initialization Import Account With Secret Recovery Phrase Page",[K]:"Initialization Choose Restore or New Account Page",[V]:"Initialization Secret Recovery Phrase Page",[$]:"Initialization Backup Secret Recovery Phrase Page",[q]:"Initialization Secret Recovery Phrase Intro Page",[X]:"End of Initialization Page",[z]:"Initialization Confirm Secret Recovery Phrase Page",[Q]:"MetaMetrics Opt In Page",[M]:"Swaps Build Quote Page",[U]:"Swaps View Quotes Page",[G]:"Swaps Loading Quotes Page",[F]:"Swaps Awaiting Swaps Page",[x]:"Swaps Error Page"};n.PATH_NAME_MAP=le}}},{package:"$root$"}],[6637,{"../../../shared/constants/transaction":6114,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.TRANSACTION_ENVELOPE_TYPE_NAMES=n.TOKEN_CATEGORY_HASH=n.PRIORITY_STATUS_HASH=n.PENDING_STATUS_HASH=void 0;var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("../../../shared/constants/transaction");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const c={[s.TRANSACTION_STATUSES.UNAPPROVED]:!0,[s.TRANSACTION_STATUSES.APPROVED]:!0,[s.TRANSACTION_STATUSES.SUBMITTED]:!0,[s.TRANSACTION_STATUSES.PENDING]:!0};n.PENDING_STATUS_HASH=c;const u=i(i({},c),{},{[s.TRANSACTION_STATUSES.CONFIRMED]:!0});n.PRIORITY_STATUS_HASH=u;const l={[s.TRANSACTION_TYPES.TOKEN_METHOD_APPROVE]:!0,[s.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER]:!0,[s.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM]:!0};n.TOKEN_CATEGORY_HASH=l;n.TRANSACTION_ENVELOPE_TYPE_NAMES={FEE_MARKET:"fee-market",LEGACY:"legacy"}}}},{package:"$root$"}],[6650,{"../../../app/scripts/lib/util":83,"../../../shared/modules/conversion.utils":6117,"../../selectors":7030,"@babel/runtime/helpers/interopRequireDefault":199,"bignumber.js":1875,"currency-formatter":2144,"currency-formatter/currencies":2143},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addEth=function(...e){return e.reduce(((e,t)=>(0,u.addCurrencies)(e,t,{toNumericBase:"dec",numberOfDecimals:6,aBase:10,bBase:10})))},n.addFiat=function(...e){return e.reduce(((e,t)=>(0,u.addCurrencies)(e,t,{toNumericBase:"dec",numberOfDecimals:2,aBase:10,bBase:10})))},n.areDappSuggestedAndTxParamGasFeesTheSame=function(e={}){const{txParams:t,dappSuggestedGasFees:n}=e,{gasPrice:r,maxFeePerGas:a,maxPriorityFeePerGas:s}=t||{},{gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c}=n||{},u=!o&&!i&&!c;if(!r&&!a&&!s||u)return!1;const l=r&&r===o,d=[a,s].every((e=>e===o)),E=a&&a===i&&s===c;return l||d||E},n.convertTokenToFiat=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,contractExchangeRate:a}){const s=r*a;return(0,u.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"dec",fromCurrency:t,toCurrency:n,numberOfDecimals:2,conversionRate:s})},n.formatCurrency=function(e,t){const n=t.toUpperCase();return s.default.find((e=>e.code===n))?a.default.format(Number(e),{code:n,style:"currency"}):e},n.getHexGasTotal=function({gasLimit:e,gasPrice:t}){return(0,i.addHexPrefix)((0,u.multiplyCurrencies)(e||"0x0",t||"0x0",{toNumericBase:"hex",multiplicandBase:16,multiplierBase:16}))},n.getTransactionFee=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,numberOfDecimals:a}){return(0,u.conversionUtil)(e,{fromNumericBase:"BN",toNumericBase:"dec",fromDenomination:"WEI",fromCurrency:t,toCurrency:n,numberOfDecimals:a,conversionRate:r})},n.getValueFromWeiHex=function({value:e,fromCurrency:t="ETH",toCurrency:n,conversionRate:r,numberOfDecimals:a,toDenomination:s}){return(0,u.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec",fromCurrency:t,toCurrency:n,numberOfDecimals:a,fromDenomination:"WEI",toDenomination:s,conversionRate:r})},n.hasUnconfirmedTransactions=function(e){return(0,c.unconfirmedTransactionsCountSelector)(e)>0},n.hexGreaterThan=function(e,t){return(0,u.conversionGreaterThan)({value:e,fromNumericBase:"hex"},{value:t,fromNumericBase:"hex"})},n.increaseLastGasPrice=function(e){return(0,i.addHexPrefix)((0,u.multiplyCurrencies)(e||"0x0",1.1,{multiplicandBase:16,multiplierBase:10,toNumericBase:"hex"}))},n.roundExponential=function(e){const t=new o.default(e);return t.e>20?t.toPrecision(4):e};var a=r(e("currency-formatter")),s=r(e("currency-formatter/currencies")),o=r(e("bignumber.js")),i=e("../../../app/scripts/lib/util"),c=e("../../selectors"),u=e("../../../shared/modules/conversion.utils")}}},{package:"$root$"}],[6651,{"../../../app/scripts/lib/util":83,"../../../shared/modules/conversion.utils":6117,"../constants/common":6629,"./confirm-tx.util":6650},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addHexWEIsToDec=function(e,t){return(0,s.addCurrencies)(e,t,{aBase:16,bBase:16,fromDenomination:"WEI",numberOfDecimals:6})},n.addHexes=u,n.bnToHex=function(e){return(0,a.addHexPrefix)(e.toString(16))},n.decETHToDecWEI=function(e){return(0,s.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"dec",fromDenomination:"ETH",toDenomination:"WEI"})},n.decEthToConvertedCurrency=c,n.decGWEIToHexWEI=function(e){return(0,s.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})},n.decimalToHex=function(e){return(0,s.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"})},n.getEthConversionFromWeiHex=function({value:e,fromCurrency:t=r.ETH,conversionRate:n,numberOfDecimals:a=6}){const s=[t,r.GWEI,r.WEI];let o;for(let r=0;r<s.length;r++){const c=i({value:e,conversionRate:n,fromCurrency:t,toCurrency:t,numberOfDecimals:a,toDenomination:s[r]});if("0"!==c||r===s.length-1){o=`${c} ${s[r]}`;break}}return o},n.getValueFromWeiHex=i,n.getWeiHexFromDecimalValue=function({value:e,fromCurrency:t,conversionRate:n,fromDenomination:a,invertConversionRate:o}){return(0,s.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex",toCurrency:r.ETH,fromCurrency:t,conversionRate:n,invertConversionRate:o,fromDenomination:a,toDenomination:r.WEI})},n.hexToDecimal=function(e){return(0,s.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec"})},n.hexWEIToDecETH=function(e){return(0,s.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"ETH"})},n.hexWEIToDecGWEI=function(e){return(0,s.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})},n.subtractHexWEIsToDec=function(e,t){return(0,s.subtractCurrencies)(e,t,{aBase:16,bBase:16,fromDenomination:"WEI",numberOfDecimals:6})},n.subtractHexes=function(e,t){return(0,s.subtractCurrencies)(e,t,{aBase:16,bBase:16,toNumericBase:"hex",numberOfDecimals:6})},n.sumHexWEIs=l,n.sumHexWEIsToRenderableFiat=function(e,t,n){const r=d(e,t,n);return(0,o.formatCurrency)(r,t)},n.sumHexWEIsToUnformattedFiat=d;var r=e("../constants/common"),a=e("../../../app/scripts/lib/util"),s=e("../../../shared/modules/conversion.utils"),o=e("./confirm-tx.util");function i({value:e,fromCurrency:t=r.ETH,toCurrency:n,conversionRate:a,numberOfDecimals:o,toDenomination:i}){return(0,s.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"dec",fromCurrency:t,toCurrency:n,numberOfDecimals:o,fromDenomination:r.WEI,toDenomination:i,conversionRate:a})}function c(e,t,n){return(0,s.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"dec",fromCurrency:"ETH",toCurrency:t,numberOfDecimals:2,conversionRate:n})}function u(e,t){return(0,s.addCurrencies)(e,t,{aBase:16,bBase:16,toNumericBase:"hex",numberOfDecimals:6})}function l(e){return e.filter(Boolean).reduce(u)}function d(e,t,n){return c(i({value:l(e),toCurrency:"ETH",numberOfDecimals:4}),t,n)}}}},{package:"$root$"}],[6652,{"../../../shared/constants/time":6113,"../../../shared/modules/fetch-with-timeout":6118,"./storage-helpers":6664,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("../../../shared/constants/time"),o=r(e("../../../shared/modules/fetch-with-timeout")),i=e("./storage-helpers");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=async(e,t={},{cacheRefreshTime:n=6*s.MINUTE,timeout:r=30*s.SECOND}={})=>{if(t.body||t.method&&"GET"!==t.method)throw new Error("fetchWithCache only supports GET requests");if(t.headers instanceof window.Headers||(t.headers=new window.Headers(t.headers)),t.headers.has("Content-Type")&&"application/json"!==t.headers.get("Content-Type"))throw new Error("fetchWithCache only supports JSON responses");const u=Date.now(),l=`cachedFetch:${e}`,{cachedResponse:d,cachedTime:E}=await(0,i.getStorageItem)(l)||{};if(d&&u-E<n)return d;t.headers.set("Content-Type","application/json");const T=(0,o.default)(r),m=await T(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({referrerPolicy:"no-referrer-when-downgrade",body:null,method:"GET",mode:"cors"},t));if(!m.ok)throw new Error(`Fetch failed with status '${m.status}': '${m.statusText}'`);const f=await m.json(),p={cachedResponse:f,cachedTime:u};return await(0,i.setStorageItem)(l,p),f};n.default=u}}},{package:"$root$"}],[6653,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatETHFee=function(e,t="ETH"){return`${e} ${t}`}}}},{package:"$root$"}],[6656,{"../../../shared/constants/time":6113,"../../../shared/modules/fetch-with-timeout":6118,"@babel/runtime/helpers/interopRequireDefault":199,"@sentry/browser":1395,_process:5342,loglevel:5104,react:5608},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.fetchLocale=async function(e){try{const t=await u(`./_locales/${e}/messages.json`);return await t.json()}catch(t){return s.default.error(`failed to fetch ${e} locale because of ${t}`),{}}},n.getMessage=void 0,n.loadRelativeTimeFormatLocaleData=async function(e){const t=e.split("_")[0];if(Intl.RelativeTimeFormat&&"function"==typeof Intl.RelativeTimeFormat.__addLocaleData&&!T.has(t)){const e=await async function(e){const t=await u(`./intl/${e}/relative-time-format-data.json`);return await t.json()}(t);Intl.RelativeTimeFormat.__addLocaleData(e)}};var a=r(e("react")),s=r(e("loglevel")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("@sentry/browser")),i=e("../../../shared/constants/time");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const u=(0,r(e("../../../shared/modules/fetch-with-timeout")).default)(30*i.SECOND),l={},d={},E={};n.getMessage=(e,n,r,i)=>{if(!n)return null;if(!n[r]){if("en"===e){if(!d[r]&&(d[r]=new Error(`Unable to find value of key "${r}" for locale "${e}"`),o.captureException(d[r]),s.default.error(d[r]),t.env.IN_TEST))throw d[r]}else l[e]&&l[e][r]||(l[e]||(l[e]={}),l[e][r]=!0,s.default.warn(`Translator - Unable to find value of key "${r}" for locale "${e}"`));return null}let c=n[r].message;const u=Boolean(i&&i.length),T=u&&i.some((e=>null!==e&&("function"==typeof e||"object"==typeof e)));if(u){const t=c.split(/(\$\d)/gu).map((t=>{var n;const a=t.match(/\$(\d)/u);if(!a)return t;const c=Number(a[1])-1;if(!(null!==i[c]&&i[c]!==undefined||null!==(n=E[e])&&void 0!==n&&n[r])){E[e]||(E[e]={}),E[e][r]=!0;const t=new Error(`Insufficient number of substitutions for key "${r}" with locale "${e}"`);s.default.error(t),o.captureException(t)}return i[c]}));c=T?a.default.createElement("span",null," ",t," "):t.join("")}return c};const T=new Set}).call(this)}).call(this,e("_process"))}}},{package:"$root$"}],[6660,{"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,"@ethereumjs/common":405,"@ethereumjs/tx":409,"ethereumjs-util":2437,lodash:5091},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=function(e){return d(d({},(0,s.omit)(e.txParams,"gas")),{},{gasLimit:e.txParams.gas})}(e),n=function(e){return i.default.forCustomChain(i.Chain.Mainnet,{chainId:new o.BN((0,o.stripHexPrefix)(e.chainId),16),networkId:new o.BN(e.metamaskNetworkId,10),defaultHardfork:i.Hardfork.SpuriousDragon})}(e);return c.TransactionFactory.fromTxData(t,{common:n})};var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("lodash"),o=e("ethereumjs-util"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("@ethereumjs/common")),c=e("@ethereumjs/tx");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}},{package:"$root$"}],[6661,{"./buildUnserializedTransaction":6660,"@babel/runtime/helpers/interopRequireDefault":199,"@eth-optimism/contracts":371,ethers:2461},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function(e,t){var n;const r=function(e){const t=s.getContractFactory("OVM_GasPriceOracle").attach(s.predeploys.OVM_GasPriceOracle),n=JSON.parse(t.interface.format(a.utils.FormatTypes.json));return e.contract(n).at(t.address)}(e),i=(0,o.default)(t).serialize(),c=await r.getL1Fee(i);return null==c||null===(n=c[0])||void 0===n?void 0:n.toString(16)};var a=c(e("ethers")),s=c(e("@eth-optimism/contracts")),o=r(e("./buildUnserializedTransaction"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}}}},{package:"$root$"}],[6664,{"@babel/runtime/helpers/interopRequireDefault":199,localforage:4908},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getStorageItem=async function(e){try{const t=await a.default.getItem(e);return null===t?undefined:JSON.parse(t)}catch(e){return undefined}},n.setStorageItem=async function(e,t){try{const n=JSON.stringify(t);await a.default.setItem(e,n)}catch(e){console.warn(e)}};var a=r(e("localforage"))}}},{package:"$root$"}],[6665,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=async e=>{let t;return"auto"===e&&(e="ltr"),Array.from(document.getElementsByTagName("link")).filter((e=>"stylesheet"===e.rel)).forEach((n=>{n.title===e&&n.disabled?(n.disabled=!1,t=n):n.title===e||n.disabled||(n.disabled=!0)})),t?new Promise(((n,r)=>{t.onload=()=>{n()},t.onerror=()=>r(new Error(`Failed to load '${e}' stylesheet`))})):undefined};n.default=r}}},{package:"$root$"}],[6666,{"../../../shared/modules/conversion.utils":6117,"../../../shared/modules/string-utils":6124,"../../../shared/modules/transaction.utils":6126,"../../store/actions":7036,"../constants/common":6629,"./confirm-tx.util":6650,"./util":6669,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,"bignumber.js":1875,loglevel:5104},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.calcTokenAmount=function(e,t){const n=Math.pow(10,Number(t||0));return new o.default(String(e)).div(n)},n.calcTokenValue=function(e,t){const n=Math.pow(10,Number(t||0));return new o.default(String(e)).times(n)},n.getAssetDetails=async function(e,t,n,r){var a;const o=(0,d.parseStandardTokenTransactionData)(n);if(!o)throw new Error("Unable to detect valid token data");const i=O(o);let E;try{E=await(0,c.getTokenStandardAndDetails)(e,t,i)}catch(e){return s.default.warn(e),{}}if(null!==(a=E)&&void 0!==a&&a.standard){const{standard:t}=E;if(t===u.ERC721||t===u.ERC1155){const n=r.find((({address:t})=>(0,l.isEqualCaseInsensitive)(e,t)));if(n)return p(p({},n),{},{standard:t})}return E}return{}},n.getSymbolAndDecimals=g,n.getTokenAddressParam=function(e={}){var t,n,r;const a=(null==e||null===(t=e.args)||void 0===t?void 0:t._to)||(null==e||null===(n=e.args)||void 0===n?void 0:n.to)||(null==e||null===(r=e.args)||void 0===r?void 0:r[0]);return null==a?void 0:a.toString().toLowerCase()},n.getTokenFiatAmount=function(e,t,n,r,a,s=!0,o=!1){if(t<=0||!e||r===undefined)return undefined;const c=(0,i.multiplyCurrencies)(e,t,{multiplicandBase:10,multiplierBase:10}),u=(0,i.conversionUtil)(r,{fromNumericBase:"dec",fromCurrency:a,toCurrency:n.toUpperCase(),numberOfDecimals:2,conversionRate:c});let l;l=o?(0,T.formatCurrency)(u,n):s?`${(0,T.formatCurrency)(u,n)} ${n.toUpperCase()}`:u;return l},n.getTokenValue=function(e=[]){const t=e.find((e=>"_value"===e.name));return t&&t.value},n.getTokenValueParam=O,n.tokenInfoGetter=function(){const e={};return async(t,n)=>(e[t]||(e[t]=await g(t,n)),e[t])};var a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("loglevel")),o=r(e("bignumber.js")),i=e("../../../shared/modules/conversion.utils"),c=e("../../store/actions"),u=e("../constants/common"),l=e("../../../shared/modules/string-utils"),d=e("../../../shared/modules/transaction.utils"),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("./util")),T=e("./confirm-tx.util");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t){const n=Object.keys(t).reduce(((e,n)=>p(p({},e),{},{[n.toLowerCase()]:t[n]})),{});return e&&n[e.toLowerCase()]}async function S(e,t){let n=await async function(e){const t=E.getContractAtAddress(e);try{return(await t.symbol())[0]}catch(t){return s.default.warn(`symbol() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=_(e,t);r&&(n=r.symbol)}return n}async function A(e,t){let n=await async function(e){const t=E.getContractAtAddress(e);try{const e=(await t.decimals())[0];return null==e?void 0:e.toString()}catch(t){return s.default.warn(`decimals() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n||"0"===n){const a=_(e,t);var r;if(a)n=null===(r=a.decimals)||void 0===r?void 0:r.toString()}return n}async function g(e,t){let n,r;try{n=await S(e,t),r=await A(e,t)}catch(t){s.default.warn(`symbol() and decimal() calls for token at address ${e} resulted in error:`,t)}return{symbol:n||"",decimals:r}}function O(e={}){var t,n;return null==e||null===(t=e.args)||void 0===t||null===(n=t._value)||void 0===n?void 0:n.toString()}}}},{package:"$root$"}],[6667,{"../../../app/scripts/lib/util":83,"../../../shared/constants/transaction":6114,"../../../shared/modules/contract-utils":6116,"../../../shared/modules/conversion.utils":6117,"./fetch-with-cache":6652,"@babel/runtime/helpers/interopRequireDefault":199,"eth-method-registry":2363,loglevel:5104},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.getFourBytePrefix=function(e=""){const t=(0,o.addHexPrefix)(e);return t.slice(0,10)},n.getLatestSubmittedTxWithNonce=function(e=[],t="0x0"){if(!e.length)return{};return e.reduce(((e,n)=>{const{submittedTime:r,txParams:{nonce:a}={}}=n;return a===t?e.submittedTime?r>e.submittedTime?n:e:n:e}),{})},n.getMethodDataAsync=async function(e){try{const t=async function(e){const t=await(0,l.default)(`https://www.4byte.directory/api/v1/signatures/?hex_signature=${e}`,{referrerPolicy:"no-referrer-when-downgrade",body:null,method:"GET",mode:"cors"});if(1===t.count)return t.results[0].text_signature;return null}(e).catch((e=>(s.default.error(e),null)));d||(d=new a.MethodRegistry({provider:global.ethereumProvider}));let n=await d.lookup(e);if(n||(n=await t),!n)return{};const r=d.parse(n);return{name:r.name,params:r.args}}catch(e){return s.default.error(e),{}}},n.getStatusKey=function(e){const{txReceipt:{status:t}={},type:n,status:r}=e;if("0x0"===t)return i.TRANSACTION_STATUSES.FAILED;if(r===i.TRANSACTION_STATUSES.CONFIRMED&&n===i.TRANSACTION_TYPES.CANCEL)return i.TRANSACTION_GROUP_STATUSES.CANCELLED;return e.status},n.getTransactionTypeTitle=function(e,t,n="ETH"){switch(t){case i.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER:return e("transfer");case i.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM:return e("transferFrom");case i.TRANSACTION_TYPES.TOKEN_METHOD_SAFE_TRANSFER_FROM:return e("safeTransferFrom");case i.TRANSACTION_TYPES.TOKEN_METHOD_APPROVE:return e("approve");case i.TRANSACTION_TYPES.SIMPLE_SEND:return e("sendingNativeAsset",[n]);case i.TRANSACTION_TYPES.CONTRACT_INTERACTION:return e("contractInteraction");case i.TRANSACTION_TYPES.DEPLOY_CONTRACT:return e("contractDeployment");case i.TRANSACTION_TYPES.SWAP:return e("swap");case i.TRANSACTION_TYPES.SWAP_APPROVAL:return e("swapApproval");default:throw new Error(`Unrecognized transaction type: ${t}`)}},n.isLegacyTransaction=function(e){return(null==e?void 0:e.type)===i.TRANSACTION_ENVELOPE_TYPES.LEGACY},n.isSmartContractAddress=async function(e){const{isContractCode:t}=await(0,u.readAddressAsContract)(global.eth,e);return t},n.isTokenMethodAction=function(e){return[i.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER,i.TRANSACTION_TYPES.TOKEN_METHOD_APPROVE,i.TRANSACTION_TYPES.TOKEN_METHOD_TRANSFER_FROM,i.TRANSACTION_TYPES.TOKEN_METHOD_SAFE_TRANSFER_FROM].includes(e)},n.sumHexes=function(...e){const t=e.reduce(((e,t)=>(0,c.addCurrencies)(e,t,{toNumericBase:"hex",aBase:16,bBase:16})));return(0,o.addHexPrefix)(t)};var a=e("eth-method-registry"),s=r(e("loglevel")),o=e("../../../app/scripts/lib/util"),i=e("../../../shared/constants/transaction"),c=e("../../../shared/modules/conversion.utils"),u=e("../../../shared/modules/contract-utils"),l=r(e("./fetch-with-cache"));let d}}},{package:"$root$"}],[6668,{"../../../shared/modules/transaction.utils":6126,"./util":6669,"@babel/runtime/helpers/interopRequireDefault":199,loglevel:5104},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,i,c,u,l){a.default.debug("tx-helper called with params:"),a.default.debug({unapprovedTxs:e,unapprovedMsgs:t,personalMsgs:n,decryptMsgs:r,encryptionPublicKeyMsgs:i,typedMessages:c,network:u,chainId:l});const d=u?(0,o.valuesFor)(e).filter((e=>(0,s.transactionMatchesNetwork)(e,l,u))):(0,o.valuesFor)(e);a.default.debug(`tx helper found ${d.length} unapproved txs`);const E=(0,o.valuesFor)(t);a.default.debug(`tx helper found ${E.length} unsigned messages`);let T=d.concat(E);const m=(0,o.valuesFor)(n);a.default.debug(`tx helper found ${m.length} unsigned personal messages`),T=T.concat(m);const f=(0,o.valuesFor)(r);a.default.debug(`tx helper found ${f.length} decrypt requests`),T=T.concat(f);const p=(0,o.valuesFor)(i);a.default.debug(`tx helper found ${p.length} encryptionPublicKey requests`),T=T.concat(p);const _=(0,o.valuesFor)(c);return a.default.debug(`tx helper found ${_.length} unsigned typed messages`),T=T.concat(_),T=T.sort(((e,t)=>e.time-t.time)),T};var a=r(e("loglevel")),s=e("../../../shared/modules/transaction.utils"),o=e("./util")}}},{package:"$root$"}],[6669,{"../../../app/scripts/lib/util":83,"../../../shared/constants/labels":6108,"../../../shared/constants/network":6110,"../../../shared/modules/conversion.utils":6117,"../../../shared/modules/hexstring-utils":6120,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,"@metamask/controllers":1047,"@metamask/slip44":1233,"bignumber.js":1875,"ethereumjs-util":2437,"human-standard-token-abi":4300,luxon:5111,"punycode/punycode":5442},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addHexPrefixToObjectValues=R,n.addressSummary=function(e,t=10,n=4,r=!0){if(!e)return"";let a=(0,m.toChecksumHexAddress)(e);r||(a=c.stripHexPrefix(a));return a?`${a.slice(0,t)}...${a.slice(a.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new i.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new i.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new i.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new i.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.coinTypeToProtocolName=function(e){var t;if("1"===String(e))return"Test Networks";return(null===(t=d.default[e])||void 0===t?void 0:t.name)||undefined},n.constructTxParams=function({sendToken:e,data:t,to:n,amount:r,from:a,gas:s,gasPrice:o}){const i={data:t,from:a,value:"0",gas:s,gasPrice:o};e||(i.value=r,i.to=n);return R(i)},n.exportAsFile=function(e,t,n="text/csv"){e=e||N();const r=new window.Blob([t],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{const t=window.document.createElement("a");t.target="_blank",t.href=window.URL.createObjectURL(r),t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}},n.formatBalance=function(e,t,n=!0,r="ETH"){const a=n?O(e):e.split("."),s=a[0];let o=a[1],i="None";if(t===undefined)if("0"===s){if("0"!==o){const e=o.match(/^0*(.{2})/u);e&&(o=e[0]),i=`0.${o} ${r}`}}else i=`${s}.${o.slice(0,3)} ${r}`;else o+=Array(t).join("0"),i=`${s}.${o.slice(0,t)} ${r}`;return i},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return u.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const r=u.DateTime.fromMillis(e),a=u.DateTime.local();return r.toFormat(a.year===r.year?t:n)},n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=function(e,t){if(!e||!t||"string"!=typeof e)return"";if(e.startsWith("ipfs://"))return l.util.getFormattedIpfsUrl(t,e,!0);return e},n.getContractAtAddress=function(e){return global.eth.contract(o.default).at(e)},n.getRandomFileName=N,n.getURL=y,n.getURLHost=function(e){var t;return(null===(t=y(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=y(e))||void 0===t?void 0:t.hostname)||""},n.isDefaultMetaMaskChain=function(e){if(!e||e===T.MAINNET_CHAIN_ID||e===T.ROPSTEN_CHAIN_ID||e===T.RINKEBY_CHAIN_ID||e===T.KOVAN_CHAIN_ID||e===T.GOERLI_CHAIN_ID||e===T.LOCALHOST_CHAIN_ID)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==s.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.numericBalance=g,n.parseBalance=O,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return p.toBigNumber.dec(p.toBigNumber.dec(e).toFixed(t)).toNumber()},n.sanitizeMessage=void 0,n.shortenAddress=function(e=""){if(e.length<f.TRUNCATED_NAME_CHAR_LIMIT)return e;return`${e.slice(0,f.TRUNCATED_ADDRESS_START_CHARS)}...${e.slice(-f.TRUNCATED_ADDRESS_END_CHARS)}`},n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=I,n.stripHttpsSchemeWithoutPort=function(e){if(y(e).port)return e;return I(e)},n.toHumanReadableTime=void 0,n.toPrecisionWithoutTrailingZeros=function(e,t){return new i.default(e).toPrecision(t).replace(/(\.[0-9]*[1-9])0*|(\.0*)/u,"$1")},n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("punycode/punycode")),o=r(e("human-standard-token-abi")),i=r(e("bignumber.js")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("ethereumjs-util")),u=e("luxon"),l=e("@metamask/controllers"),d=r(e("@metamask/slip44")),E=e("../../../app/scripts/lib/util"),T=e("../../../shared/constants/network"),m=e("../../../shared/modules/hexstring-utils"),f=e("../../../shared/constants/labels"),p=e("../../../shared/modules/conversion.utils");function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){if(!e)return new c.BN(0,16);const t=c.stripHexPrefix(e);return new c.BN(t,16)}function O(e){let t;const n=g(e),r=n.toString(),a=r.length>18?r.slice(0,r.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[a,t]}function N(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e}function I(e){return e.replace(/^https:\/\//u,"")}function R(e){return Object.keys(e).reduce(((t,n)=>A(A({},t),{},{[n]:(0,E.addHexPrefix)(e[n])})),{})}function y(e){try{return new URL(e)}catch(e){return""}}n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const h=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const r=n[t];if(!r)throw new Error("Invalid primary type definition");const a={};return Object.keys(e).forEach((t=>{const s=Object.values(r).find((e=>e.name===t));if(!s)return;const o=s.type.replace(/\[\]$/u,"");if(n[o])s.type.endsWith("[]")>0?a[t]=e[t].map((e=>h(e,o,n))):a[t]=h(e[t],s.type,n);else{(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),r=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),a=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),s=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`)))),o=Array.from(new Array(80)).map(((e,t)=>a.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...s.flat(),...o.flat()]})().includes(o)&&(a[t]=e[t])}})),a};n.sanitizeMessage=h}}},{package:"$root$"}],[6761,{"../../../helpers/constants/design-system":6631,"../../../helpers/utils/fetch-with-cache":6652,"@babel/runtime/helpers/interopRequireDefault":199,"eth-rpc-errors":2371},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("eth-rpc-errors"),s=e("../../../helpers/constants/design-system"),o=r(e("../../../helpers/utils/fetch-with-cache"));const i={id:"UNRECOGNIZED_CHAIN",severity:s.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChain",variables:[{element:"a",key:"unrecognizedChainLink",props:{href:"https://metamask.zendesk.com/hc/en-us/articles/360057142392",target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChainLinkText"}}}]}}}},c={id:"INVALID_CHAIN",severity:s.SEVERITIES.DANGER,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChain",variables:[{element:"a",key:"mismatchedChainLink",props:{href:"https://metamask.zendesk.com/hc/en-us/articles/360057142392",target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainLinkText"}}}]}}}};var u={getAlerts:async function(e){const t=[],n=(await(0,o.default)("https://chainid.network/chains.json")).find((t=>t.chainId===parseInt(e.requestData.chainId,16)));let r=Boolean(n);if(n){var a,s;18===(null===(a=n.nativeCurrency)||void 0===a?void 0:a.decimals)&&n.name.toLowerCase()===e.requestData.chainName.toLowerCase()&&(null===(s=n.nativeCurrency)||void 0===s?void 0:s.symbol)===e.requestData.ticker||(r=!1);const{origin:t}=new URL(e.requestData.rpcUrl);n.rpc.map((e=>new URL(e).origin)).includes(t)||(r=!1)}return n?r||t.push(c):t.push(i),t},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("addEthereumChainConfirmationTitle"),props:{variant:s.TYPOGRAPHY.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"description",children:t("addEthereumChainConfirmationDescription"),props:{variant:s.TYPOGRAPHY.H7,align:"center",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"only-add-networks-you-trust",children:[{element:"b",key:"bolded-text",children:`${t("addEthereumChainConfirmationRisks")} `},{element:"MetaMaskTranslation",key:"learn-about-risks",props:{translationKey:"addEthereumChainConfirmationRisksLearnMore",variables:[{element:"a",children:t("addEthereumChainConfirmationRisksLearnMoreLink"),key:"addEthereumChainConfirmationRisksLearnMoreLink",props:{href:"https://metamask.zendesk.com/hc/en-us/articles/4404424659995",target:"__blank"}}]}}],props:{variant:s.TYPOGRAPHY.H7,align:"center",boxProps:{margin:0}}},{element:"TruncatedDefinitionList",key:"network-details",props:{title:t("networkDetails"),tooltips:{[t("networkName")]:t("networkNameDefinition"),[t("networkURL")]:t("networkURLDefinition"),[t("chainId")]:t("chainIdDefinition"),[t("currencySymbol")]:t("currencySymbolDefinition"),[t("blockExplorerUrl")]:t("blockExplorerUrlDefinition")},dictionary:{[t("networkName")]:e.requestData.chainName,[t("networkURL")]:e.requestData.rpcUrl,[t("chainId")]:parseInt(e.requestData.chainId,16),[t("currencySymbol")]:e.requestData.ticker,[t("blockExplorerUrl")]:e.requestData.blockExplorerUrl},prefaceKeys:[t("networkName"),t("networkURL"),t("chainId")]}}],approvalText:t("approveButtonText"),cancelText:t("cancel"),onApprove:()=>n.resolvePendingApproval(e.id,e.requestData),onCancel:()=>n.rejectPendingApproval(e.id,a.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=u}}},{package:"$root$"}],[6762,{"../../../../shared/constants/app":6105,"../../../store/actions":7036,"./add-ethereum-chain":6761,"./switch-ethereum-chain":6763,"@babel/runtime/helpers/interopRequireDefault":199,lodash:5091},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.TEMPLATED_CONFIRMATION_MESSAGE_TYPES=void 0,n.getTemplateAlerts=async function(e){var t;const n=null===(t=u[e.type])||void 0===t?void 0:t.getAlerts,r=n?await n(e):[];if(!Array.isArray(r))throw new Error(`Template alerts must be an array, received: ${r}`);if(r.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${r}`);return r},n.getTemplateState=async function(e){var t,n;const r=null!==(t=null===(n=u[e.type])||void 0===n?void 0:n.getState)&&void 0!==t?t:E,a=await r(e);if("object"!=typeof a||Array.isArray(a))throw new Error(`Template state must be an object, received: ${a}`);if(null===a||a===undefined)return{};return a},n.getTemplateValues=function(e,t,n){var r;const s=null===(r=u[e.type])||void 0===r?void 0:r.getValues;if(!s)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const i=function(e){return{rejectPendingApproval:(...t)=>e((0,o.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,o.resolvePendingApproval)(...t))}}(n),c=s(e,t,i),l=(0,a.omit)(c,d),E=(0,a.pick)(c,d);if(l.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(l)}`);return E};var a=e("lodash"),s=e("../../../../shared/constants/app"),o=e("../../../store/actions"),i=r(e("./add-ethereum-chain")),c=r(e("./switch-ethereum-chain"));const u={[s.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:i.default,[s.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:c.default},l=Object.keys(u);n.TEMPLATED_CONFIRMATION_MESSAGE_TYPES=l;const d=["content","approvalText","cancelText","onApprove","onCancel","networkDisplay"];async function E(){return{}}}}},{package:"$root$"}],[6763,{"../../../helpers/constants/design-system":6631,"eth-rpc-errors":2371},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),a=e("../../../helpers/constants/design-system");const s={id:"PENDING_TX_DROP_NOTICE",severity:a.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};var o={getAlerts:async function(){return[s]},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:a.TYPOGRAPHY.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:a.TYPOGRAPHY.H7,color:a.COLORS.TEXT_ALTERNATIVE,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"Box",key:"status-box",props:{justifyContent:a.JUSTIFY_CONTENT.CENTER},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{newNetwork:{chainId:e.requestData.chainId,name:e.requestData.nickname}}}}],approvalText:t("switchNetwork"),cancelText:t("cancel"),onApprove:()=>n.resolvePendingApproval(e.id,e.requestData),onCancel:()=>n.rejectPendingApproval(e.id,r.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=o}}},{package:"$root$"}],[6905,{"../../../app/scripts/lib/util":83,"../../../shared/modules/conversion.utils":6117},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE=n.REQUIRED_ERROR=n.NEGATIVE_ETH_ERROR=n.MIN_GAS_TOTAL=n.MIN_GAS_PRICE_HEX=n.MIN_GAS_PRICE_GWEI=n.MIN_GAS_PRICE_DEC=n.MIN_GAS_LIMIT_HEX=n.MIN_GAS_LIMIT_DEC=n.MAX_GAS_LIMIT_DEC=n.KNOWN_RECIPIENT_ADDRESS_WARNING=n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR=n.INVALID_RECIPIENT_ADDRESS_ERROR=n.INSUFFICIENT_TOKENS_ERROR=n.INSUFFICIENT_FUNDS_ERROR=n.HIGH_FEE_WARNING_MULTIPLIER=n.ENS_UNKNOWN_ERROR=n.ENS_REGISTRATION_ERROR=n.ENS_NO_ADDRESS_FOR_NAME=n.ENS_NOT_SUPPORTED_ON_NETWORK=n.ENS_NOT_FOUND_ON_NETWORK=n.ENS_ILLEGAL_CHARACTER=n.CONTRACT_ADDRESS_ERROR=n.CONFUSING_ENS_ERROR=n.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE=void 0;var r=e("../../../shared/modules/conversion.utils"),a=e("../../../app/scripts/lib/util");n.MIN_GAS_PRICE_DEC="0";const s=parseInt("0",10).toString(16);n.MIN_GAS_PRICE_HEX=s;const o="21000";n.MIN_GAS_LIMIT_DEC=o;n.MAX_GAS_LIMIT_DEC="7920027";const i=parseInt(o,10).toString(16);n.MIN_GAS_LIMIT_HEX=i;n.HIGH_FEE_WARNING_MULTIPLIER=1.5;const c=(0,a.addHexPrefix)((0,r.conversionUtil)(s,{fromDenomination:"WEI",toDenomination:"GWEI",fromNumericBase:"hex",toNumericBase:"hex",numberOfDecimals:1}));n.MIN_GAS_PRICE_GWEI=c;const u=(0,r.multiplyCurrencies)(i,s,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:16});n.MIN_GAS_TOTAL=u;n.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb";n.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd";n.INSUFFICIENT_FUNDS_ERROR="insufficientFunds";n.INSUFFICIENT_TOKENS_ERROR="insufficientTokens";n.NEGATIVE_ETH_ERROR="negativeETH";n.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient";n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR="invalidAddressRecipientNotEthNetwork";n.REQUIRED_ERROR="required";n.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient";n.CONTRACT_ADDRESS_ERROR="contractAddressError";n.CONFUSING_ENS_ERROR="confusingEnsDomain";n.ENS_NO_ADDRESS_FOR_NAME="noAddressForName";n.ENS_NOT_FOUND_ON_NETWORK="ensNotFoundOnCurrentNetwork";n.ENS_NOT_SUPPORTED_ON_NETWORK="ensNotSupportedOnNetwork";n.ENS_ILLEGAL_CHARACTER="ensIllegalCharacter";n.ENS_UNKNOWN_ERROR="ensUnknownError";n.ENS_REGISTRATION_ERROR="ensRegistrationError"}}},{package:"$root$"}],[6907,{"../../../app/scripts/lib/util":83,"../../../shared/modules/conversion.utils":6117,"../../helpers/constants/common":6629,"../../helpers/utils/token-util":6666,"./send.constants":6905,"@babel/runtime/helpers/interopRequireDefault":199,"ethereumjs-abi":2417},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const r=(0,s.multiplyCurrencies)(t,.9,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10,numberOfDecimals:"0"}),a=(0,s.multiplyCurrencies)(e,n,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10,numberOfDecimals:"0"});if((0,s.conversionGreaterThan)({value:e,fromNumericBase:"hex"},{value:r,fromNumericBase:"hex"}))return e;if((0,s.conversionLessThan)({value:a,fromNumericBase:"hex"},{value:r,fromNumericBase:"hex"}))return a;return r},n.calcGasTotal=function(e="0",t="0"){return(0,s.multiplyCurrencies)(e,t,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:16})},n.ellipsify=function(e,t=6,n=4){return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC20TransferData=l,n.generateERC721TransferData=d,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:r}){switch(e.standard){case c.ERC721:return d({toAddress:n,fromAddress:t,tokenId:e.tokenId});case c.ERC20:default:return l({toAddress:n,amount:r,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:r="0x0",primaryCurrency:a}){const o=(0,s.addCurrencies)(e,r,{aBase:16,bBase:16,toNumericBase:"hex"});return(0,s.conversionGTE)({value:t,fromNumericBase:"hex",fromCurrency:a,conversionRate:n},{value:o,fromNumericBase:"hex",conversionRate:n,fromCurrency:a})},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const r=(0,s.conversionUtil)(e,{fromNumericBase:"hex"});return(0,s.conversionGTE)({value:t,fromNumericBase:"hex"},{value:(0,o.calcTokenAmount)(r,n)})};var a=r(e("ethereumjs-abi")),s=e("../../../shared/modules/conversion.utils"),o=e("../../helpers/utils/token-util"),i=e("../../../app/scripts/lib/util"),c=e("../../helpers/constants/common"),u=e("./send.constants");function l({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?u.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call(a.default.rawEncode(["address","uint256"],[e,(0,i.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function d({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?u.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call(a.default.rawEncode(["address","address","uint256"],[t,e,n]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$"}],[7018,{"../../../shared/constants/network":6110,"../../../shared/constants/swaps":6112,"../../../shared/constants/time":6113,"../../../shared/constants/transaction":6114,"../../../shared/modules/conversion.utils":6117,"../../../shared/modules/hexstring-utils":6120,"../../../shared/modules/swaps.utils":6125,"../../helpers/utils/confirm-tx.util":6650,"../../helpers/utils/conversions.util":6651,"../../helpers/utils/fetch-with-cache":6652,"../../helpers/utils/token-util":6666,"../../helpers/utils/util":6669,"../send/send.utils":6907,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,"bignumber.js":1875,"human-standard-token-abi":4300,loglevel:5104},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=void 0,n.fetchAggregatorMetadata=async function(e){const t=P("aggregatorMetadata",e),n=await(0,S.default)(t,{method:"GET",headers:y},{cacheRefreshTime:I}),r={};for(const e in n)G(L,n[e],t)&&(r[e]=n[e]);return r},n.fetchSwapsFeatureFlags=async function(){const e=c.SWAPS_API_V2_BASE_URL;return await(0,S.default)(`${e}/featureFlags`,{method:"GET",headers:y},{cacheRefreshTime:6e5})},n.fetchSwapsGasPrices=async function(e){const t=P("gasPrices",e),n=await(0,S.default)(t,{method:"GET",headers:y},{cacheRefreshTime:3e4});if(!G(U,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:r,ProposeGasPrice:a,FastGasPrice:s}=n;return{safeLow:r,average:a,fast:s}},n.fetchToken=async function(e,t){const n=P("token",t);return await(0,S.default)(`${n}?address=${e}`,{method:"GET",headers:y},{cacheRefreshTime:I})},n.fetchTokenBalance=async function(e,t){const n=global.eth.contract(i.default).at(e),r=n?n.balanceOf(t):Promise.resolve();return await r},n.fetchTokenPrice=async function(e){var t;const n=`contract_addresses=${e}&vs_currencies=eth`,r=await(0,S.default)(`https://api.coingecko.com/api/v3/simple/token_price/ethereum?${n}`,{method:"GET"},{cacheRefreshTime:6e4});return r&&(null===(t=r[e])||void 0===t?void 0:t.eth)},n.fetchTokens=async function(e){const t=P("tokens",e),n=await(0,S.default)(t,{method:"GET",headers:y},{cacheRefreshTime:I});return[c.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e],...n.filter((n=>G(D,n,t)&&!((0,l.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,l.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=P("topAssets",e),n=await(0,S.default)(t,{method:"GET",headers:y},{cacheRefreshTime:I});return n.reduce(((e,n,r)=>G(k,n,t)?N(N({},e),{},{[n.address]:{index:String(r)}}):e),{})},n.fetchTradesInfo=async function({slippage:e,sourceToken:t,sourceDecimals:n,destinationToken:r,value:a,fromAddress:s,exchangeList:o},{chainId:i}){const c={destinationToken:r,sourceToken:t,sourceAmount:(0,T.calcTokenValue)(a,n).toString(10),slippage:e,timeout:10*E.SECOND,walletAddress:s};o&&(c.exchangeList=o);F(i,t,r)&&(c.enableDirectWrapping=!0);const u=new URLSearchParams(c).toString(),l=`${P("trade",i)}${u}`,d=await(0,S.default)(l,{method:"GET",headers:y},{cacheRefreshTime:0,timeout:15*E.SECOND});return d.reduce(((t,n)=>{if(n.trade&&!n.error&&G(w,n,l)){const r=(0,m.constructTxParams)({to:n.trade.to,from:n.trade.from,data:n.trade.data,amount:(0,f.decimalToHex)(n.trade.value),gas:(0,f.decimalToHex)(n.maxGas)});let{approvalNeeded:a}=n;return a&&(a=(0,m.constructTxParams)(N({},a))),N(N({},t),{},{[n.aggregator]:N(N({},n),{},{slippage:e,trade:r,approvalNeeded:a})})}return t}),{})},n.formatSwapsValueForDisplay=B,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=n.getBaseApi=void 0,n.getRenderableNetworkFeesForQuote=H,n.getSwapsLivenessForNetwork=void 0,n.getSwapsTokensReceivedFromTxMeta=function(e,t,n,r,a,s,i){var c;const d=null==t?void 0:t.txReceipt,E=(null==t||null===(c=t.txReceipt)||void 0===c?void 0:c.type)===u.TRANSACTION_ENVELOPE_TYPES.FEE_MARKET;if((0,l.isSwapsDefaultTokenSymbol)(e,i)){if(!(d&&t&&t.postTxBalance&&t.preTxBalance))return null;let e="0x0";s&&s.txReceipt&&(e=(0,A.calcGasTotal)(s.txReceipt.gasUsed,E?s.txReceipt.effectiveGasPrice:s.txParams.gasPrice));const n=(0,A.calcGasTotal)(d.gasUsed,E?d.effectiveGasPrice:t.txParams.gasPrice),r=new o.default(n,16).plus(e,16).toString(16),a=(0,p.subtractCurrencies)(t.preTxBalance,r,{aBase:16,bBase:16,toNumericBase:"hex"});return(0,p.subtractCurrencies)(t.postTxBalance,a,{aBase:16,bBase:16,fromDenomination:"WEI",toDenomination:"ETH",toNumericBase:"dec",numberOfDecimals:6})}const f=null==d?void 0:d.logs;if(f&&"0x0"!==(null==d?void 0:d.status)){const e=f.find((e=>{const t=e.topics&&"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"===e.topics[0],a=e.address===n,s=e.topics&&e.topics[2]&&e.topics[2].match(r.slice(2));return t&&a&&s}));return e?(0,m.toPrecisionWithoutTrailingZeros)((0,T.calcTokenAmount)(e.data,a).toString(10),6):""}return null},n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=void 0,n.quotesToRenderableData=function(e,t,n,r,a,s,i,c,u){return Object.values(e).map((e=>{const{destinationAmount:d=0,sourceAmount:E=0,sourceTokenInfo:m,destinationTokenInfo:p,slippage:_,aggType:S,aggregator:A,gasEstimateWithRefund:g,averageGas:O,fee:N,trade:I}=e,R=(0,T.calcTokenAmount)(E,m.decimals).toString(10),y=(0,T.calcTokenAmount)(d,p.decimals).toPrecision(8);let h=null,P=null,C=null,v=null;({feeInFiat:h,feeInEth:P,rawNetworkFees:C,rawEthFee:v}=H({tradeGas:g||(0,f.decimalToHex)(O||8e5),approveGas:a,gasPrice:t,currentCurrency:r,conversionRate:n,tradeValue:I.value,sourceSymbol:m.symbol,sourceAmount:E,chainId:i})),c&&({feeInFiat:h,feeInEth:P}=x({chainId:i,currentCurrency:r,conversionRate:n,nativeCurrencySymbol:u,estimatedFeeInWeiDec:c.feeEstimate}));const b=new o.default(100-_).div(100),w=new o.default(y).times(b).toFixed(6),D=s[p.address],k=(0,l.isSwapsDefaultTokenSymbol)(p.symbol,i)?(0,T.calcTokenAmount)(d,p.decimals).minus(v,10):new o.default(D||0,10).times((0,T.calcTokenAmount)(d,p.decimals),10).minus(v,10);let L,M=_;return"AGG"===S?L="swapAggregator":"RFQ"===S?(L="swapRequestForQuotation",M=0):L="DEX"===S?"swapDecentralizedExchange":"CONTRACT"===S?"swapDirectContract":"swapUnknown",{aggId:A,amountReceiving:`${y} ${p.symbol}`,destinationTokenDecimals:p.decimals,destinationTokenSymbol:p.symbol,destinationTokenValue:B(y),destinationIconUrl:p.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:L,feeInEth:P,detailedNetworkFees:`${P} (${h})`,networkFees:h,quoteSource:S,rawNetworkFees:C,slippage:M,sourceTokenDecimals:m.decimals,sourceTokenSymbol:m.symbol,sourceTokenValue:R,sourceTokenIconUrl:m.iconUrl,ethValueOfTrade:k,minimumAmountReceived:w,metaMaskFee:N}}))},n.stxErrorTypes=n.showRemainingTimeInMinAndSec=n.shouldEnableDirectWrapping=void 0;var a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("loglevel")),o=r(e("bignumber.js")),i=r(e("human-standard-token-abi")),c=e("../../../shared/constants/swaps"),u=e("../../../shared/constants/transaction"),l=e("../../../shared/modules/swaps.utils"),d=e("../../../shared/constants/network"),E=e("../../../shared/constants/time"),T=e("../../helpers/utils/token-util"),m=e("../../helpers/utils/util"),f=e("../../helpers/utils/conversions.util"),p=e("../../../shared/modules/conversion.utils"),_=e("../../helpers/utils/confirm-tx.util"),S=r(e("../../helpers/utils/fetch-with-cache")),A=e("../send/send.utils"),g=e("../../../shared/modules/hexstring-utils");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I=3e5,R="usd",y={"X-Client-Id":c.SWAPS_CLIENT_ID},h=[d.RINKEBY_CHAIN_ID,d.LOCALHOST_CHAIN_ID],P=function(e,t=d.MAINNET_CHAIN_ID){const n=((e,t)=>{const n=c.SWAPS_API_V2_BASE_URL,r=c.GAS_API_BASE_URL;if(["refreshTime"].includes(e))return n;const a=t&&parseInt(t,16);return["gasPrices"].includes(e)?`${r}/networks/${a}`:`${n}/networks/${a}`})(e,t=h.includes(t)?d.MAINNET_CHAIN_ID:t),r=t&&parseInt(t,16);if(!n)throw new Error(`Swaps API calls are disabled for chainId: ${t}`);switch(e){case"trade":return`${n}/trades?`;case"tokens":return`${n}/tokens`;case"token":return`${n}/token`;case"topAssets":return`${n}/topAssets`;case"aggregatorMetadata":return`${n}/aggregatorMetadata`;case"gasPrices":return`${n}/gasPrices`;case"network":return`${c.SWAPS_API_V2_BASE_URL}/networks/${r}`;default:throw new Error("getBaseApi requires an api call type")}};n.getBaseApi=P;const C=e=>Boolean(null==e?void 0:e.match(/^0x[a-f0-9]+$/u)),v=e=>Boolean(null==e?void 0:e.length),b=e=>v(e)&&Boolean(e.match(/^\d+$/u)),w=[{property:"trade",type:"object",validator:e=>e&&C(e.data)&&(0,g.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,g.isValidHexAddress)(e.from,{allowNonPrefixed:!1})&&v(e.value)},{property:"approvalNeeded",type:"object",validator:e=>null===e||e&&C(e.data)&&(0,g.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,g.isValidHexAddress)(e.from,{allowNonPrefixed:!1})},{property:"sourceAmount",type:"string",validator:b},{property:"destinationAmount",type:"string",validator:b},{property:"sourceToken",type:"string",validator:e=>(0,g.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"destinationToken",type:"string",validator:e=>(0,g.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"aggregator",type:"string",validator:v},{property:"aggType",type:"string",validator:v},{property:"error",type:"object",validator:e=>null===e||"object"==typeof e},{property:"averageGas",type:"number"},{property:"maxGas",type:"number"},{property:"gasEstimate",type:"number|undefined",validator:e=>e===undefined||e>0},{property:"fee",type:"number"}],D=[{property:"address",type:"string",validator:e=>(0,g.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>v(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],k=D.slice(0,2),L=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:v},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],M=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),U=[{property:"SafeGasPrice",type:"string",validator:M},{property:"ProposeGasPrice",type:"string",validator:M},{property:"FastGasPrice",type:"string",validator:M}];function G(e,t,n){return e.every((({property:e,type:r,validator:a})=>{const o=r.split("|").some((n=>typeof t[e]===n))&&(!a||a(t[e]));return o||s.default.error(`response to GET ${n} invalid for property ${e}; value was:`,t[e],"| type was: ",typeof t[e]),o}))}const F=(e,t,n)=>{var r;if(!t||!n)return!1;const a=c.SWAPS_WRAPPED_TOKENS_ADDRESSES[e],s=null===(r=c.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===r?void 0:r.address,o=t.toLowerCase(),i=n.toLowerCase();return o===a&&i===s||o===s&&i===a};n.shouldEnableDirectWrapping=F;const x=({chainId:e,currentCurrency:t,conversionRate:n,nativeCurrencySymbol:r,feeInWeiDec:a})=>{const s=(0,f.decimalToHex)(a),o=(0,f.getValueFromWeiHex)({value:s,toDenomination:d.ETH_SYMBOL,numberOfDecimals:5}),i=(0,f.getValueFromWeiHex)({value:s,toCurrency:t,conversionRate:n,numberOfDecimals:2});let u;u=t===R?i:(0,f.getValueFromWeiHex)({value:s,toCurrency:R,conversionRate:n,numberOfDecimals:2});return{feeInUsd:u,feeInFiat:(0,_.formatCurrency)(i,t),feeInEth:`${o} ${r||c.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].symbol}`,rawEthFee:o}};function H({tradeGas:e,approveGas:t,gasPrice:n,currentCurrency:r,conversionRate:a,tradeValue:s,sourceSymbol:i,sourceAmount:u,chainId:d,nativeCurrencySymbol:E}){const T=new o.default(e||"0x0",16).plus(t||"0x0",16).toString(16),m=(0,A.calcGasTotal)(T,n),p=new o.default(s,16).minus((0,l.isSwapsDefaultTokenSymbol)(i,d)?u:0,10).toString(16),S=new o.default(m,16).plus(p,16).toString(16),g=(0,f.getValueFromWeiHex)({value:S,toDenomination:"ETH",numberOfDecimals:5}),O=(0,f.getValueFromWeiHex)({value:S,toCurrency:r,conversionRate:a,numberOfDecimals:2}),N=(0,_.formatCurrency)(O,r);let I;I=r===R?O:(0,f.getValueFromWeiHex)({value:S,toCurrency:R,conversionRate:a,numberOfDecimals:2});return{rawNetworkFees:O,feeInUsd:I,rawEthFee:g,feeInFiat:N,feeInEth:`${g} ${E||c.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[d].symbol}`,nonGasFee:p}}function B(e){let t=(0,m.toPrecisionWithoutTrailingZeros)(e,12);return t.match(/e[+-]/u)&&(t=new o.default(t).toFixed()),t}n.getFeeForSmartTransaction=x;n.isContractAddressValid=(e,t=d.MAINNET_CHAIN_ID)=>!(!e||!c.ALLOWED_CONTRACT_ADDRESSES[t])&&c.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const W=e=>{switch(e){case d.MAINNET_CHAIN_ID:return c.ETHEREUM;case d.BSC_CHAIN_ID:return c.BSC;case d.POLYGON_CHAIN_ID:return c.POLYGON;case d.RINKEBY_CHAIN_ID:return c.RINKEBY;case d.AVALANCHE_CHAIN_ID:return c.AVALANCHE;default:return""}};n.getNetworkNameByChainId=W;n.getSwapsLivenessForNetwork=(e={},t)=>{const n=W(t);if([d.LOCALHOST_CHAIN_ID,d.RINKEBY_CHAIN_ID].includes(t))return{swapsFeatureIsLive:!0};if(!e[n])return{swapsFeatureIsLive:!1};return e[n].extension_active?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:e[n].fallback_to_v1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};const j={UNAVAILABLE:"unavailable",NOT_ENOUGH_FUNDS:"not_enough_funds",REGULAR_TX_PENDING:"regular_tx_pending"};n.stxErrorTypes=j;n.getTranslatedStxErrorMessage=(e,t)=>t(e===j.NOT_ENOUGH_FUNDS?"stxErrorNotEnoughFunds":"stxErrorUnavailable");n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"$root$"}],[7027,{".":7030,"../../shared/constants/gas":6106,"../../shared/constants/transaction":6114,"../../shared/modules/gas.utils":6119,"../../shared/modules/string-utils":6124,"../../shared/modules/transaction.utils":6126,"../ducks/metamask/metamask":6624,"../helpers/utils/confirm-tx.util":6650,"../helpers/utils/conversions.util":6651,"../helpers/utils/token-util":6666,"../helpers/utils/transactions.util":6667,"../helpers/utils/tx-helper":6668,"./custom-gas":7028,"./selectors":7033,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,reselect:5651},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedTransactionsCountSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.sendTokenTokenAmountAndToAddressSelector=n.currentCurrencySelector=n.conversionRateSelector=n.contractExchangeRateSelector=void 0;var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("reselect"),o=r(e("../helpers/utils/tx-helper")),i=e("../helpers/utils/token-util"),c=e("../helpers/utils/confirm-tx.util"),u=e("../helpers/utils/transactions.util"),l=e("../../shared/modules/transaction.utils"),d=e("../ducks/metamask/metamask"),E=e("../../shared/constants/transaction"),T=e("../helpers/utils/conversions.util"),m=e("../../shared/constants/gas"),f=e("../../shared/modules/gas.utils"),p=e("../../shared/modules/string-utils"),_=e("./custom-gas"),S=e("./selectors"),A=e(".");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const N=e=>e.metamask.unapprovedTxs,I=e=>e.metamask.unapprovedMsgs,R=e=>e.metamask.unapprovedPersonalMsgs,y=e=>e.metamask.unapprovedDecryptMsgs,h=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,P=e=>e.metamask.unapprovedTypedMessages,C=(0,s.createSelector)(N,I,R,y,h,P,S.deprecatedGetCurrentNetworkId,S.getCurrentChainId,((e={},t={},n={},r={},a={},s={},i,c)=>(0,o.default)(e,t,n,r,a,s,i,c)||[]));n.unconfirmedTransactionsListSelector=C;const v=(0,s.createSelector)(N,I,R,y,h,P,S.deprecatedGetCurrentNetworkId,S.getCurrentChainId,((e={},t={},n={},r={},a={},s={},o,i)=>{const c=Object.keys(e).reduce(((t,n)=>{const r=O({},t);return(0,l.transactionMatchesNetwork)(e[n],i,o)&&(r[n]=e[n]),r}),{});return O(O(O(O(O(O({},c),t),n),r),a),s)}));n.unconfirmedTransactionsHashSelector=v;const b=(0,s.createSelector)(N,(e=>e.metamask.unapprovedMsgCount),(e=>e.metamask.unapprovedPersonalMsgCount),(e=>e.metamask.unapprovedDecryptMsgCount),(e=>e.metamask.unapprovedEncryptionPublicKeyMsgCount),(e=>e.metamask.unapprovedTypedMessagesCount),S.deprecatedGetCurrentNetworkId,S.getCurrentChainId,((e={},t=0,n=0,r=0,a=0,s=0,o,i)=>Object.keys(e).filter((t=>(0,l.transactionMatchesNetwork)(e[t],i,o))).length+s+t+n+r+a));n.unconfirmedTransactionsCountSelector=b;const w=e=>e.metamask.currentCurrency;n.currentCurrencySelector=w;const D=e=>e.metamask.conversionRate;n.conversionRateSelector=D;const k=e=>e.confirmTransaction.txData;n.txDataSelector=k;const L=(0,s.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),M=(0,s.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),U=(0,s.createSelector)(k,(e=>e&&e.txParams||{})),G=(0,s.createSelector)(U,(e=>e&&e.to));n.tokenAddressSelector=G;const F=(0,s.createSelector)(M,L,((e,t)=>{let n="",r="0";if(e&&e.length){n=e._to;let a=e._value.toString();t&&(a=(0,i.calcTokenAmount)(a,t).toFixed()),r=(0,c.roundExponential)(a)}return{toAddress:n,tokenAmount:r}}));n.sendTokenTokenAmountAndToAddressSelector=F;const x=(0,s.createSelector)((e=>e.metamask.contractExchangeRates),G,((e,t)=>e[Object.keys(e).find((e=>(0,p.isEqualCaseInsensitive)(e,t)))]));n.contractExchangeRateSelector=x;n.transactionFeeSelector=function(e,t){var n,r,a,s,o,i,l,p;const S=w(e),g=D(e),O=(0,d.getNativeCurrency)(e),N=(0,d.getGasFeeEstimates)(e)||{},I=(0,d.getGasEstimateType)(e),R=(0,A.checkNetworkAndAccountSupports1559)(e),y={gasLimit:null!==(n=null===(r=t.txParams)||void 0===r?void 0:r.gas)&&void 0!==n?n:"0x0"};if(R){var h;const{gasPrice:e="0"}=N,n=N[t.userFeeLevel]||{};if((null===(h=t.txParams)||void 0===h?void 0:h.type)===E.TRANSACTION_ENVELOPE_TYPES.LEGACY){var P,C;y.gasPrice=null!==(P=null===(C=t.txParams)||void 0===C?void 0:C.gasPrice)&&void 0!==P?P:(0,T.decGWEIToHexWEI)(e)}else{var v,b,k,L;const{suggestedMaxPriorityFeePerGas:r,suggestedMaxFeePerGas:a}=n;y.maxFeePerGas=null===(v=t.txParams)||void 0===v||!v.maxFeePerGas||t.userFeeLevel!==m.CUSTOM_GAS_ESTIMATE&&a?(0,T.decGWEIToHexWEI)(a||e):null===(b=t.txParams)||void 0===b?void 0:b.maxFeePerGas,y.maxPriorityFeePerGas=null===(k=t.txParams)||void 0===k||!k.maxPriorityFeePerGas||t.userFeeLevel!==m.CUSTOM_GAS_ESTIMATE&&r?r&&(0,T.decGWEIToHexWEI)(r)||y.maxFeePerGas:null===(L=t.txParams)||void 0===L?void 0:L.maxPriorityFeePerGas,y.baseFeePerGas=(0,T.decGWEIToHexWEI)(N.estimatedBaseFee)}}else switch(I){case m.GAS_ESTIMATE_TYPES.NONE:y.gasPrice=null!==(a=null===(s=t.txParams)||void 0===s?void 0:s.gasPrice)&&void 0!==a?a:"0x0";break;case m.GAS_ESTIMATE_TYPES.ETH_GASPRICE:y.gasPrice=null!==(o=null===(i=t.txParams)||void 0===i?void 0:i.gasPrice)&&void 0!==o?o:(0,T.decGWEIToHexWEI)(N.gasPrice);break;case m.GAS_ESTIMATE_TYPES.LEGACY:y.gasPrice=null!==(l=null===(p=t.txParams)||void 0===p?void 0:p.gasPrice)&&void 0!==l?l:(0,_.getAveragePriceEstimateInHexWEI)(e);case m.GAS_ESTIMATE_TYPES.FEE_MARKET:}const{txParams:{value:M="0x0"}={}}=t,U=(0,c.getValueFromWeiHex)({value:M,fromCurrency:O,toCurrency:S,conversionRate:g,numberOfDecimals:2}),G=(0,c.getValueFromWeiHex)({value:M,fromCurrency:O,toCurrency:O,conversionRate:g,numberOfDecimals:6}),F=(0,f.getMinimumGasTotalInHexWei)(y),x=(0,f.getMaximumGasTotalInHexWei)(y),H=(0,c.getTransactionFee)({value:F,fromCurrency:O,toCurrency:S,numberOfDecimals:2,conversionRate:g}),B=(0,c.getTransactionFee)({value:x,fromCurrency:O,toCurrency:S,numberOfDecimals:2,conversionRate:g}),W=(0,c.getTransactionFee)({value:F,fromCurrency:O,toCurrency:O,numberOfDecimals:6,conversionRate:g});return{hexTransactionAmount:M,fiatTransactionAmount:U,ethTransactionAmount:G,hexMinimumTransactionFee:F,fiatMinimumTransactionFee:H,hexMaximumTransactionFee:x,fiatMaximumTransactionFee:B,ethTransactionFee:W,fiatTransactionTotal:(0,c.addFiat)(H,U),ethTransactionTotal:(0,c.addEth)(W,G),hexTransactionTotal:(0,u.sumHexes)(M,F),gasEstimationObject:y}}}}},{package:"$root$"}],[7028,{".":7030,"../../app/scripts/lib/util":83,"../../shared/constants/gas":6106,"../../shared/modules/conversion.utils":6117,"../ducks/metamask/metamask":6624,"../ducks/send":6625,"../helpers/constants/common":6629,"../helpers/utils/confirm-tx.util":6650,"../helpers/utils/conversions.util":6651,"../helpers/utils/formatters":6653,"../pages/send/send.utils":6907},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=g,n.getAverageEstimate=S,n.getAveragePriceEstimateInHexWEI=function(e){return R(S(e))},n.getBasicGasEstimateLoadingStatus=p,n.getCustomGasLimit=m,n.getCustomGasPrice=f,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,r.addHexPrefix)(t||n))},n.getFastPriceEstimate=A,n.getFastPriceEstimateInHexWEI=function(e){return R(A(e)||"0x0")},n.getGasPriceInHexWei=R,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,d.getGasEstimateType)(e)===l.GAS_ESTIMATE_TYPES.ETH_GASPRICE&&!(0,T.getIsMainnet)(e)},n.getIsEthGasPriceFetched=function(e){return(0,d.getGasEstimateType)(e)===l.GAS_ESTIMATE_TYPES.ETH_GASPRICE&&(0,T.getIsMainnet)(e)},n.getIsGasEstimatesFetched=h,n.getNoGasPriceFetched=function(e){return(0,d.getGasEstimateType)(e)===l.GAS_ESTIMATE_TYPES.NONE},n.getRenderableBasicEstimateData=function(e,t){if(p(e))return[];const n=(0,T.getShouldShowFiat)(e),{conversionRate:r}=e.metamask,a=(0,T.getCurrentCurrency)(e),{slowEstimateData:s,averageEstimateData:o,fastEstimateData:i}=y((0,d.getGasFeeEstimates)(e),t,n,r,a);return[s,o,i]},n.getRenderableConvertedCurrencyFee=N,n.getRenderableEstimateDataForSmallButtonsFromGWEI=function(e){if(!1===h(e))return[];const t=(0,T.getShouldShowFiat)(e),n=e.send.gas.gasLimit||m(e)||l.GAS_LIMITS.SIMPLE,{conversionRate:r}=e.metamask,a=(0,T.getCurrentCurrency)(e),s=(0,d.getGasFeeEstimates)(e);return[{gasEstimateType:E.GAS_ESTIMATE_TYPES.SLOW,feeInSecondaryCurrency:t?N(s.low,n,a,r):"",feeInPrimaryCurrency:O(s.low,n,5),priceInHexWei:R(s.low)},{gasEstimateType:E.GAS_ESTIMATE_TYPES.AVERAGE,feeInSecondaryCurrency:t?N(s.medium,n,a,r):"",feeInPrimaryCurrency:O(s.medium,n,5),priceInHexWei:R(s.medium)},{gasEstimateType:E.GAS_ESTIMATE_TYPES.FAST,feeInSecondaryCurrency:t?N(s.high,n,a,r):"",feeInPrimaryCurrency:O(s.high,n,5),priceInHexWei:R(s.high)}]},n.getRenderableEthFee=O,n.getRenderableGasButtonData=y,n.getSafeLowEstimate=_,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,u.getGasPrice)(e):f(e),r=A(e);if(!n||!r)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{fromNumericBase:"dec",value:Math.floor(1.5*r)})},n.isCustomPriceSafe=function(e){const t=_(e),n=f(e);if(!n)return!0;if(!t)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{value:t,fromNumericBase:"dec"})},n.isCustomPriceSafeForCustomNetwork=function(e){const t=S(e),n=f(e);if(!n)return!0;if(!t)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{value:t,fromNumericBase:"dec"})},n.priceEstimateToWei=I;var r=e("../../app/scripts/lib/util"),a=e("../../shared/modules/conversion.utils"),s=e("../helpers/utils/confirm-tx.util"),o=e("../helpers/utils/conversions.util"),i=e("../helpers/utils/formatters"),c=e("../pages/send/send.utils"),u=e("../ducks/send"),l=e("../../shared/constants/gas"),d=e("../ducks/metamask/metamask"),E=e("../helpers/constants/common"),T=e(".");function m(e){return e.gas.customData.limit}function f(e){return e.gas.customData.price}function p(e){return!1===h(e)}function _(e){const t=(0,d.getGasFeeEstimates)(e);return(0,d.getGasEstimateType)(e)===l.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.low:null}function S(e){const t=(0,d.getGasFeeEstimates)(e);return(0,d.getGasEstimateType)(e)===l.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.medium:null}function A(e){const t=(0,d.getGasFeeEstimates)(e);return(0,d.getGasEstimateType)(e)===l.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.high:null}function g(e,t,n=9){return(0,a.conversionUtil)((0,c.calcGasTotal)(t,e),{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"GWEI",numberOfDecimals:n})}function O(e,t,n=9,r="ETH"){const s=g((0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"}),t,n);return(0,i.formatETHFee)(s,r)}function N(e,t,n,r){const i=g((0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"}),t),c=(0,o.decEthToConvertedCurrency)(i,n,r);return(0,s.formatCurrency)(c,n)}function I(e){return(0,a.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI",numberOfDecimals:9})}function R(e){const t=(0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"});return(0,r.addHexPrefix)(I(t))}function y(e,t,n,r,a,s){const{low:o,medium:i,high:c}=e;return{slowEstimateData:{gasEstimateType:E.GAS_ESTIMATE_TYPES.SLOW,feeInPrimaryCurrency:O(o,t,9,s),feeInSecondaryCurrency:n?N(o,t,a,r):"",priceInHexWei:R(o)},averageEstimateData:{gasEstimateType:E.GAS_ESTIMATE_TYPES.AVERAGE,feeInPrimaryCurrency:O(i,t,9,s),feeInSecondaryCurrency:n?N(i,t,a,r):"",priceInHexWei:R(i)},fastEstimateData:{gasEstimateType:E.GAS_ESTIMATE_TYPES.FAST,feeInPrimaryCurrency:O(c,t,9,s),feeInSecondaryCurrency:n?N(c,t,a,r):"",priceInHexWei:R(c)}}}function h(e){const t=(0,d.getGasEstimateType)(e);return!(0,d.isEIP1559Network)(e)&&t!==l.GAS_ESTIMATE_TYPES.NONE}}}},{package:"$root$"}],[7029,{"../helpers/constants/routes":6635},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstTimeFlowType=void 0,n.getFirstTimeFlowTypeRoute=function(e){const{firstTimeFlowType:t}=e.metamask;let n;n="create"===t?r.INITIALIZE_CREATE_PASSWORD_ROUTE:"import"===t?r.INITIALIZE_IMPORT_WITH_SEED_PHRASE_ROUTE:r.DEFAULT_ROUTE;return n},n.getOnboardingInitiator=void 0;var r=e("../helpers/constants/routes");n.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;n.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const n=Object.keys(t)[0];return{location:n,tabId:t[n]}}}}},{package:"$root$"}],[7030,{"./confirm-transaction":7027,"./custom-gas":7028,"./first-time-flow":7029,"./metametrics":7031,"./permissions":7032,"./selectors":7033,"./transactions":7034},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./confirm-transaction");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=e("./custom-gas");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=e("./first-time-flow");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=e("./metametrics");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./permissions");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./selectors");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=e("./transactions");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))}))}}},{package:"$root$"}],[7031,{reselect:5651},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectMatchingFragment=n.selectFragments=n.selectFragmentBySuccessEvent=n.selectFragmentById=void 0;var r=e("reselect");const a=e=>e.metamask.fragments;n.selectFragments=a;const s=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined));n.selectFragmentBySuccessEvent=s;const o=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));n.selectFragmentById=o;const i=(0,r.createSelector)(((e,t)=>s(e,t.fragmentOptions)),((e,t)=>o(e,t.existingId)),((e,t)=>null!=t?t:e));n.selectMatchingFragment=i}}},{package:"$root$"}],[7032,{".":7030,"../../shared/constants/permissions":6111,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.activeTabHasPermissions=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Boolean(Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},n.getAccountToConnectToActiveTab=function(e){const t=(0,o.getSelectedAddress)(e),n=d(e),{metamask:{identities:r}}=e,a=Object.keys(r).length;if(n.length&&n.length!==a&&-1===n.findIndex((e=>e===t)))return r[t];return undefined},n.getAddressConnectedSubjectMap=function(e){const t=(0,o.getSubjectMetadata)(e),n=E(e),r={};return Object.keys(n).forEach((e=>{const{iconUrl:a,name:s}=t[e]||{};n[e].forEach((t=>{const n=s||e;r[t]=r[t]?c(c({},r[t]),{},{[e]:{iconUrl:a,name:n}}):{[e]:{iconUrl:a,name:n}}}))})),r},n.getConnectedSubjectsForSelectedAddress=function(e){const{selectedAddress:t}=e.metamask,n=u(e),r=(0,o.getSubjectMetadata)(e),a=[];return Object.entries(n).forEach((([e,n])=>{if(!T(n).includes(t))return;const{extensionId:s,name:o,iconUrl:i}=r[e]||{};a.push({extensionId:s,origin:e,name:o,iconUrl:i})})),a},n.getFirstPermissionRequest=function(e){const t=p(e);return t&&t[0]?t[0]:null},n.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,n)=>(t[n].eth_accounts&&(e[n]=JSON.parse(JSON.stringify(t[n].eth_accounts))),e)),{})},n.getOrderedConnectedAccountsForActiveTab=function(e){var t,n;const{activeTab:r,metamask:{permissionHistory:a}}=e,s=null===(t=a[r.origin])||void 0===t||null===(n=t.eth_accounts)||void 0===n?void 0:n.accounts,i=(0,o.getMetaMaskAccountsOrdered)(e),u=d(e);return i.filter((e=>u.includes(e.address))).map((e=>c(c({},e),{},{lastActive:null==s?void 0:s[e.address]}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getPermissionSubjects=u,n.getPermissionsForActiveTab=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).map((e=>({key:e})))},n.getPermissionsRequests=p,n.getPermittedAccounts=l,n.getPermittedAccountsByOrigin=E,n.getPermittedAccountsForCurrentTab=d,n.getSubjectsWithPermission=function(e,t){const n=u(e),r=[];return Object.entries(n).forEach((([n,{permissions:a}])=>{if(a[t]){const{extensionId:t,name:a,iconUrl:s}=(0,o.getTargetSubjectMetadata)(e,n)||{};r.push({extensionId:t,origin:n,name:a,iconUrl:s})}})),r};var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("../../shared/constants/permissions"),o=e(".");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){return e.metamask.subjects||{}}function l(e,t){return f(m(function(e,t){var n;return t&&(null===(n=e.metamask.subjects)||void 0===n?void 0:n[t])}(e,t)))}function d(e){return l(e,(0,o.getOriginOfCurrentTab)(e))}function E(e){const t=u(e);return Object.keys(t).reduce(((e,n)=>{const r=T(t[n]);return r.length>0&&(e[n]=r),e}),{})}function T(e){return f(m(e))}function m(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function f(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===s.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function p(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_requestPermissions"===e)).map((({requestData:e})=>e))}}}},{package:"$root$"}],[7033,{"../../app/scripts/lib/util":83,"../../shared/constants/app":6105,"../../shared/constants/hardware-wallets":6107,"../../shared/constants/labels":6108,"../../shared/constants/network":6110,"../../shared/constants/swaps":6112,"../../shared/constants/time":6113,"../../shared/modules/hexstring-utils":6120,"../../shared/modules/string-utils":6124,"../ducks/app/app":6616,"../ducks/metamask/metamask":6624,"../helpers/utils/conversions.util":6651,"../helpers/utils/util":6669,"../pages/confirmation/templates":6762,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,_process:5342,reselect:5651},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.accountsWithSendEtherInfoSelector=H,n.checkNetworkAndAccountSupports1559=function(e){const t=(0,_.isEIP1559Network)(e);return t&&true},n.checkNetworkOrAccountNotSupports1559=function(e){const t=(0,_.isNotEIP1559Network)(e);return t||!1},n.deprecatedGetCurrentNetworkId=h,n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,_.isAddressLedger)(e,t),r=(0,_.getLedgerTransportType)(e)===c.LEDGER_TRANSPORT_TYPES.WEBHID,a=(0,S.getLedgerWebHidConnectedStatus)(e)!==c.WEBHID_CONNECTED_STATUSES.CONNECTED,s=(0,S.getLedgerTransportStatus)(e)!==c.TRANSPORT_STATES.VERIFIED;return n&&r&&(a||s)},n.getAccountType=function(e){const t=I(e);switch(t&&t.type){case c.KEYRING_TYPES.TREZOR:case c.KEYRING_TYPES.LEDGER:case c.KEYRING_TYPES.LATTICE:return"hardware";case"Simple Key Pair":return"imported";default:return"default"}},n.getAccountsWithLabels=function(e){return L(e).map((({address:e,name:t,balance:n})=>({address:e,addressLabel:`${t.length<l.TRUNCATED_NAME_CHAR_LIMIT?t:`${t.slice(0,l.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,E.shortenAddress)(e)})`,label:t,balance:n})))},n.getAddressBook=F,n.getAddressBookEntry=x,n.getAddressBookEntryOrAccountName=function(e,t){const n=x(e,t)||Object.values(e.metamask.identities).find((e=>(0,A.isEqualCaseInsensitive)(e.address,(0,f.toChecksumHexAddress)(t))));return n&&""!==n.name?n.name:t},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAppIsLoading=function(e){return e.appState.isLoading},n.getCurrentAccountWithSendEtherInfo=B,n.getCurrentChainId=N,n.getCurrentCurrency=function(e){return e.metamask.currentCurrency},n.getCurrentEthBalance=function(e){return B(e).balance},n.getCurrentKeyring=I,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},n.getDetectedTokensInCurrentNetwork=function(e){return e.metamask.detectedTokens},n.getEIP1559V2Enabled=function(e){return e.metamask.eip1559V2Enabled},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFrequentRpcListDetail=function(e){return e.metamask.frequentRpcListDetail},n.getGasIsLoading=function(e){return e.appState.gasIsLoading},n.getHardwareWalletType=function(e){const t=I(e);return y(e)?t.type:undefined},n.getInfuraBlocked=function(e){return Boolean(e.metamask.infuraBlocked)},n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAdvancedGasFeeDefault=function(e){const{advancedGasFee:t}=e.metamask;return Boolean(null==t?void 0:t.maxBaseFee)&&Boolean(null==t?void 0:t.priorityFee)},n.getIsBuyableChain=function(e){const t=N(e);return Object.keys(i.BUYABLE_CHAINS_MAP).includes(t)},n.getIsBuyableMoonPayChain=function(e){var t;const n=N(e);return Boolean(null===i.BUYABLE_CHAINS_MAP||void 0===i.BUYABLE_CHAINS_MAP||null===(t=i.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.moonPay)},n.getIsBuyableTransakChain=function(e){var t;const n=N(e);return Boolean(null===i.BUYABLE_CHAINS_MAP||void 0===i.BUYABLE_CHAINS_MAP||null===(t=i.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.transakCurrencies)},n.getIsMainnet=j,n.getIsMultiLayerFeeNetwork=function(e){return $(e)},n.getIsNonStandardEthChain=function(e){return!(j(e)||Y(e)||t.env.IN_TEST)},n.getIsOptimism=$,n.getIsSwapsChain=function(e){const t=N(e);return d.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)},n.getIsTestnet=Y,n.getIsTokenDetectionSupported=function(e){const t=N(e);return[i.MAINNET_CHAIN_ID,i.BSC_CHAIN_ID,i.POLYGON_CHAIN_ID,i.AVALANCHE_CHAIN_ID].includes(t)},n.getKnownMethodData=function(e,t){if(!t)return null;const n=(0,o.addHexPrefix)(t).slice(0,10),{knownMethodData:r}=e.metamask;return r&&r[n]},n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskAccountsRaw=D,n.getMetaMaskCachedBalances=k,n.getMetaMaskIdentities=w,n.getMetaMaskKeyrings=b,n.getMetricsNetworkIdentifier=function(e){const{provider:t}=e.metamask;return t.type===i.NETWORK_TYPE_RPC?t.rpcUrl:t.type},n.getNativeCurrencyImage=function(e){const t=(0,_.getNativeCurrency)(e).toUpperCase();return i.NATIVE_CURRENCY_TOKEN_IMAGE_MAP[t]},n.getNetworkIdentifier=function(e){const{metamask:{provider:{type:t,nickname:n,rpcUrl:r}}}=e;return n||r||t},n.getNetworkSupportsSettingGasFees=function(e){return!$(e)},n.getNetworksTabSelectedRpcUrl=function(e){return e.appState.networksTabSelectedRpcUrl},n.getNewCollectibleAddedMessage=function(e){return e.appState.newCollectibleAddedMessage},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAdded},n.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},n.getNumberOfAccounts=function(e){return Object.keys(e.metamask.accounts).length},n.getNumberOfTokens=function(e){const{tokens:t}=e.metamask;return t?t.length:0},n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOriginOfCurrentTab=function(e){return e.activeTab.origin},n.getParticipateInMetaMetrics=function(e){return Boolean(e.metamask.participateInMetaMetrics)},n.getPreferences=K,n.getProvider=function(e){return e.metamask.provider},n.getRpcPrefsForCurrentProvider=function(e){const{frequentRpcListDetail:t,provider:n}=e.metamask,r=t.find((e=>e.rpcUrl===n.rpcUrl)),{rpcPrefs:a={}}=r||{};return a},n.getSelectedAccount=G,n.getSelectedAccountCachedBalance=U,n.getSelectedAddress=C,n.getSelectedIdentity=v,n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=K(e);return t},n.getShouldShowFiat=function(e){const t=j(e),n=(0,_.getConversionRate)(e),{showFiatInTestnets:r}=K(e);return Boolean((t||r)&&n)},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,r=(new Date).getTime(),a=n?90*p.DAY:2*p.DAY;return r-t>=a},n.getShowTestNetworks=function(e){const{showTestNetworks:t}=K(e);return Boolean(t)},n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n=function(e){const t=I(e),n=(null==t?void 0:t.type)===c.KEYRING_TYPES.LEDGER,r=window.navigator.hid!==undefined,a=(0,_.getLedgerTransportType)(e)===c.LEDGER_TRANSPORT_TYPES.LIVE;return{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:r&&n&&a,9:j(e),10:Boolean(!1),11:Boolean(!1),12:!0}}(e),r=t.filter((e=>!e.isShown&&n[e.id]));return r.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSubjectMetadata=V,n.getSuggestedAssets=function(e){return e.metamask.suggestedAssets},n.getSwapsDefaultToken=function(e){const t=G(e),{balance:n}=t,r=N(e);return O(O({},d.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[r]),{},{balance:(0,T.hexToDecimal)(n),string:(0,T.getValueFromWeiHex)({value:n,numberOfDecimals:4,toDenomination:"ETH"})})},n.getTargetAccount=function(e,t){return P(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=H(e);return(0,E.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=function(e,t){return V(e)[t]},n.getTheme=function(e){return e.metamask.theme},n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTokenList=function(e){return e.metamask.tokenList},n.getTotalUnapprovedCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:n=0,unapprovedDecryptMsgCount:r=0,unapprovedEncryptionPublicKeyMsgCount:a=0,unapprovedTypedMessagesCount:s=0,pendingApprovalCount:o=0}=e.metamask;return t+n+r+a+s+function(e){const{unapprovedTxs:t={}}=e.metamask;return Object.keys(t).length}(e)+o+function(e){const{suggestedAssets:t=[]}=e.metamask;return t.length}(e)},n.getUSDConversionRate=function(e){return e.metamask.usdConversionRate},n.getUnapprovedConfirmations=W,n.getUnapprovedTemplatedConfirmations=function(e){return W(e).filter((e=>m.TEMPLATED_CONFIRMATION_MESSAGE_TYPES.includes(e.type)))},n.getUseCollectibleDetection=function(e){return Boolean(e.metamask.useCollectibleDetection)},n.getUseNonceField=function(e){return Boolean(e.metamask.useNonceField)},n.getUseTokenDetection=function(e){return Boolean(e.metamask.useTokenDetection)},n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.hasUnsignedQRHardwareMessage=function(e){const{type:t,msgParams:n}=e.confirmTransaction.txData;if(!t||!n)return!1;const{from:r}=n,{keyrings:a}=e.metamask,s=a.find((e=>e.type===c.KEYRING_TYPES.QR));if(!s)return!1;switch(t){case u.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA:case u.MESSAGE_TYPE.ETH_SIGN:case u.MESSAGE_TYPE.PERSONAL_SIGN:return Boolean(s.accounts.find((e=>e.toLowerCase()===r.toLowerCase())));default:return!1}},n.hasUnsignedQRHardwareTransaction=function(e){const{txParams:t}=e.confirmTransaction.txData;if(!t)return!1;const{from:n}=t,{keyrings:r}=e.metamask,a=r.find((e=>e.type===c.KEYRING_TYPES.QR));if(!a)return!1;return Boolean(a.accounts.find((e=>e.toLowerCase()===n.toLowerCase())))},n.isBalanceCached=function(e){const t=e.metamask.accounts[C(e)].balance,n=U(e);return Boolean(!t&&n)},n.isEIP1559Account=R,n.isHardwareWallet=y,n.isNetworkLoading=function(e){return"loading"===e.metamask.network};var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("reselect"),o=e("../../app/scripts/lib/util"),i=e("../../shared/constants/network"),c=e("../../shared/constants/hardware-wallets"),u=e("../../shared/constants/app"),l=e("../../shared/constants/labels"),d=e("../../shared/constants/swaps"),E=e("../helpers/utils/util"),T=e("../helpers/utils/conversions.util"),m=e("../pages/confirmation/templates"),f=e("../../shared/modules/hexstring-utils"),p=e("../../shared/constants/time"),_=e("../ducks/metamask/metamask"),S=e("../ducks/app/app"),A=e("../../shared/modules/string-utils");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){const{chainId:t}=e.metamask.provider;return t}function I(e){const t=v(e);if(!t)return null;return(0,_.findKeyringForAddress)(e,t.address)}function R(){return!0}function y(e){var t;const n=I(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function h(e){return e.metamask.network}const P=(0,s.createSelector)(D,k,((e,t)=>Object.entries(e).reduce(((e,[n,r])=>null===r.balance||r.balance===undefined?O(O({},e),{},{[n]:O(O({},r),{},{balance:t&&t[n]})}):O(O({},e),{},{[n]:r})),{})));function C(e){return e.metamask.selectedAddress}function v(e){const t=C(e),{identities:n}=e.metamask;return n[t]}function b(e){return e.metamask.keyrings}function w(e){return e.metamask.identities}function D(e){return e.metamask.accounts}function k(e){var t;const n=N(e),r=h(e);return null!==(t=e.metamask.cachedBalances[n])&&void 0!==t?t:e.metamask.cachedBalances[r]}n.getMetaMaskAccounts=P;const L=(0,s.createSelector)(b,w,P,((e,t,n)=>e.reduce(((e,t)=>e.concat(t.accounts)),[]).filter((e=>Boolean(t[e]))).map((e=>O(O({},t[e]),n[e])))));n.getMetaMaskAccountsOrdered=L;const M=(0,s.createSelector)(L,(e=>e.map((({address:e})=>e.toLowerCase()))));function U(e){const t=k(e),n=C(e);return t&&t[n]}function G(e){return P(e)[C(e)]}n.getMetaMaskAccountsConnected=M;function F(e){const t=N(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function x(e,t){return F(e).find((e=>(0,A.isEqualCaseInsensitive)(e.address,(0,f.toChecksumHexAddress)(t))))}function H(e){const t=P(e),n=w(e);return Object.entries(n).map((([e,n])=>O(O({},n),t[e])))}function B(e){const t=C(e),n=H(e);return(0,E.getAccountByAddress)(n,t)}function W(e){const{pendingApprovals:t}=e.metamask;return Object.values(t)}function j(e){return N(e)===i.MAINNET_CHAIN_ID}function Y(e){const t=N(e);return i.TEST_CHAINS.includes(t)}function K({metamask:e}){return e.preferences}function V(e){return e.metamask.subjectMetadata}function $(e){return N(e)===i.OPTIMISM_CHAIN_ID||N(e)===i.OPTIMISM_TESTNET_CHAIN_ID}n.getTokenExchangeRates=e=>e.metamask.contractExchangeRates;n.getTokenDetectionSupportNetworkByChainId=e=>{switch(N(e)){case i.MAINNET_CHAIN_ID:return i.MAINNET_DISPLAY_NAME;case i.BSC_CHAIN_ID:return i.BSC_DISPLAY_NAME;case i.POLYGON_CHAIN_ID:return i.POLYGON_DISPLAY_NAME;case i.AVALANCHE_CHAIN_ID:return i.AVALANCHE_DISPLAY_NAME;default:return""}}}).call(this)}).call(this,e("_process"))}}},{package:"$root$"}],[7034,{"../../shared/constants/transaction":6114,"../../shared/modules/transaction.utils":6126,"../helpers/constants/transactions":6637,"../helpers/utils/conversions.util":6651,"../helpers/utils/tx-helper":6668,"./selectors":7033,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,reselect:5651},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelector=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelector=n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelector=n.currentNetworkTxListSelector=void 0;var a=r(e("@babel/runtime/helpers/defineProperty")),s=e("reselect"),o=e("../helpers/constants/transactions"),i=e("../helpers/utils/conversions.util"),c=r(e("../helpers/utils/tx-helper")),u=e("../../shared/constants/transaction"),l=e("../../shared/modules/transaction.utils"),d=e("./selectors");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m=[u.TRANSACTION_TYPES.CANCEL,u.TRANSACTION_TYPES.RETRY],f=e=>{const{showIncomingTransactions:t}=e.metamask.featureFlags;if(!t)return[];const{network:n,provider:{chainId:r}}=e.metamask,a=(0,d.getSelectedAddress)(e);return Object.values(e.metamask.incomingTransactions).filter((e=>e.txParams.to===a&&(0,l.transactionMatchesNetwork)(e,r,n)))};n.incomingTxListSelector=f;const p=e=>e.metamask.unapprovedMsgs;n.unapprovedMsgsSelector=p;const _=e=>e.metamask.currentNetworkTxList;n.currentNetworkTxListSelector=_;const S=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=S;const A=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=A;const g=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=g;const O=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=O;const N=e=>{var t,n,r;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(n=t.smartTransactions)||void 0===n||null===(r=n[(0,d.getCurrentChainId)(e)])||void 0===r?void 0:r.filter((e=>!e.confirmed)).map((e=>{var t;return T(T({},e),{},{transactionType:u.TRANSACTION_TYPES.SMART,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?u.SMART_TRANSACTION_STATUSES.CANCELLED:e.status})}))};n.smartTransactionsListSelector=N;const I=(0,s.createSelector)(d.getSelectedAddress,_,N,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e)).concat(n)));n.selectedAddressTxListSelector=I;const R=(0,s.createSelector)(p,S,A,g,O,d.deprecatedGetCurrentNetworkId,d.getCurrentChainId,((e={},t={},n={},r={},a={},s,o)=>(0,c.default)({},e,t,n,r,a,s,o)||[]));n.unapprovedMessagesSelector=R;const y=(0,s.createSelector)(R,f,((e=[],t=[])=>e.concat(t)));n.transactionSubSelector=y;const h=(0,s.createSelector)(y,I,((e=[],t=[])=>t.concat(e).sort(((e,t)=>t.time-e.time))));n.transactionsSelector=h;const P=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let r=e.length;for(let t=0;t<e.length;t++){const a=e[t],{primaryTransaction:{time:s}={}}=a;if(s>n){r=t;break}}e.splice(r,0,t)},C=(0,s.createSelector)(h,((e=[])=>{const t=[],n=[],r=[],a={};e.forEach((e=>{const{txParams:{nonce:s}={},status:c,type:l,time:d,txReceipt:E}=e;if(void 0===s||l===u.TRANSACTION_TYPES.INCOMING){const r={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:s};l===u.TRANSACTION_TYPES.INCOMING?n.push(r):P(t,r)}else if(s in a){var T,f,p;const t=a[s];((e,t)=>{const{time:n}=t;let r=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){r=t;break}e.splice(r,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:r=0}={}}=t,i={isOnChainFailure:"0x0"===(null==E?void 0:E.status),isEphemeral:c===u.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null==E?void 0:E.status),isRetryOrCancel:m.includes(l),occurredAfterPrimary:d>n,hasPriorityStatus:c in o.PRIORITY_STATUS_HASH,isConfirmed:c===u.TRANSACTION_STATUSES.CONFIRMED,occurredBeforeInitial:d<r,isValidRetry:l===u.TRANSACTION_TYPES.RETRY&&(c in o.PRIORITY_STATUS_HASH||c===u.TRANSACTION_STATUSES.DROPPED),isValidCancel:l===u.TRANSACTION_TYPES.CANCEL&&(c in o.PRIORITY_STATUS_HASH||c===u.TRANSACTION_STATUSES.DROPPED)};i.eligibleForInitial=!i.isRetryOrCancel&&!i.isEphemeral,i.shouldBePrimary=i.isConfirmed||i.isOnChainFailure;const _={isEphemeral:t.primaryTransaction.status===u.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null===(T=t.primaryTransaction)||void 0===T||null===(f=T.txReceipt)||void 0===f?void 0:f.status)},S={isEphemeral:t.initialTransaction.status===u.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null===(p=t.initialTransaction.txReceipt)||void 0===p?void 0:p.status)};(i.shouldBePrimary||_.isEphemeral||i.occurredAfterPrimary&&i.hasPriorityStatus)&&(t.primaryTransaction=e),(i.occurredBeforeInitial&&i.eligibleForInitial||S.isEphemeral&&i.eligibleForInitial)&&(t.initialTransaction=e),i.isValidRetry&&(t.hasRetried=!0),i.isValidCancel&&(t.hasCancelled=!0)}else a[s]={nonce:s,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===u.TRANSACTION_TYPES.RETRY&&(e.status in o.PRIORITY_STATUS_HASH||e.status===u.TRANSACTION_STATUSES.DROPPED),hasCancelled:e.type===u.TRANSACTION_TYPES.CANCEL&&(e.status in o.PRIORITY_STATUS_HASH||e.status===u.TRANSACTION_STATUSES.DROPPED)},((e,t)=>{let n=e.length;for(let r=0;r<e.length;r++){const a=e[r];if(Number((0,i.hexToDecimal)(a))>Number((0,i.hexToDecimal)(t))){n=r;break}}e.splice(n,0,t)})(r,s)}));const s=r.map((e=>a[e]));return((e,t)=>{t.forEach((t=>{P(e,t)}))})(s,n),t.concat(s).map((e=>{var t;if(m.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!m.includes(e.type)));if(t)return T(T({},e),{},{initialTransaction:t})}return e}))}));n.nonceSortedTransactionsSelector=C;const v=(0,s.createSelector)(C,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in o.PENDING_STATUS_HASH))));n.nonceSortedPendingTransactionsSelector=v;const b=(0,s.createSelector)(C,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in o.PENDING_STATUS_HASH))).reverse()));n.nonceSortedCompletedTransactionsSelector=b;const w=(0,s.createSelector)(h,((e=[])=>e.filter((e=>e.status===u.TRANSACTION_STATUSES.SUBMITTED))));n.submittedPendingTransactionsSelector=w}}},{package:"$root$"}],[7035,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_TRANSACTION_PARAMS=n.UPDATE_PREFERENCES=n.UPDATE_METAMASK_STATE=n.UPDATE_FEATURE_FLAGS=n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_LOADING=n.SHOW_CONF_TX_PAGE=n.SHOW_ACCOUNT_DETAIL=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_USE_NONCEFIELD=n.SET_USE_BLOCKIE=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SELECTED_SETTINGS_RPC_URL=n.SET_RPC_TARGET=n.SET_REQUEST_ACCOUNT_TABS=n.SET_PROVIDER_TYPE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_NETWORK_ADDED=n.SET_NEW_COLLECTIBLE_ADDED_MESSAGE=n.SET_MOUSE_USER_STATE=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_IPFS_GATEWAY=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_CURRENT_WINDOW_TAB=n.SET_CURRENT_LOCALE=n.SET_ACCOUNT_LABEL=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.QR_CODE_DETECTED=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_TOKEN_PARAMS_STARTED=n.LOADING_TOKEN_PARAMS_FINISHED=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_LOADING=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.FORGOT_PASSWORD=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.BUY_ETH=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0;n.GO_HOME="GO_HOME";n.MODAL_OPEN="UI_MODAL_OPEN";n.MODAL_CLOSE="UI_MODAL_CLOSE";n.ALERT_OPEN="UI_ALERT_OPEN";n.ALERT_CLOSE="UI_ALERT_CLOSE";n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED";n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN";n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE";n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE";n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED";n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED";n.ACCOUNT_CHANGED="ACCOUNT_CHANGED";n.CHAIN_CHANGED="CHAIN_CHANGED";n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED";n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED";n.FORGOT_PASSWORD="FORGOT_PASSWORD";n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN";n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS";n.UNLOCK_FAILED="UNLOCK_FAILED";n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED";n.LOCK_METAMASK="LOCK_METAMASK";n.DISPLAY_WARNING="DISPLAY_WARNING";n.HIDE_WARNING="HIDE_WARNING";n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION";n.SHOW_ACCOUNT_DETAIL="SHOW_ACCOUNT_DETAIL";n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE";n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE";n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE";n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY";n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL";n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS";n.COMPLETED_TX="COMPLETED_TX";n.TRANSACTION_ERROR="TRANSACTION_ERROR";n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS";n.SET_NEXT_NONCE="SET_NEXT_NONCE";n.SET_RPC_TARGET="SET_RPC_TARGET";n.SET_PROVIDER_TYPE="SET_PROVIDER_TYPE";n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH";n.SHOW_LOADING="SHOW_LOADING_INDICATION";n.HIDE_LOADING="HIDE_LOADING_INDICATION";n.BUY_ETH="BUY_ETH";n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU";n.SET_USE_BLOCKIE="SET_USE_BLOCKIE";n.SET_USE_NONCEFIELD="SET_USE_NONCEFIELD";n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE";n.SET_IPFS_GATEWAY="SET_IPFS_GATEWAY";n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS";n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE";n.UPDATE_FEATURE_FLAGS="UPDATE_FEATURE_FLAGS";n.UPDATE_PREFERENCES="UPDATE_PREFERENCES";n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING";n.SET_MOUSE_USER_STATE="SET_MOUSE_USER_STATE";n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS";n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS";n.SET_PENDING_TOKENS="SET_PENDING_TOKENS";n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS";n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE";n.SET_SELECTED_SETTINGS_RPC_URL="SET_SELECTED_SETTINGS_RPC_URL";n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED";n.SET_NEW_COLLECTIBLE_ADDED_MESSAGE="SET_NEW_COLLECTIBLE_ADDED_MESSAGE";n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED";n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED";n.LOADING_TOKEN_PARAMS_STARTED="LOADING_TOKEN_PARAMS_STARTED";n.LOADING_TOKEN_PARAMS_FINISHED="LOADING_TOKEN_PARAMS_FINISHED";n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS";n.SET_CURRENT_WINDOW_TAB="SET_CURRENT_WINDOW_TAB";n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS";n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP";n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION";n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR";n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE";n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH"}}},{package:"$root$"}],[7036,{"../../app/scripts/lib/buy-url":42,"../../app/scripts/lib/util":83,"../../shared/constants/app":6105,"../../shared/constants/hardware-wallets":6107,"../../shared/constants/metametrics":6109,"../../shared/modules/hexstring-utils":6120,"../../shared/modules/string-utils":6124,"../ducks/alerts/unconnected-account":6615,"../ducks/metamask/metamask":6624,"../ducks/send":6625,"../helpers/utils/confirm-tx.util":6650,"../helpers/utils/conversions.util":6651,"../helpers/utils/i18n-helper":6656,"../helpers/utils/switch-direction":6665,"../helpers/utils/transactions.util":6667,"../helpers/utils/tx-helper":6668,"../pages/swaps/swaps.util":7018,"../selectors":7030,"./actionConstants":7035,"@babel/runtime/helpers/defineProperty":193,"@babel/runtime/helpers/interopRequireDefault":199,"@sentry/browser":1395,buffer:1996,lodash:5091,loglevel:5104,pify:5336},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n._setBackgroundConnection=function(e){w=e,D=(0,s.default)(w)},n.acceptWatchAsset=function(e){return async t=>{t(ne());try{await D.acceptWatchAsset(e),await le(t)}catch(e){return o.default.error(e),void t(ae(e.message))}finally{t(re())}t(te())}},n.addCollectible=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add collectible without address");if(!t)throw new Error("MetaMask - Cannot add collectible without tokenID");n||r(ne());try{await D.addCollectible(e,t)}catch(e){o.default.error(e),r(ae(e.message))}finally{await le(r),r(re())}}},n.addCollectibleVerifyOwnership=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add collectible without address");if(!t)throw new Error("MetaMask - Cannot add collectible without tokenID");n||r(ne());try{await D.addCollectibleVerifyOwnership(e,t)}catch(e){if(e.message.includes("This collectible is not owned by the user")||e.message.includes("Unable to verify ownership."))throw e;o.default.error(e),r(ae(e.message))}finally{await le(r),r(re())}}},n.addDetectedTokens=function(e){return async t=>{try{await D.addDetectedTokens(e)}catch(e){o.default.error(e)}finally{await le(t)}}},n.addNewAccount=function(){return o.default.debug("background.addNewAccount"),async(e,t)=>{const n=t().metamask.identities;let r;e(ne());try{const{identities:t}=await D.addNewAccount();r=t}catch(t){throw e(ae(t.message)),t}finally{e(re())}const a=Object.keys(r).find((e=>!n[e]));return await le(e),a}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{w.addPermittedAccount(e,t,(e=>{e?r(e):n()}))})),await le(n)}},n.addPollingTokenToAppState=async function(e){return D.addPollingTokenToAppState(e,T.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,p.getEnvironmentType)()])},n.addToAddressBook=function(e,t="",n=""){return o.default.debug("background.addToAddressBook"),async(r,a)=>{const{chainId:s}=a().metamask.provider;let i;try{i=await D.setAddressBook((0,N.toChecksumHexAddress)(e),t,s,n)}catch(e){throw o.default.error(e),r(ae("Address book failed to update")),e}i||r(ae("Address book failed to update"))}},n.addToken=Z,n.addTokens=function(e){return t=>Array.isArray(e)?Promise.all(e.map((({address:e,symbol:n,decimals:r})=>t(Z(e,n,r))))):Promise.all(Object.entries(e).map((([e,{address:n,symbol:r,decimals:a}])=>t(Z(n,r,a)))))},n.addUnapprovedTransaction=async function(e,t){o.default.debug("background.addUnapprovedTransaction");return await D.addUnapprovedTransaction(e,T.ORIGIN_METAMASK,t)},n.addUnapprovedTransactionAndRouteToConfirmationPage=function(e,t,n){return async r=>{try{o.default.debug("background.addUnapprovedTransaction");const a=await D.addUnapprovedTransaction(e,T.ORIGIN_METAMASK,t,n);return r(Q()),a}catch(e){r(re()),r(ae(e.message))}return null}},n.approvePermissionsRequest=function(e){return t=>{w.approvePermissionsRequest(e,(e=>{e&&t(ae(e.message))}))}},n.attemptLedgerTransportCreation=async function(){return await D.attemptLedgerTransportCreation()},n.buyEth=function(e){return async t=>{const n=await(0,u.default)(e);n&&(global.platform.openTab({url:n}),t({type:P.BUY_ETH}))}},n.cancelDecryptMsg=function(e){return async t=>{let n;t(ne());try{n=await D.cancelDecryptMessage(e.id)}finally{t(re())}return t(q(n)),t(H(e.id)),t(te()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{let n;t(ne());try{n=await D.cancelEncryptionPublicKey(e.id)}finally{t(re())}return t(q(n)),t(H(e.id)),t(te()),e}},n.cancelMsg=function(e){return async t=>{let n;t(ne());try{n=await D.cancelMessage(e.id)}finally{t(re())}return t(q(n)),t(H(e.id)),t(te()),e}},n.cancelPersonalMsg=function(e){return async t=>{let n;t(ne());try{n=await D.cancelPersonalMessage(e.id)}finally{t(re())}return t(q(n)),t(H(e.id)),t(te()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(re()),await D.cancelQRHardwareSignRequest()}},n.cancelSmartTransaction=function(e){return async t=>{try{await D.cancelSmartTransaction(e)}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const n=(0,y.parseSmartTransactionsError)(e.message);t({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:n.type})}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(re()),await D.cancelSyncQRHardware()}},n.cancelTx=function(e,t=!0){return n=>(t&&n(ne()),new Promise(((t,n)=>{w.cancelTransaction(e.id,(e=>{e?n(e):t()}))})).then((()=>x())).then((e=>n(q(e)))).then((()=>(n((0,A.resetSendState)()),n(H(e.id)),n(re()),n(te()),e))).catch((e=>{throw n(re()),e})))},n.cancelTxs=function(e){return async t=>{t(ne());try{const n=e.map((({id:e})=>e)),r=n.map((e=>new Promise(((t,n)=>{w.cancelTransaction(e,(e=>{e?n(e):t()}))}))));await Promise.all(r);const a=await x();t(q(a)),t((0,A.resetSendState)()),n.forEach((e=>{t(H(e))}))}finally{(0,p.getEnvironmentType)()===T.ENVIRONMENT_TYPE_NOTIFICATION?Ne():t(re())}}},n.cancelTypedMsg=function(e){return async t=>{let n;t(ne());try{n=await D.cancelTypedMessage(e.id)}finally{t(re())}return t(q(n)),t(H(e.id)),t(te()),e}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:r}=n().appState;e in r||(t({type:P.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,i.captureException)(Error(e)))}},n.checkAndUpdateAllCollectiblesOwnershipStatus=async function(){await D.checkAndUpdateAllCollectiblesOwnershipStatus()},n.checkAndUpdateSingleCollectibleOwnershipStatus=async function(e){await D.checkAndUpdateSingleCollectibleOwnershipStatus(e,!1)},n.checkHardwareStatus=function(e,t){return o.default.debug("background.checkHardwareStatus",e,t),async n=>{let r;n(ne());try{r=await D.checkHardwareStatus(e,t)}catch(e){throw o.default.error(e),n(ae(e.message)),e}finally{n(re())}return await le(n),r}},n.clearAccountDetails=function(){return{type:P.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:P.CLEAR_PENDING_TOKENS}},n.clearSwapsQuotes=function(){return async e=>{await D.clearSwapsQuotes(),await le(e)}},n.closeCurrentNotificationWindow=te,n.closeNotificationPopup=Ne,n.closeWelcomeScreen=function(){return{type:P.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=ue,n.completedTx=H,n.connectHardware=function(e,t,n,r){return o.default.debug("background.connectHardware",e,t,n),async(a,s)=>{const{ledgerTransportType:i}=s().metamask;let u;a(ne(`Looking for your ${(0,c.capitalize)(e)}...`));try{if(e===I.DEVICE_NAMES.LEDGER&&await D.establishLedgerTransportPreference(),e===I.DEVICE_NAMES.LEDGER&&i===I.LEDGER_TRANSPORT_TYPES.WEBHID){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:I.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(I.LEDGER_USB_VENDOR_ID))))throw new Error(r("ledgerWebHIDNotConnectedErrorMessage"))}u=await D.connectHardware(e,t,n)}catch(t){throw o.default.error(t),e===I.DEVICE_NAMES.LEDGER&&i===I.LEDGER_TRANSPORT_TYPES.WEBHID&&t.message.match("Failed to open the device")?(a(ae(r("ledgerDeviceOpenFailureMessage"))),new Error(r("ledgerDeviceOpenFailureMessage"))):(e!==I.DEVICE_NAMES.QR&&a(ae(t.message)),t)}finally{a(re())}return await le(a),u}},n.createCancelTransaction=function(e,t,n){let r;return o.default.debug("background.cancelTransaction"),a=>new Promise(((s,o)=>{w.createCancelTransaction(e,t,n,((e,t)=>{if(e)return a(ae(e.message)),void o(e);const{currentNetworkTxList:n}=t,{id:i}=n[n.length-1];r=i,s(t)}))})).then((e=>a(q(e)))).then((()=>r))},n.createEventFragment=function(e){return D.createEventFragment(e)},n.createNewVault=M,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(ne());try{await M(e);return await G()}catch(e){throw t(ae(e.message)),new Error(e.message)}finally{t(re())}}},n.createNewVaultAndRestore=function(e,n){return r=>{r(ne()),o.default.debug("background.createNewVaultAndRestore");const a=Array.from(t.from(n,"utf8").values());let s;return new Promise(((t,n)=>{w.createNewVaultAndRestore(e,a,((e,r)=>{e?n(e):(s=r,t())}))})).then((()=>r(j()))).then((()=>(r(z()),r(re()),s))).catch((e=>(r(ae(e.message)),r(re()),Promise.reject(e))))}},n.createRetryTransaction=function(e,t){let n;return r=>new Promise(((a,s)=>{w.createSpeedUpTransaction(e,t,((e,t)=>{if(e)return r(ae(e.message)),void s(e);const{currentNetworkTxList:o}=t;n=o[o.length-1],a(t)}))})).then((e=>r(q(e)))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n){let r;return o.default.debug("background.createSpeedUpTransaction"),a=>new Promise(((s,o)=>{w.createSpeedUpTransaction(e,t,n,((e,t)=>{if(e)return a(ae(e.message)),void o(e);const{currentNetworkTxList:n}=t;r=n[n.length-1],s(t)}))})).then((e=>a(q(e)))).then((()=>r))},n.createTransactionEventFragment=function(e,t){return D.createTransactionEventFragment(e,t)},n.customSwapsGasParamsUpdated=function(e,t){return async n=>{await D.setSwapsTxGasPrice(t),await D.setSwapsTxGasLimit(e,!0),await le(n)}},n.decryptMsg=function(e){return o.default.debug("action - decryptMsg"),async t=>{let n;t(ne()),o.default.debug("actions calling background.decryptMessage");try{n=await D.decryptMessage(e)}catch(e){throw o.default.error(e),t(ae(e.message)),e}finally{t(re())}return t(q(n)),t(H(e.metamaskId)),t(te()),e}},n.decryptMsgInline=function(e){return o.default.debug("action - decryptMsgInline"),async t=>{let n;o.default.debug("actions calling background.decryptMessageInline");try{n=await D.decryptMessageInline(e)}catch(e){throw o.default.error(e),t(ae(e.message)),e}return t(q(n)),n.unapprovedDecryptMsgs[e.metamaskId]}},n.delRpcTarget=function(e){return t=>(o.default.debug(`background.delRpcTarget: ${e}`),new Promise(((n,r)=>{w.delCustomRpc(e,(e=>{if(e)return o.default.error(e),t(ae("Had a problem removing network!")),void r(e);n()}))})))},n.detectCollectibles=function(){return async e=>{e(ne()),o.default.debug("background.detectCollectibles"),await D.detectCollectibles(),e(re()),await le(e)}},n.detectNewTokens=async function(){return D.detectNewTokens()},n.disconnectGasFeeEstimatePoller=function(e){return D.disconnectGasFeeEstimatePoller(e)},n.dismissSmartTransactionsErrorMessage=function(){return{type:P.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=ae,n.editRpc=function(e,t,n,r="ETH",a,s){return async i=>{o.default.debug(`background.delRpcTarget: ${e}`);try{D.delCustomRpc(e)}catch(e){return o.default.error(e),void i(ae("Had a problem removing network!"))}try{await D.updateAndSetCustomRpc(t,n,r,a||t,s)}catch(e){return o.default.error(e),void i(ae("Had a problem changing networks!"))}i({type:P.SET_RPC_TARGET,value:t})}},n.encryptionPublicKeyMsg=function(e){return o.default.debug("action - encryptionPublicKeyMsg"),async t=>{let n;t(ne()),o.default.debug("actions calling background.encryptionPublicKey");try{n=await D.encryptionPublicKey(e)}catch(e){throw o.default.error(e),t(ae(e.message)),e}finally{t(re())}return t(q(n)),t(H(e.metamaskId)),t(te()),e}},n.estimateGas=function(e){return D.estimateGas(e)},n.estimateSmartTransactionsGas=function(e,t){t&&(t.value="0x0");return async n=>{try{await D.estimateSmartTransactionsGas(e,t)}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,y.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t.type})}throw e}}},n.exportAccount=function(e,t){return function(n){return n(ne()),o.default.debug("background.verifyPassword"),new Promise(((r,a)=>{w.verifyPassword(e,(function(e){if(e)return o.default.error("Error in verifying password."),n(re()),n(ae("Incorrect Password.")),void a(e);o.default.debug("background.exportAccount"),w.exportAccount(t,(function(e,t){if(n(re()),e)return o.default.error(e),n(ae("Had a problem exporting the account.")),void a(e);n(se(t)),r(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return o.default.debug("background.verifyPassword"),new Promise(((r,a)=>{w.verifyPassword(e,(function(e){if(e)return o.default.error("Error in submitting password."),void a(e);o.default.debug("background.exportAccounts");const s=t.map((e=>new Promise(((t,r)=>w.exportAccount(e,(function(e,a){if(e)return o.default.error(e),n(ae("Had a problem exporting the account.")),void r(e);t(a)}))))));r(Promise.all(s))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[r,a]=await D.fetchAndSetQuotes(e,t);return await le(n),[r,a]}},n.fetchInfoToSync=function(){return e=>(o.default.debug("background.fetchInfoToSync"),new Promise(((t,n)=>{w.fetchInfoToSync(((r,a)=>{if(r)return e(ae(r.message)),void n(r);t(a)}))})))},n.fetchSmartTransactionFees=function(e){return async t=>{try{return await D.fetchSmartTransactionFees(e)}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const n=(0,y.parseSmartTransactionsError)(e.message);t({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:n.type})}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await D.fetchSmartTransactionsLiveness()}catch(e){o.default.error(e)}}},n.finalizeEventFragment=function(e,t){return D.finalizeEventFragment(e,t)},n.forceUpdateMetamaskState=le,n.forgetDevice=function(e){return o.default.debug("background.forgetDevice",e),async t=>{t(ne());try{await D.forgetDevice(e)}catch(e){throw o.default.error(e),t(ae(e.message)),e}finally{t(re())}await le(t)}},n.forgotPassword=Y,n.getBalancesInSingleCall=async function(e){return await D.getBalancesInSingleCall(e)},n.getContractMethodData=function(e=""){return(t,n)=>{const r=(0,p.addHexPrefix)(e).slice(0,10),{knownMethodData:a}=n().metamask;return a&&a[r]&&0!==Object.keys(a[r]).length||"0x"===r?Promise.resolve(a[r]):(t(Te()),o.default.debug("loadingMethodData"),(0,d.getMethodDataAsync)(r).then((({name:e,params:n})=>(t(me()),w.addKnownMethodData(r,{name:e,params:n},(e=>{e&&t(ae(e.message))})),{name:e,params:n}))))}},n.getCurrentWindowTab=function(){return async e=>{e(Oe(await global.platform.currentTab()))}},n.getGasFeeEstimatesAndStartPolling=function(){return D.getGasFeeEstimatesAndStartPolling()},n.getGasFeeTimeEstimate=function(e,t){return D.getGasFeeTimeEstimate(e,t)},n.getNextNonce=function(){return async(e,t)=>{const n=t().metamask.selectedAddress;let r;try{r=await D.getNextNonce(n)}catch(t){throw e(ae(t.message)),t}return e(Se(r)),r}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(ge(await D.getOpenMetamaskTabsIds()))}},n.getRequestAccountTabIds=function(){return async e=>{e(Ae(await D.getRequestAccountTabIds()))}},n.getThreeBoxLastUpdated=function(){return e=>new Promise(((t,n)=>{w.getThreeBoxLastUpdated(((r,a)=>{if(r)return e(ae(r.message)),void n(r);t(a)}))}))},n.getTokenStandardAndDetails=async function(e,t,n){return await D.getTokenStandardAndDetails(e,t,n)},n.getTransactions=async function(e={}){return await D.getTransactions(e)},n.goHome=k,n.hideAlert=function(){return{type:P.ALERT_CLOSE}},n.hideLoadingIndication=re,n.hideModal=function(e){return{type:P.MODAL_CLOSE,payload:e}},n.hideNetworkDropdown=function(){return{type:P.NETWORK_DROPDOWN_CLOSE}},n.hideTestNetMessage=function(){return D.setShowTestnetMessageInDropdown(!1)},n.hideWarning=function(){return{type:P.HIDE_WARNING}},n.ignoreTokens=function(e){return async t=>{try{await D.ignoreTokens(e)}catch(e){o.default.error(e)}finally{await le(t)}}},n.importNewAccount=function(e,t){return async n=>{let r;n(ne("This may take a while, please be patient."));try{o.default.debug("background.importAccountWithStrategy"),await D.importAccountWithStrategy(e,t),o.default.debug("background.getState"),r=await D.getState()}catch(e){throw n(ae(e.message)),e}finally{n(re())}return n(q(r)),r.selectedAddress&&n({type:P.SHOW_ACCOUNT_DETAIL,value:r.selectedAddress}),r}},n.importTokens=function(e){return async t=>{try{await D.importTokens(e)}catch(e){o.default.error(e)}finally{await le(t)}}},n.initializeThreeBox=fe,n.isCollectibleOwner=async function(e,t,n){return await D.isCollectibleOwner(e,t,n)},n.loadingMethodDataFinished=me,n.loadingMethodDataStarted=Te,n.loadingTokenParamsFinished=function(){return{type:P.LOADING_TOKEN_PARAMS_FINISHED}},n.loadingTokenParamsStarted=function(){return{type:P.LOADING_TOKEN_PARAMS_STARTED}},n.lockMetamask=function(){return o.default.debug("background.setLocked"),e=>(e(ne()),new Promise(((e,t)=>{w.setLocked((n=>{n?t(n):e()}))})).then((()=>x())).catch((t=>(e(ae(t.message)),Promise.reject(t)))).then((t=>{e(q(t)),e(re()),e({type:P.LOCK_METAMASK})})).catch((()=>{e(re()),e({type:P.LOCK_METAMASK})})))},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>w.markPasswordForgotten((n=>{n?t(n):e()}))))}finally{e(re()),e(Y()),await le(e)}}},n.qrCodeDetected=function(e){return async t=>{await t({type:P.QR_CODE_DETECTED,value:e}),t((0,A.computeEstimatedGasLimit)())}},n.rejectPendingApproval=function(e,t){return async n=>{await D.rejectPendingApproval(e,t);const{pendingApprovals:r}=await le(n);0===Object.values(r).length&&n(te())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,r)=>{w.rejectPermissionsRequest(e,(e=>{if(e)return t(ae(e.message)),void r(e);le(t).then(n).catch(r)}))}))},n.rejectWatchAsset=function(e){return async t=>{t(ne());try{await D.rejectWatchAsset(e),await le(t)}catch(e){return o.default.error(e),void t(ae(e.message))}finally{t(re())}t(te())}},n.removeAccount=function(e){return async t=>{t(ne());try{await new Promise(((t,n)=>{w.removeAccount(e,((e,r)=>{e?n(e):t(r)}))})),await le(t)}catch(e){throw t(ae(e.message)),e}finally{t(re())}o.default.info(`Account removed: ${e}`),t(z())}},n.removeAndIgnoreCollectible=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot ignore collectible without address");if(!t)throw new Error("MetaMask - Cannot ignore collectible without tokenID");n||r(ne());try{await D.removeAndIgnoreCollectible(e,t)}catch(e){o.default.error(e),r(ae(e.message))}finally{await le(r),r(re())}}},n.removeCollectible=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot remove collectible without address");if(!t)throw new Error("MetaMask - Cannot remove collectible without tokenID");n||r(ne());try{await D.removeCollectible(e,t)}catch(e){o.default.error(e),r(ae(e.message))}finally{await le(r),r(re())}}},n.removeFromAddressBook=function(e,t){return o.default.debug("background.removeFromAddressBook"),async()=>{await D.removeFromAddressBook(e,(0,N.toChecksumHexAddress)(t))}},n.removePermissionsFor=function(e){return t=>{w.removePermissionsFor(e,(e=>{e&&t(ae(e.message))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{w.removePermittedAccount(e,t,(e=>{e?r(e):n()}))})),await le(n)}},n.removePollingTokenFromAppState=async function(e){return D.removePollingTokenFromAppState(e,T.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,p.getEnvironmentType)()])},n.removeToken=function(e){return async t=>{t(ne());try{await D.removeToken(e)}catch(e){o.default.error(e),t(ae(e.message))}finally{await le(t),t(re())}}},n.requestAccountsPermissionWithId=function(e){return async t=>{const n=await D.requestAccountsPermissionWithId(e);return await le(t),n}},n.requestRevealSeedWords=function(e){return async t=>{t(ne()),o.default.debug("background.verifyPassword");try{await U(e);return await G()}catch(e){throw t(ae(e.message)),e}finally{t(re())}}},n.resetAccount=function(){return e=>(e(ne()),new Promise(((t,n)=>{w.resetAccount(((r,a)=>{if(e(re()),r)return e(ae(r.message)),void n(r);o.default.info(`Transaction history reset for ${a}`),e(z()),t(a)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{const t=await D.resetSwapsState();return await le(e),t}},n.resetSwapsPostFetchState=function(){return async e=>{await D.resetPostFetchState(),await le(e)}},n.resolvePendingApproval=function(e,t){return async n=>{await D.resolvePendingApproval(e,t);const{pendingApprovals:r}=await le(n);0===Object.values(r).length&&n(te())}},n.restoreFromThreeBox=function(e){return t=>new Promise(((n,r)=>{w.restoreFromThreeBox(e,(e=>{if(e)return t(ae(e.message)),void r(e);n()}))}))},n.rollbackToPreviousProvider=function(){return async e=>{try{await D.rollbackToPreviousProvider()}catch(t){o.default.error(t),e(ae("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await D.safeRefetchQuotes(),await le(e)}},n.setAccountLabel=function(e,t){return n=>(n(ne()),o.default.debug("background.setAccountLabel"),new Promise(((r,a)=>{w.setAccountLabel(e,t,(s=>{if(n(re()),s)return n(ae(s.message)),void a(s);n({type:P.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),r(e)}))})))},n.setAdvancedGasFee=function(e){return t=>{t(ne()),o.default.debug("background.setAdvancedGasFee"),w.setAdvancedGasFee(e,(e=>{t(re()),e&&t(ae(e.message))}))}},n.setAlertEnabledness=async function(e,t){await D.setAlertEnabledness(e,t)},n.setApproveTxId=function(e){return async t=>{await D.setApproveTxId(e),await le(t)}},n.setAutoLockTimeLimit=function(e){return ie("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await D.setBackgroundSwapRouteState(e),await le(t)}},n.setCollectiblesDetectionNoticeDismissed=function(){return D.setCollectiblesDetectionNoticeDismissed(!0)},n.setCompletedOnboarding=function(){return async e=>{e(ne());try{await D.completeOnboarding(),e(ue())}catch(t){throw e(ae(t.message)),t}finally{e(re())}}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{w.setConnectedStatusPopoverHasBeenShown((e=>{if(e)throw new Error(e.message)}))}},n.setCurrentCurrency=function(e){return async t=>{t(ne()),o.default.debug("background.setCurrentCurrency");try{await D.setCurrentCurrency(e),await le(t)}catch(e){return o.default.error(e),void t(ae(e.message))}finally{t(re())}}},n.setCurrentLocale=Ee,n.setCurrentWindowTab=Oe,n.setCustomApproveTxData=function(e){return async t=>{await D.setCustomApproveTxData(e),await le(t)}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await D.setDefaultHomeActiveTabName(e),await le(t)}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(ne()),await D.setDismissSeedBackUpReminder(e),t(re())}},n.setEIP1559V2Enabled=function(e){return async t=>{t(ne()),o.default.debug("background.setEIP1559V2Enabled");try{await D.setEIP1559V2Enabled(e)}finally{t(re())}}},n.setEnableEIP1559V2NoticeDismissed=function(){return D.setEnableEIP1559V2NoticeDismissed(!0)},n.setFeatureFlag=function(e,t,n){return r=>(r(ne()),new Promise(((a,s)=>{w.setFeatureFlag(e,t,((e,t)=>{if(r(re()),e)return r(ae(e.message)),void s(e);r(oe(t)),n&&r(ee({name:n})),a(t)}))})))},n.setFirstTimeFlowType=function(e){return t=>{o.default.debug("background.setFirstTimeFlowType"),w.setFirstTimeFlowType(e,(e=>{e&&t(ae(e.message))})),t({type:P.SET_FIRST_TIME_FLOW_TYPE,value:e})}},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:P.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,value:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return ie("hideZeroBalanceTokens",e)},n.setInitialGasEstimate=function(e){return async t=>{await D.setInitialGasEstimate(e),await le(t)}},n.setIpfsGateway=function(e){return t=>{t(ne()),o.default.debug("background.setIpfsGateway"),w.setIpfsGateway(e,(n=>{t(re()),t(n?ae(n.message):{type:P.SET_IPFS_GATEWAY,value:e})}))}},n.setLastActiveTime=function(){return e=>{w.setLastActiveTime((t=>{t&&e(ae(t.message))}))}},n.setLedgerTransportPreference=function(e){return async t=>{t(ne()),await D.setLedgerTransportPreference(e),t(re())}},n.setMouseUserState=function(e){return{type:P.SET_MOUSE_USER_STATE,value:e}},n.setNewCollectibleAddedMessage=function(e){return{type:P.SET_NEW_COLLECTIBLE_ADDED_MESSAGE,value:e}},n.setNewNetworkAdded=function(e){return{type:P.SET_NEW_NETWORK_ADDED,value:e}},n.setNextNonce=Se,n.setOpenMetamaskTabsIDs=ge,n.setOpenSeaEnabled=function(e){return t=>{t(ne()),o.default.debug("background.setOpenSeaEnabled"),w.setOpenSeaEnabled(e,(e=>{t(re()),e&&t(ae(e.message))}))}},n.setParticipateInMetaMetrics=function(e){return t=>(o.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,r)=>{w.setParticipateInMetaMetrics(e,((a,s)=>{if(o.default.debug(a),a)return t(ae(a.message)),void r(a);t({type:P.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,s])}))})))},n.setPendingTokens=function(e){const{customToken:t={},selectedTokens:n={},tokenAddressList:r=[]}=e,{address:a,symbol:s,decimals:o}=t,i=a&&s&&o>=0<=36?b(b({},n),{},{[a]:b(b({},t),{},{isCustom:!0})}):n;return Object.keys(i).forEach((e=>{i[e].unlisted=!r.find((t=>(0,h.isEqualCaseInsensitive)(t,e)))})),{type:P.SET_PENDING_TOKENS,payload:i}},n.setPreference=ie,n.setProviderType=function(e){return async t=>{o.default.debug("background.setProviderType",e);try{await D.setProviderType(e)}catch(e){return o.default.error(e),void t(ae("Had a problem changing networks!"))}t(J(e))}},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{w.setRecoveryPhraseReminderHasBeenShown((e=>{if(e)throw new Error(e.message)}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{w.setRecoveryPhraseReminderLastShown(e,(e=>{if(e)throw new Error(e.message)}))}},n.setRequestAccountTabIds=Ae,n.setRpcTarget=function(e,t,n="ETH",r){return async a=>{o.default.debug(`background.setRpcTarget: ${e} ${t} ${n} ${r}`);try{await D.setCustomRpc(e,t,n,r||e)}catch(e){o.default.error(e),a(ae("Had a problem changing networks!"))}}},n.setSeedPhraseBackedUp=function(e){return t=>(o.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,r)=>{w.setSeedPhraseBackedUp(e,(e=>{if(e)return t(ae(e.message)),void r(e);le(t).then(n).catch(r)}))})))},n.setSelectedAddress=function(e){return async t=>{t(ne()),o.default.debug("background.setSelectedAddress");try{await X(e)}catch(e){return void t(ae(e.message))}finally{t(re())}}},n.setSelectedQuoteAggId=function(e){return async t=>{await D.setSelectedQuoteAggId(e),await le(t)}},n.setSelectedSettingsRpcUrl=function(e){return{type:P.SET_SELECTED_SETTINGS_RPC_URL,value:e}},n.setShowFiatConversionOnTestnetsPreference=function(e){return ie("showFiatInTestnets",e)},n.setShowRestorePromptToFalse=function(){return e=>new Promise(((t,n)=>{w.setShowRestorePromptToFalse((r=>{if(r)return e(ae(r.message)),void n(r);t()}))}))},n.setShowTestNetworks=function(e){return ie("showTestNetworks",e)},n.setSmartTransactionsOptInStatus=async function(e,t){Ie({event:"STX OptIn",category:R.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:e,stx_prev_user_opt_in:t}}),await D.setSmartTransactionsOptInStatus(e)},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await D.setStatusRefreshInterval(e)}catch(e){o.default.error(e)}}},n.setSwapsErrorKey=function(e){return async t=>{await D.setSwapsErrorKey(e),await le(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await D.setSwapsFeatureFlags(e),await le(t)}},n.setSwapsLiveness=function(e){return async t=>{await D.setSwapsLiveness(e),await le(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await D.setSwapsQuotesPollingLimitEnabled(e),await le(t)}},n.setSwapsTokens=function(e){return async t=>{await D.setSwapsTokens(e),await le(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await D.setSwapsTxGasLimit(e,!0),await le(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await D.setSwapsTxGasPrice(e),await le(t)}},n.setTheme=function(e){return async t=>{t(ne()),o.default.debug("background.setTheme");try{await D.setTheme(e)}finally{t(re())}}},n.setThreeBoxSyncingPermission=_e,n.setTradeTxId=function(e){return async t=>{await D.setTradeTxId(e),await le(t)}},n.setUnconnectedAccountAlertShown=Re,n.setUseBlockie=function(e){return t=>{t(ne()),o.default.debug("background.setUseBlockie"),w.setUseBlockie(e,(e=>{t(re()),e&&t(ae(e.message))})),t({type:P.SET_USE_BLOCKIE,value:e})}},n.setUseCollectibleDetection=function(e){return t=>{t(ne()),o.default.debug("background.setUseCollectibleDetection"),w.setUseCollectibleDetection(e,(e=>{t(re()),e&&t(ae(e.message))}))}},n.setUseNativeCurrencyAsPrimaryCurrencyPreference=function(e){return ie("useNativeCurrencyAsPrimaryCurrency",e)},n.setUseNonceField=function(e){return async t=>{t(ne()),o.default.debug("background.setUseNonceField");try{await D.setUseNonceField(e)}catch(e){t(ae(e.message))}t(re()),t({type:P.SET_USE_NONCEFIELD,value:e})}},n.setUsePhishDetect=function(e){return t=>{t(ne()),o.default.debug("background.setUsePhishDetect"),w.setUsePhishDetect(e,(e=>{t(re()),e&&t(ae(e.message))}))}},n.setUseTokenDetection=function(e){return t=>{t(ne()),o.default.debug("background.setUseTokenDetection"),w.setUseTokenDetection(e,(e=>{t(re()),e&&t(ae(e.message))}))}},n.setWeb3ShimUsageAlertDismissed=async function(e){await D.setWeb3ShimUsageAlertDismissed(e)},n.showAccountDetail=function(e){return async(t,n)=>{t(ne()),o.default.debug("background.setSelectedAddress");const r=n(),a=(0,O.getUnconnectedAccountAlertEnabledness)(r),s=r.activeTab.origin,i=(0,S.getSelectedAddress)(r),c=(0,S.getPermittedAccountsForCurrentTab)(r),u=Boolean(s)&&c.includes(i),l=Boolean(s)&&c.includes(e),d=u&&!l;try{await X(e),await le(t)}catch(e){return void t(ae(e.message))}finally{t(re())}t({type:P.SHOW_ACCOUNT_DETAIL,value:e}),a&&d&&(t((0,g.switchedToUnconnectedAccount)()),await Re(s))}},n.showAccountsPage=z,n.showAlert=function(e){return{type:P.ALERT_OPEN,value:e}},n.showConfTxPage=Q,n.showLoadingIndication=ne,n.showModal=ee,n.showNetworkDropdown=function(){return{type:P.NETWORK_DROPDOWN_OPEN}},n.showPrivateKey=se,n.showQrScanner=function(){return e=>{e(ee({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:P.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const r=await ye(e,t.fees),a=await ye(e,t.cancelFees,!0);try{return(await D.submitSignedTransactions({signedTransactions:r,signedCanceledTransactions:a,txParams:e})).uuid}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,y.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t.type})}throw e}}},n.signMsg=function(e){return o.default.debug("action - signMsg"),async t=>{let n;t(ne()),o.default.debug("actions calling background.signMessage");try{n=await D.signMessage(e)}catch(e){throw o.default.error(e),t(ae(e.message)),e}finally{t(re())}return t(q(n)),t(H(e.metamaskId)),t(te()),e}},n.signPersonalMsg=function(e){return o.default.debug("action - signPersonalMsg"),async t=>{let n;t(ne()),o.default.debug("actions calling background.signPersonalMessage");try{n=await D.signPersonalMessage(e)}catch(e){throw o.default.error(e),t(ae(e.message)),e}finally{t(re())}return t(q(n)),t(H(e.metamaskId)),t(te()),e}},n.signTypedMsg=function(e){return o.default.debug("action - signTypedMsg"),async t=>{let n;t(ne()),o.default.debug("actions calling background.signTypedMessage");try{n=await D.signTypedMessage(e)}catch(e){throw o.default.error(e),t(ae(e.message)),e}finally{t(re())}return t(q(n)),t(H(e.metamaskId)),t(te()),e}},n.stopPollingForQuotes=function(){return async e=>{await D.stopPollingForQuotes(),await le(e)}},n.submitPassword=L,n.submitQRHardwareCryptoAccount=async function(e){await D.submitQRHardwareCryptoAccount(e)},n.submitQRHardwareCryptoHDKey=async function(e){await D.submitQRHardwareCryptoHDKey(e)},n.submitQRHardwareSignature=async function(e,t){await D.submitQRHardwareSignature(e,t)},n.toggleAccountMenu=function(){return{type:P.TOGGLE_ACCOUNT_MENU}},n.trackMetaMetricsEvent=Ie,n.trackMetaMetricsPage=function(e,t){return D.trackMetaMetricsPage(e,t)},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{w.tryReverseResolveAddress(e,(e=>{e&&o.default.error(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(ne()),t(K()),o.default.debug("background.submitPassword"),new Promise(((t,n)=>{w.submitPassword(e,(e=>{e?n(e):t()}))})).then((()=>(t($()),le(t)))).then((()=>{t(re())})).catch((e=>(t(V(e.message)),t(re()),Promise.reject(e)))))},n.turnThreeBoxSyncingOn=pe,n.turnThreeBoxSyncingOnAndInitialize=function(){return async e=>{await e(_e(!0)),await e(pe()),await e(fe())}},n.txError=W,n.unMarkPasswordForgotten=j,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(ne());try{await L(e);const n=await G();return await le(t),n}catch(e){throw t(ae(e.message)),new Error(e.message)}finally{t(re())}}},n.unlockFailed=V,n.unlockHardwareWalletAccounts=function(e,t,n,r){return o.default.debug("background.unlockHardwareWalletAccount",e,t,n,r),async a=>{a(ne());for(const s of e)try{await D.unlockHardwareWalletAccount(s,t,n,r)}catch(e){throw o.default.error(e),a(ae(e.message)),a(re()),e}return a(re()),undefined}},n.unlockInProgress=K,n.unlockSucceeded=$,n.updateAndApproveTx=function(e,t){return n=>(!t&&n(ne()),new Promise(((t,r)=>{w.updateAndApproveTransaction(e,(a=>{if(n(B(e.id,e.txParams)),n((0,A.resetSendState)()),a)return n(W(a)),n(k()),o.default.error(a.message),void r(a);t(e)}))})).then((()=>x())).then((e=>n(q(e)))).then((()=>(n((0,A.resetSendState)()),n(H(e.id)),n(re()),n(F("")),n(te()),e))).catch((e=>(n(re()),Promise.reject(e)))))},n.updateAndSetCustomRpc=function(e,t,n="ETH",r,a){return async s=>{o.default.debug(`background.updateAndSetCustomRpc: ${e} ${t} ${n} ${r}`);try{await D.updateAndSetCustomRpc(e,t,n,r||e,a)}catch(e){return o.default.error(e),void s(ae("Had a problem changing networks!"))}s({type:P.SET_RPC_TARGET,value:e})}},n.updateCollectibleDropDownState=function(e){return async t=>{await D.updateCollectibleDropDownState(e),await le(t)}},n.updateCurrentLocale=de,n.updateCustomNonce=F,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async r=>{await Promise.all([D.setSwapsTxGasLimit(e),D.setSwapsTxMaxFeePerGas(t),D.setSwapsTxMaxFeePriorityPerGas(n)]),await le(r)}},n.updateEditableParams=function(e,t){return async n=>{let r;try{r=await D.updateEditableParams(e,t)}catch(e){throw n(W(e)),o.default.error(e.message),e}return r}},n.updateEventFragment=function(e,t){return D.updateEventFragment(e,t)},n.updateFeatureFlags=oe,n.updateMetamaskState=q,n.updatePreferences=ce,n.updatePreviousGasParams=function(e,t){return async n=>{let r;try{r=await D.updatePreviousGasParams(e,t)}catch(e){throw n(W(e)),o.default.error(e.message),e}return r}},n.updateProviderType=J,n.updateSmartTransaction=function(e,t){return async n=>{try{await D.updateSmartTransaction(b({uuid:e},t))}catch(e){if(o.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,y.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t.type})}throw e}}},n.updateSwapApprovalTransaction=function(e,t){return async n=>{let r;try{r=await D.updateSwapApprovalTransaction(e,t)}catch(e){throw n(W(e)),o.default.error(e.message),e}return r}},n.updateSwapTransaction=function(e,t){return async n=>{let r;try{r=await D.updateSwapTransaction(e,t)}catch(e){throw n(W(e)),o.default.error(e.message),e}return r}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await D.setSwapsUserFeeLevel(e),await le(t)}},n.updateTokenType=async function(e){let t={};try{t=await D.updateTokenType(e)}catch(e){o.default.error(e)}return t},n.updateTransaction=function(e,t){return async n=>{!t&&n(ne());try{await D.updateTransaction(e)}catch(t){throw n(B(e.id,e.txParams)),n(re()),n(W(t)),n(k()),o.default.error(t.message),t}try{n(B(e.id,e.txParams));return n(q(await x())),n(Q({id:e.id})),e}finally{n(re())}}},n.updateTransactionGasFees=function(e,t){return async n=>{let r;try{r=await D.updateTransactionGasFees(e,t)}catch(e){throw n(W(e)),o.default.error(e.message),e}return r}},n.updateTransactionParams=B,n.updateTransactionSendFlowHistory=function(e,t){return async n=>{let r;try{r=await D.updateTransactionSendFlowHistory(e,t)}catch(e){throw n(W(e)),o.default.error(e.message),e}return r}},n.updateViewedNotifications=function(e){return D.updateViewedNotifications(e)},n.verifyPassword=U,n.verifySeedPhrase=G;var a=r(e("@babel/runtime/helpers/defineProperty")),s=r(e("pify")),o=r(e("loglevel")),i=e("@sentry/browser"),c=e("lodash"),u=r(e("../../app/scripts/lib/buy-url")),l=e("../helpers/utils/i18n-helper"),d=e("../helpers/utils/transactions.util"),E=r(e("../helpers/utils/switch-direction")),T=e("../../shared/constants/app"),m=e("../helpers/utils/confirm-tx.util"),f=r(e("../helpers/utils/tx-helper")),p=e("../../app/scripts/lib/util"),_=e("../helpers/utils/conversions.util"),S=e("../selectors"),A=e("../ducks/send"),g=e("../ducks/alerts/unconnected-account"),O=e("../ducks/metamask/metamask"),N=e("../../shared/modules/hexstring-utils"),I=e("../../shared/constants/hardware-wallets"),R=e("../../shared/constants/metametrics"),y=e("../pages/swaps/swaps.util"),h=e("../../shared/modules/string-utils"),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(e("./actionConstants"));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let w=null,D=null;function k(){return{type:P.GO_HOME}}function L(e){return new Promise(((t,n)=>{w.submitPassword(e,(e=>{e?n(e):t()}))}))}function M(e){return new Promise(((t,n)=>{w.createNewVaultAndKeychain(e,(e=>{e?n(e):t(!0)}))}))}function U(e){return new Promise(((t,n)=>{w.verifyPassword(e,(e=>{e?n(e):t(!0)}))}))}async function G(){const e=await D.verifySeedPhrase();return t.from(e).toString("utf8")}function F(e){return{type:P.UPDATE_CUSTOM_NONCE,value:e}}const x=()=>(o.default.debug("background.getState"),new Promise(((e,t)=>{w.getState(((n,r)=>{n?t(n):e(r)}))})));function H(e){return(t,n)=>{const r=n(),{unapprovedTxs:a,unapprovedMsgs:s,unapprovedPersonalMsgs:o,unapprovedTypedMessages:i,network:c,provider:{chainId:u}}=r.metamask,l=(0,f.default)(a,s,o,i,c,u).filter((t=>t.id!==e));t({type:P.COMPLETED_TX,value:{id:e,unconfirmedActionsCount:l.length}})}}function B(e,t){return{type:P.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function W(e){return{type:P.TRANSACTION_ERROR,message:e.message}}function j(){return e=>new Promise((t=>{w.unMarkPasswordForgotten((()=>{e(Y(!1)),t()}))})).then((()=>le(e)))}function Y(e=!0){return{type:P.FORGOT_PASSWORD,value:e}}function K(){return{type:P.UNLOCK_IN_PROGRESS}}function V(e){return{type:P.UNLOCK_FAILED,value:e}}function $(e){return{type:P.UNLOCK_SUCCEEDED,value:e}}function q(e){return(t,n)=>{var r,a,s,o;const{metamask:i}=n(),{currentLocale:u,selectedAddress:l,provider:d}=i,{currentLocale:E,selectedAddress:T,provider:m}=e;u&&E&&u!==E&&t(de(E)),l!==T&&t({type:P.SELECTED_ADDRESS_CHANGED});const f=null!==(r=null===(a=e.addressBook)||void 0===a?void 0:a[null==m?void 0:m.chainId])&&void 0!==r?r:{},p=null!==(s=null===(o=i.addressBook)||void 0===o?void 0:o[null==d?void 0:d.chainId])&&void 0!==s?s:{},_=(0,S.getMetaMaskAccounts)({metamask:e}),A=(0,S.getMetaMaskAccounts)({metamask:i}),g=_[T],O=_[l];Object.entries(A).forEach((([e,n])=>{(0,c.isEqual)(n,_[e])||t({type:P.ACCOUNT_CHANGED,payload:{account:_[e]}})})),!1===(0,c.isEqual)(O,g)&&t({type:P.SELECTED_ACCOUNT_CHANGED,payload:{account:g}}),!1===(0,c.isEqual)(p,f)&&t({type:P.ADDRESS_BOOK_UPDATED,payload:{addressBook:f}}),!1===(0,c.isEqual)(i.gasFeeEstimates,e.gasFeeEstimates)&&t({type:P.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:e.gasFeeEstimates,gasEstimateType:e.gasEstimateType}}),d.chainId!==m.chainId&&t({type:P.CHAIN_CHANGED,payload:m.chainId}),t({type:P.UPDATE_METAMASK_STATE,value:e})}}async function X(e){o.default.debug("background.setSelectedAddress"),await D.setSelectedAddress(e)}function z(){return{type:P.SHOW_ACCOUNTS_PAGE}}function Q({id:e}={}){return{type:P.SHOW_CONF_TX_PAGE,id:e}}function Z(e,t,n,r,a){return async s=>{if(!e)throw new Error("MetaMask - Cannot add token without address");a||s(ne());try{await D.addToken(e,t,n,r)}catch(e){o.default.error(e),s(ae(e.message))}finally{await le(s),s(re())}}}function J(e){return{type:P.SET_PROVIDER_TYPE,value:e}}function ee(e){return{type:P.MODAL_OPEN,payload:e}}function te(){return(e,t)=>{(0,p.getEnvironmentType)()!==T.ENVIRONMENT_TYPE_NOTIFICATION||(0,m.hasUnconfirmedTransactions)(t())||Ne()}}function ne(e){return{type:P.SHOW_LOADING,value:e}}function re(){return{type:P.HIDE_LOADING}}function ae(e){return{type:P.DISPLAY_WARNING,value:e}}function se(e){return{type:P.SHOW_PRIVATE_KEY,value:e}}function oe(e){return{type:P.UPDATE_FEATURE_FLAGS,value:e}}function ie(e,t){return n=>(n(ne()),new Promise(((r,a)=>{w.setPreference(e,t,((e,t)=>{if(n(re()),e)return n(ae(e.message)),void a(e);n(ce(t)),r(t)}))})))}function ce(e){return{type:P.UPDATE_PREFERENCES,value:e}}function ue(){return{type:P.COMPLETE_ONBOARDING}}async function le(e){let t;o.default.debug("background.getState");try{t=await D.getState()}catch(t){throw e(ae(t.message)),t}return e(q(t)),t}function de(e){return async t=>{t(ne());try{await(0,l.loadRelativeTimeFormatLocaleData)(e);const n=await(0,l.fetchLocale)(e),r=await D.setCurrentLocale(e);await(0,E.default)(r),t(Ee(e,n))}catch(e){return void t(ae(e.message))}finally{t(re())}}}function Ee(e,t){return{type:P.SET_CURRENT_LOCALE,value:{locale:e,messages:t}}}function Te(){return{type:P.LOADING_METHOD_DATA_STARTED}}function me(){return{type:P.LOADING_METHOD_DATA_FINISHED}}function fe(){return e=>new Promise(((t,n)=>{w.initializeThreeBox((r=>{if(r)return e(ae(r.message)),void n(r);t()}))}))}function pe(){return e=>new Promise(((t,n)=>{w.turnThreeBoxSyncingOn((r=>{if(r)return e(ae(r.message)),void n(r);t()}))}))}function _e(e){return t=>new Promise(((n,r)=>{w.setThreeBoxSyncingPermission(e,(e=>{if(e)return t(ae(e.message)),void r(e);n()}))}))}function Se(e){return{type:P.SET_NEXT_NONCE,value:e}}function Ae(e){return{type:P.SET_REQUEST_ACCOUNT_TABS,value:e}}function ge(e){return{type:P.SET_OPEN_METAMASK_TAB_IDS,value:e}}function Oe(e){return{type:P.SET_CURRENT_WINDOW_TAB,value:e}}async function Ne(){await D.markNotificationPopupAsAutomaticallyClosed(),global.platform.closeCurrentWindow()}function Ie(e,t){return D.trackMetaMetricsEvent(e,t)}async function Re(e){await D.setUnconnectedAccountAlertShown(e)}const ye=async(e,t,n)=>{const r=t.map((t=>{const r=b(b({},e),{},{maxFeePerGas:(0,_.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,_.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,_.decimalToHex)(21e3):e.gas,value:e.value});return n&&(r.to=r.from,r.data="0x"),r}));return await D.approveTransactionsWithSameNonce(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$"}],[81,{"@babel/runtime/helpers/interopRequireDefault":199,"obj-multiplex":5221,pump:5441},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.setupMultiplex=function(e){const t=new a.default;return(0,s.default)(e,t,e,(e=>{e&&console.error(e)})),t};var a=r(e("obj-multiplex")),s=r(e("pump"))}}},{package:"$root$"}],[83,{"../../../shared/constants/app":6105,"../../../shared/constants/network":6110,"@babel/runtime/helpers/interopRequireDefault":199,"bn.js":1952,"ethereumjs-util":2437,lodash:5091,"webextension-polyfill":6080},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.BnMultiplyByFraction=function(e,t,n){const r=new o.default(t),a=new o.default(n);return e.mul(r).div(a)},n.addHexPrefix=void 0,n.bnToHex=function(e){return d(e.toString(16))},n.checkForError=function(){const{lastError:e}=a.default.runtime;if(!e)return undefined;if(e.stack&&e.message)return e;return new Error(e.message)},n.getChainType=function(e){if(e===c.MAINNET_CHAIN_ID)return"mainnet";if(c.TEST_CHAINS.includes(e))return"testnet";return"custom"},n.getPlatform=n.getEnvironmentType=void 0,n.hexToBn=function(e){return new o.default((0,s.stripHexPrefix)(e),16)};var a=r(e("webextension-polyfill")),s=e("ethereumjs-util"),o=r(e("bn.js")),i=e("lodash"),c=e("../../../shared/constants/network"),u=e("../../../shared/constants/app");const l=(0,i.memoize)((e=>{const t=new URL(e);return"/popup.html"===t.pathname?u.ENVIRONMENT_TYPE_POPUP:["/home.html"].includes(t.pathname)?u.ENVIRONMENT_TYPE_FULLSCREEN:"/notification.html"===t.pathname?u.ENVIRONMENT_TYPE_NOTIFICATION:u.ENVIRONMENT_TYPE_BACKGROUND}));n.getEnvironmentType=(e=window.location.href)=>l(e);n.getPlatform=()=>{const{navigator:e}=window,{userAgent:t}=e;return t.includes("Firefox")?u.PLATFORM_FIREFOX:"brave"in e?u.PLATFORM_BRAVE:t.includes("Edg/")?u.PLATFORM_EDGE:t.includes("OPR")?u.PLATFORM_OPERA:u.PLATFORM_CHROME};const d=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):e.startsWith("-")?e.replace("-","-0x"):`0x${e}`;n.addHexPrefix=d}}},{package:"$root$"}]],[],{});