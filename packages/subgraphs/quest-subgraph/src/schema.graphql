type _Schema_
  @fulltext(
    name: "questSearch"
    language: en
    algorithm: rank
    include: [
      {
        entity: "QuestEntity"
        fields: [{ name: "questAddress" }, { name: "questTitle" }]
      }
      { entity: "QuestMetadata", fields: [{ name: "questDescription" }] }
    ]
  )

type QuestMetadata @entity(immutable: false) {
  id: ID!
  questDescription: String!
  questCommunicationLink: String
}

type QuestEntity @entity(immutable: false) {
  id: ID!
  version: Int!
  questAddress: String!
  questTitle: String!
  questMetadata: QuestMetadata!
  questExpireTimeSec: BigInt
  questRewardTokenAddress: Bytes!
  creationTimestamp: BigInt!
  questFundsRecoveryAddress: Bytes!
  questCreator: Bytes!
  questMaxPlayers: BigInt
  questCreateDepositToken: Bytes!
  questCreateDepositAmount: BigInt!
  questPlayDepositToken: Bytes
  questPlayDepositAmount: BigInt
  questPlayers: [String!]!
  questIsWhiteListed: Boolean!
}

type CreateDepositEntity @entity(immutable: true) {
  id: ID!
  timestamp: BigInt!
  depositToken: Bytes!
  depositAmount: BigInt!
}

type PlayDepositEntity @entity(immutable: true) {
  id: ID!
  timestamp: BigInt!
  depositToken: Bytes!
  depositAmount: BigInt!
}

type QuestClaimEntity @entity(immutable: true) {
  id: ID!
  questAddress: String!
  amount: BigInt!
  evidenceIpfsHash: Bytes!
  player: String!
}
